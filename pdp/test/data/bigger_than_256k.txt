section: Docs
title: API | IPFS Docs
pagetype: subdoc
url: docs/api
save_as: docs/api/index.html


# API Reference

<sup>Generated on 2018-07-25, from go-ipfs v0.4.15.</sup>

This is the HTTP API specification for IPFS.

IPFS HTTP API is an RPC API which should work across different
IPFS implementations. The most feature-complete of those implementations,
and current reference for this specification is
[go-ipfs](https://github.com/ipfs/go-ipfs).

This document is autogenerated from go-ipfs. For issues and support, check out
the [ipfs-http-api-docs](https://github.com/ipfs/ipfs-http-api-docs)
repository on GitHub.

## Getting started

### Alignment with CLI Commands

[Every command](../commands/) usable from the CLI is also available through
the HTTP API. For example:
```sh
> ipfs swarm peers
/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ
/ip4/104.236.151.122/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx
/ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z

> curl http://127.0.0.1:5001/api/v0/swarm/peers
{
  "Strings": [
    "/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ",
    "/ip4/104.236.151.122/tcp/4001/ipfs/QmSoLju6m7xTh3DuokvT3886QRYqxAzb1kShaanJgW36yx",
    "/ip4/104.236.176.52/tcp/4001/ipfs/QmSoLnSGccFuZQJzRadHn95W2CrSFmZuTdDWP8HXaHca9z",
  ]
}
```

### Arguments

Arguments are added through the special query string key "arg":

```
> curl "http://127.0.0.1:5001/api/v0/swarm/disconnect?arg=/ip4/54.93.113.247/tcp/48131/ipfs/QmUDS3nsBD1X4XK5Jo836fed7SErTyTuQzRqWaiQAyBYMP"
{
  "Strings": [
    "disconnect QmUDS3nsBD1X4XK5Jo836fed7SErTyTuQzRqWaiQAyBYMP success",
  ]
}
```

Note that it can be used multiple times to signify multiple arguments.

### Flags

Flags are added through the query string. For example, the `--encoding=json`
flag is the `&encoding=json` query parameter below:

```
> curl "http://127.0.0.1:5001/api/v0/object/get?arg=QmaaqrHyAQm7gALkRW8DcfGX3u8q9rWKnxEMmf7m9z515w&encoding=json"
{
  "Links": [
    {
      "Name": "index.html",
      "Hash": "QmYftndCvcEiuSZRX7njywX2AGSeHY2ASa7VryCq1mKwEw",
      "Size": 1700
    },
    {
      "Name": "static",
      "Hash": "QmdtWFiasJeh2ymW3TD2cLHYxn1ryTuWoNpwieFyJriGTS",
      "Size": 2428803
    }
  ],
  "Data": "CAE="
}
```
## Index

  *  [/add](#api-v0-add)
  *  [/bitswap/ledger](#api-v0-bitswap-ledger)
  *  [/bitswap/reprovide](#api-v0-bitswap-reprovide)
  *  [/bitswap/stat](#api-v0-bitswap-stat)
  *  [/bitswap/unwant](#api-v0-bitswap-unwant)
  *  [/bitswap/wantlist](#api-v0-bitswap-wantlist)
  *  [/block/get](#api-v0-block-get)
  *  [/block/put](#api-v0-block-put)
  *  [/block/rm](#api-v0-block-rm)
  *  [/block/stat](#api-v0-block-stat)
  *  [/bootstrap/add/default](#api-v0-bootstrap-add-default)
  *  [/bootstrap/list](#api-v0-bootstrap-list)
  *  [/bootstrap/rm/all](#api-v0-bootstrap-rm-all)
  *  [/cat](#api-v0-cat)
  *  [/commands](#api-v0-commands)
  *  [/config/edit](#api-v0-config-edit)
  *  [/config/profile/apply](#api-v0-config-profile-apply)
  *  [/config/replace](#api-v0-config-replace)
  *  [/config/show](#api-v0-config-show)
  *  [/dag/get](#api-v0-dag-get)
  *  [/dag/put](#api-v0-dag-put)
  *  [/dag/resolve](#api-v0-dag-resolve)
  *  [/dht/findpeer](#api-v0-dht-findpeer)
  *  [/dht/findprovs](#api-v0-dht-findprovs)
  *  [/dht/get](#api-v0-dht-get)
  *  [/dht/provide](#api-v0-dht-provide)
  *  [/dht/put](#api-v0-dht-put)
  *  [/dht/query](#api-v0-dht-query)
  *  [/diag/cmds/clear](#api-v0-diag-cmds-clear)
  *  [/diag/cmds/set-time](#api-v0-diag-cmds-set-time)
  *  [/diag/sys](#api-v0-diag-sys)
  *  [/dns](#api-v0-dns)
  *  [/file/ls](#api-v0-file-ls)
  *  [/files/chcid](#api-v0-files-chcid)
  *  [/files/cp](#api-v0-files-cp)
  *  [/files/flush](#api-v0-files-flush)
  *  [/files/ls](#api-v0-files-ls)
  *  [/files/mkdir](#api-v0-files-mkdir)
  *  [/files/mv](#api-v0-files-mv)
  *  [/files/read](#api-v0-files-read)
  *  [/files/rm](#api-v0-files-rm)
  *  [/files/stat](#api-v0-files-stat)
  *  [/files/write](#api-v0-files-write)
  *  [/filestore/dups](#api-v0-filestore-dups)
  *  [/filestore/ls](#api-v0-filestore-ls)
  *  [/filestore/verify](#api-v0-filestore-verify)
  *  [/get](#api-v0-get)
  *  [/id](#api-v0-id)
  *  [/key/gen](#api-v0-key-gen)
  *  [/key/list](#api-v0-key-list)
  *  [/key/rename](#api-v0-key-rename)
  *  [/key/rm](#api-v0-key-rm)
  *  [/log/level](#api-v0-log-level)
  *  [/log/ls](#api-v0-log-ls)
  *  [/log/tail](#api-v0-log-tail)
  *  [/ls](#api-v0-ls)
  *  [/mount](#api-v0-mount)
  *  [/name/publish](#api-v0-name-publish)
  *  [/name/pubsub/cancel](#api-v0-name-pubsub-cancel)
  *  [/name/pubsub/state](#api-v0-name-pubsub-state)
  *  [/name/pubsub/subs](#api-v0-name-pubsub-subs)
  *  [/name/resolve](#api-v0-name-resolve)
  *  [/object/data](#api-v0-object-data)
  *  [/object/diff](#api-v0-object-diff)
  *  [/object/get](#api-v0-object-get)
  *  [/object/links](#api-v0-object-links)
  *  [/object/new](#api-v0-object-new)
  *  [/object/patch/add-link](#api-v0-object-patch-add-link)
  *  [/object/patch/append-data](#api-v0-object-patch-append-data)
  *  [/object/patch/rm-link](#api-v0-object-patch-rm-link)
  *  [/object/patch/set-data](#api-v0-object-patch-set-data)
  *  [/object/put](#api-v0-object-put)
  *  [/object/stat](#api-v0-object-stat)
  *  [/p2p/listener/close](#api-v0-p2p-listener-close)
  *  [/p2p/listener/ls](#api-v0-p2p-listener-ls)
  *  [/p2p/listener/open](#api-v0-p2p-listener-open)
  *  [/p2p/stream/close](#api-v0-p2p-stream-close)
  *  [/p2p/stream/dial](#api-v0-p2p-stream-dial)
  *  [/p2p/stream/ls](#api-v0-p2p-stream-ls)
  *  [/pin/add](#api-v0-pin-add)
  *  [/pin/ls](#api-v0-pin-ls)
  *  [/pin/rm](#api-v0-pin-rm)
  *  [/pin/update](#api-v0-pin-update)
  *  [/pin/verify](#api-v0-pin-verify)
  *  [/ping](#api-v0-ping)
  *  [/pubsub/ls](#api-v0-pubsub-ls)
  *  [/pubsub/peers](#api-v0-pubsub-peers)
  *  [/pubsub/pub](#api-v0-pubsub-pub)
  *  [/pubsub/sub](#api-v0-pubsub-sub)
  *  [/refs/local](#api-v0-refs-local)
  *  [/repo/fsck](#api-v0-repo-fsck)
  *  [/repo/gc](#api-v0-repo-gc)
  *  [/repo/stat](#api-v0-repo-stat)
  *  [/repo/verify](#api-v0-repo-verify)
  *  [/repo/version](#api-v0-repo-version)
  *  [/resolve](#api-v0-resolve)
  *  [/shutdown](#api-v0-shutdown)
  *  [/stats/bitswap](#api-v0-stats-bitswap)
  *  [/stats/bw](#api-v0-stats-bw)
  *  [/stats/repo](#api-v0-stats-repo)
  *  [/swarm/addrs/listen](#api-v0-swarm-addrs-listen)
  *  [/swarm/addrs/local](#api-v0-swarm-addrs-local)
  *  [/swarm/connect](#api-v0-swarm-connect)
  *  [/swarm/disconnect](#api-v0-swarm-disconnect)
  *  [/swarm/filters/add](#api-v0-swarm-filters-add)
  *  [/swarm/filters/rm](#api-v0-swarm-filters-rm)
  *  [/swarm/peers](#api-v0-swarm-peers)
  *  [/tar/add](#api-v0-tar-add)
  *  [/tar/cat](#api-v0-tar-cat)
  *  [/update](#api-v0-update)
  *  [/version](#api-v0-version)


## Endpoints


### /api/v0/add

Add a file or directory to ipfs.


#### Arguments

  - `arg` [file]: The path to a file to be added to ipfs. Required: **yes**.
  - `recursive` [bool]: Add directory paths recursively. Default: "false". Required: no.
  - `quiet` [bool]: Write minimal output. Required: no.
  - `quieter` [bool]: Write only final hash. Required: no.
  - `silent` [bool]: Write no output. Required: no.
  - `progress` [bool]: Stream progress data. Required: no.
  - `trickle` [bool]: Use trickle-dag format for dag generation. Required: no.
  - `only-hash` [bool]: Only chunk and hash - do not write to disk. Required: no.
  - `wrap-with-directory` [bool]: Wrap files with a directory object. Required: no.
  - `hidden` [bool]: Include files that are hidden. Only takes effect on recursive add. Required: no.
  - `chunker` [string]: Chunking algorithm, size-[bytes] or rabin-[min]-[avg]-[max]. Default: "size-262144". Required: no.
  - `pin` [bool]: Pin this object when adding. Default: "true". Required: no.
  - `raw-leaves` [bool]: Use raw blocks for leaf nodes. (experimental). Required: no.
  - `nocopy` [bool]: Add the file using filestore. Implies raw-leaves. (experimental). Required: no.
  - `fscache` [bool]: Check the filestore for pre-existing blocks. (experimental). Required: no.
  - `cid-version` [int]: CID version. Defaults to 0 unless an option that depends on CIDv1 is passed. (experimental). Required: no.
  - `hash` [string]: Hash function to use. Implies CIDv1 if not sha2-256. (experimental). Default: "sha2-256". Required: no.


#### Request Body

Argument "path" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Name": "<string>"
    "Hash": "<string>"
    "Bytes": "<int64>"
    "Size": "<string>"
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/add?recursive=false&quiet=<value>&quieter=<value>&silent=<value>&progress=<value>&trickle=<value>&only-hash=<value>&wrap-with-directory=<value>&hidden=<value>&chunker=size-262144&pin=true&raw-leaves=<value>&nocopy=<value>&fscache=<value>&cid-version=<value>&hash=sha2-256"`

***

### /api/v0/bitswap/ledger

Show the current ledger for a peer.


#### Arguments

  - `arg` [string]: The PeerID (B58) of the ledger to inspect. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Peer": "<string>"
    "Value": "<float64>"
    "Sent": "<uint64>"
    "Recv": "<uint64>"
    "Exchanged": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/bitswap/ledger?arg=<peer>"`

***

### /api/v0/bitswap/reprovide

Trigger reprovider.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/bitswap/reprovide"`

***

### /api/v0/bitswap/stat

Show some diagnostic information on the bitswap agent.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ProvideBufLen": "<int>"
    "Wantlist": [
        "<string>"
    ]
    "Peers": [
        "<string>"
    ]
    "BlocksReceived": "<uint64>"
    "DataReceived": "<uint64>"
    "BlocksSent": "<uint64>"
    "DataSent": "<uint64>"
    "DupBlksReceived": "<uint64>"
    "DupDataReceived": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/bitswap/stat"`

***

### /api/v0/bitswap/unwant

Remove a given block from your wantlist.


#### Arguments

  - `arg` [string]: Key(s) to remove from your wantlist. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/bitswap/unwant?arg=<key>"`

***

### /api/v0/bitswap/wantlist

Show blocks currently on the wantlist.


#### Arguments

  - `peer` [string]: Specify which peer to show wantlist for. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Keys": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/bitswap/wantlist?peer=<value>"`

***

### /api/v0/block/get

Get a raw IPFS block.


#### Arguments

  - `arg` [string]: The base58 multihash of an existing block to get. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/block/get?arg=<key>"`

***

### /api/v0/block/put

Store input as an IPFS block.


#### Arguments

  - `arg` [file]: The data to be stored as an IPFS block. Required: **yes**.
  - `format` [string]: cid format for blocks to be created with. Required: no.
  - `mhtype` [string]: multihash hash function. Default: "sha2-256". Required: no.
  - `mhlen` [int]: multihash hash length. Default: "-1". Required: no.


#### Request Body

Argument "data" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Key": "<string>"
    "Size": "<int>"
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/block/put?format=<value>&mhtype=sha2-256&mhlen=-1"`

***

### /api/v0/block/rm

Remove IPFS block(s).


#### Arguments

  - `arg` [string]: Bash58 encoded multihash of block(s) to remove. Required: **yes**.
  - `force` [bool]: Ignore nonexistent blocks. Required: no.
  - `quiet` [bool]: Write minimal output. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Error": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/block/rm?arg=<hash>&force=<value>&quiet=<value>"`

***

### /api/v0/block/stat

Print information of a raw IPFS block.


#### Arguments

  - `arg` [string]: The base58 multihash of an existing block to stat. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Key": "<string>"
    "Size": "<int>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/block/stat?arg=<key>"`

***

### /api/v0/bootstrap/add/default

Add default peers to the bootstrap list.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Peers": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/bootstrap/add/default"`

***

### /api/v0/bootstrap/list

Show peers in the bootstrap list.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Peers": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/bootstrap/list"`

***

### /api/v0/bootstrap/rm/all

Remove all peers from the bootstrap list.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Peers": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/bootstrap/rm/all"`

***

### /api/v0/cat

Show IPFS object data.


#### Arguments

  - `arg` [string]: The path to the IPFS object(s) to be outputted. Required: **yes**.
  - `offset` [int]: Byte offset to begin reading from. Required: no.
  - `length` [int]: Maximum number of bytes to read. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/cat?arg=<ipfs-path>&offset=<value>&length=<value>"`

***

### /api/v0/commands

List all available commands.


#### Arguments

  - `flags` [bool]: Show command flags. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Name": "<string>"
    "Subcommands": [
        {
            "Name": "<string>"
            "Subcommands": [
                {
                    "Name": "<string>"
                    "Subcommands": [
                        ...
                    ]
                    "Options": [
                        ...
                    ]
                    "showOpts": "<bool>"
                }
            ]
            "Options": [
                {
                    "Names": [
                        ...
                    ]
                }
            ]
            "showOpts": "<bool>"
        }
    ]
    "Options": [
        {
            "Names": [
                "<string>"
            ]
        }
    ]
    "showOpts": "<bool>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/commands?flags=<value>"`

***

### /api/v0/config/edit

Open the config file for editing in $EDITOR.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/config/edit"`

***

### /api/v0/config/profile/apply

Apply profile to config.


#### Arguments

  - `arg` [string]: The profile to apply to the config. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/config/profile/apply?arg=<profile>"`

***

### /api/v0/config/replace

Replace the config with <file>.


#### Arguments

  - `arg` [file]: The file to use as the new config. Required: **yes**.


#### Request Body

Argument "file" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/config/replace"`

***

### /api/v0/config/show

Output config file contents.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/config/show"`

***

### /api/v0/dag/get

Get a dag node from ipfs.


#### Arguments

  - `arg` [string]: The object to get Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/dag/get?arg=<ref>"`

***

### /api/v0/dag/put

Add a dag node to ipfs.


#### Arguments

  - `arg` [file]: The object to put Required: **yes**.
  - `format` [string]: Format that the object will be added as. Default: "cbor". Required: no.
  - `input-enc` [string]: Format that the input object will be. Default: "json". Required: no.
  - `pin` [bool]: Pin this object when adding. Required: no.
  - `hash` [string]: Hash function to use. Default: . Required: no.


#### Request Body

Argument "object data" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Cid": "<string>"
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/dag/put?format=cbor&input-enc=json&pin=<value>&hash=<value>"`

***

### /api/v0/dag/resolve

Resolve ipld block


#### Arguments

  - `arg` [string]: The path to resolve Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Cid": "<string>"
    "RemPath": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dag/resolve?arg=<ref>"`

***

### /api/v0/dht/findpeer

Query the DHT for all of the multiaddresses associated with a Peer ID.


#### Arguments

  - `arg` [string]: The ID of the peer to search for. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "Type": "<int>"
    "Responses": [
        {
            "ID": "<string>"
            "Addrs": [
                "<object>"
            ]
        }
    ]
    "Extra": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dht/findpeer?arg=<peerID>&verbose=<value>"`

***

### /api/v0/dht/findprovs

Find peers in the DHT that can provide a specific value, given a key.


#### Arguments

  - `arg` [string]: The key to find providers for. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.
  - `num-providers` [int]: The number of providers to find. Default: "20". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "Type": "<int>"
    "Responses": [
        {
            "ID": "<string>"
            "Addrs": [
                "<object>"
            ]
        }
    ]
    "Extra": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dht/findprovs?arg=<key>&verbose=<value>&num-providers=20"`

***

### /api/v0/dht/get

Given a key, query the DHT for its best value.


#### Arguments

  - `arg` [string]: The key to find a value for. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "Type": "<int>"
    "Responses": [
        {
            "ID": "<string>"
            "Addrs": [
                "<object>"
            ]
        }
    ]
    "Extra": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dht/get?arg=<key>&verbose=<value>"`

***

### /api/v0/dht/provide

Announce to the network that you are providing given values.


#### Arguments

  - `arg` [string]: The key[s] to send provide records for. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.
  - `recursive` [bool]: Recursively provide entire graph. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "Type": "<int>"
    "Responses": [
        {
            "ID": "<string>"
            "Addrs": [
                "<object>"
            ]
        }
    ]
    "Extra": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dht/provide?arg=<key>&verbose=<value>&recursive=<value>"`

***

### /api/v0/dht/put

Write a key/value pair to the DHT.


#### Arguments

  - `arg` [string]: The key to store the value at. Required: **yes**.
  - `arg` [string]: The value to store. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "Type": "<int>"
    "Responses": [
        {
            "ID": "<string>"
            "Addrs": [
                "<object>"
            ]
        }
    ]
    "Extra": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dht/put?arg=<key>&arg=<value>&verbose=<value>"`

***

### /api/v0/dht/query

Find the closest Peer IDs to a given Peer ID by querying the DHT.


#### Arguments

  - `arg` [string]: The peerID to run the query against. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "Type": "<int>"
    "Responses": [
        {
            "ID": "<string>"
            "Addrs": [
                "<object>"
            ]
        }
    ]
    "Extra": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dht/query?arg=<peerID>&verbose=<value>"`

***

### /api/v0/diag/cmds/clear

Clear inactive requests from the log.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/diag/cmds/clear"`

***

### /api/v0/diag/cmds/set-time

Set how long to keep inactive requests in the log.


#### Arguments

  - `arg` [string]: Time to keep inactive requests in log. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/diag/cmds/set-time?arg=<time>"`

***

### /api/v0/diag/sys

Print system diagnostic information.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/diag/sys"`

***

### /api/v0/dns

Resolve DNS links.


#### Arguments

  - `arg` [string]: The domain-name name to resolve. Required: **yes**.
  - `recursive` [bool]: Resolve until the result is not a DNS link. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Path": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/dns?arg=<domain-name>&recursive=<value>"`

***

### /api/v0/file/ls

List directory contents for Unix filesystem objects.


#### Arguments

  - `arg` [string]: The path to the IPFS object(s) to list links from. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Arguments": {
        "<string>": "<string>"
    }
    "Objects": {
        "<string>": {
            "Hash": "<string>"
            "Size": "<uint64>"
            "Type": "<string>"
            "Links": [
                {
                    "Name": "<string>"
                    "Hash": "<string>"
                    "Size": "<uint64>"
                    "Type": "<string>"
                }
            ]
        }
    }
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/file/ls?arg=<ipfs-path>"`

***

### /api/v0/files/chcid

Change the cid version or hash function of the root node of a given path.


#### Arguments

  - `arg` [string]: Path to change. Default: '/'. Required: no.
  - `cid-version` [int]: Cid version to use. (experimental). Required: no.
  - `hash` [string]: Hash function to use. Will set Cid version to 1 if used. (experimental). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/chcid?arg=<path>&cid-version=<value>&hash=<value>"`

***

### /api/v0/files/cp

Copy files into mfs.


#### Arguments

  - `arg` [string]: Source object to copy. Required: **yes**.
  - `arg` [string]: Destination to copy object to. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/cp?arg=<source>&arg=<dest>"`

***

### /api/v0/files/flush

Flush a given path's data to disk.


#### Arguments

  - `arg` [string]: Path to flush. Default: '/'. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/flush?arg=<path>"`

***

### /api/v0/files/ls

List directories in the local mutable namespace.


#### Arguments

  - `arg` [string]: Path to show listing for. Defaults to '/'. Required: no.
  - `l` [bool]: Use long listing format. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Entries": [
        {
            "Name": "<string>"
            "Type": "<int>"
            "Size": "<int64>"
            "Hash": "<string>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/ls?arg=<path>&l=<value>"`

***

### /api/v0/files/mkdir

Make directories.


#### Arguments

  - `arg` [string]: Path to dir to make. Required: **yes**.
  - `parents` [bool]: No error if existing, make parent directories as needed. Required: no.
  - `cid-version` [int]: Cid version to use. (experimental). Required: no.
  - `hash` [string]: Hash function to use. Will set Cid version to 1 if used. (experimental). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/mkdir?arg=<path>&parents=<value>&cid-version=<value>&hash=<value>"`

***

### /api/v0/files/mv

Move files.


#### Arguments

  - `arg` [string]: Source file to move. Required: **yes**.
  - `arg` [string]: Destination path for file to be moved to. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/mv?arg=<source>&arg=<dest>"`

***

### /api/v0/files/read

Read a file in a given mfs.


#### Arguments

  - `arg` [string]: Path to file to be read. Required: **yes**.
  - `offset` [int]: Byte offset to begin reading from. Required: no.
  - `count` [int]: Maximum number of bytes to read. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/read?arg=<path>&offset=<value>&count=<value>"`

***

### /api/v0/files/rm

Remove a file.


#### Arguments

  - `arg` [string]: File to remove. Required: **yes**.
  - `recursive` [bool]: Recursively remove directories. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/rm?arg=<path>&recursive=<value>"`

***

### /api/v0/files/stat

Display file status.


#### Arguments

  - `arg` [string]: Path to node to stat. Required: **yes**.
  - `format` [string]: Print statistics in given format. Allowed tokens: <hash> <size> <cumulsize> <type> <childs>. Conflicts with other format options. Default: <hash>
Size: <size>
CumulativeSize: <cumulsize>
ChildBlocks: <childs>
Type: <type>. Default: "<hash>
Size: <size>
CumulativeSize: <cumulsize>
ChildBlocks: <childs>
Type: <type>". Required: no.
  - `hash` [bool]: Print only hash. Implies '--format=<hash>'. Conflicts with other format options. Required: no.
  - `size` [bool]: Print only size. Implies '--format=<cumulsize>'. Conflicts with other format options. Required: no.
  - `with-local` [bool]: Compute the amount of the dag that is local, and if possible the total size. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Size": "<uint64>"
    "CumulativeSize": "<uint64>"
    "Blocks": "<int>"
    "Type": "<string>"
    "WithLocality": "<bool>"
    "Local": "<bool>"
    "SizeLocal": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/files/stat?arg=<path>&format=<hash>
Size: <size>
CumulativeSize: <cumulsize>
ChildBlocks: <childs>
Type: <type>&hash=<value>&size=<value>&with-local=<value>"`

***

### /api/v0/files/write

Write to a mutable file in a given filesystem.


#### Arguments

  - `arg` [string]: Path to write to. Required: **yes**.
  - `arg` [file]: Data to write. Required: **yes**.
  - `offset` [int]: Byte offset to begin writing at. Required: no.
  - `create` [bool]: Create the file if it does not exist. Required: no.
  - `truncate` [bool]: Truncate the file to size zero before writing. Required: no.
  - `count` [int]: Maximum number of bytes to read. Required: no.
  - `raw-leaves` [bool]: Use raw blocks for newly created leaf nodes. (experimental). Required: no.
  - `cid-version` [int]: Cid version to use. (experimental). Required: no.
  - `hash` [string]: Hash function to use. Will set Cid version to 1 if used. (experimental). Required: no.


#### Request Body

Argument "data" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/files/write?arg=<path>&offset=<value>&create=<value>&truncate=<value>&count=<value>&raw-leaves=<value>&cid-version=<value>&hash=<value>"`

***

### /api/v0/filestore/dups

List blocks that are both in the filestore and standard block storage.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Ref": "<string>"
    "Err": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/filestore/dups"`

***

### /api/v0/filestore/ls

List objects in filestore.


#### Arguments

  - `arg` [string]: Cid of objects to list. Required: no.
  - `file-order` [bool]: sort the results based on the path of the backing file. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Status": "<int32>"
    "ErrorMsg": "<string>"
    "Key": "<string>"
    "FilePath": "<string>"
    "Offset": "<uint64>"
    "Size": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/filestore/ls?arg=<obj>&file-order=<value>"`

***

### /api/v0/filestore/verify

Verify objects in filestore.


#### Arguments

  - `arg` [string]: Cid of objects to verify. Required: no.
  - `file-order` [bool]: verify the objects based on the order of the backing file. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Status": "<int32>"
    "ErrorMsg": "<string>"
    "Key": "<string>"
    "FilePath": "<string>"
    "Offset": "<uint64>"
    "Size": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/filestore/verify?arg=<obj>&file-order=<value>"`

***

### /api/v0/get

Download IPFS objects.


#### Arguments

  - `arg` [string]: The path to the IPFS object(s) to be outputted. Required: **yes**.
  - `output` [string]: The path where the output should be stored. Required: no.
  - `archive` [bool]: Output a TAR archive. Required: no.
  - `compress` [bool]: Compress the output with GZIP compression. Required: no.
  - `compression-level` [int]: The level of compression (1-9). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/get?arg=<ipfs-path>&output=<value>&archive=<value>&compress=<value>&compression-level=<value>"`

***

### /api/v0/id

Show ipfs node id info.


#### Arguments

  - `arg` [string]: Peer.ID of node to look up. Required: no.
  - `format` [string]: Optional output format. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ID": "<string>"
    "PublicKey": "<string>"
    "Addresses": [
        "<string>"
    ]
    "AgentVersion": "<string>"
    "ProtocolVersion": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/id?arg=<peerid>&format=<value>"`

***

### /api/v0/key/gen

Create a new keypair


#### Arguments

  - `arg` [string]: name of key to create Required: **yes**.
  - `type` [string]: type of the key to create [rsa, ed25519]. Required: no.
  - `size` [int]: size of the key to generate. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Name": "<string>"
    "Id": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/key/gen?arg=<name>&type=<value>&size=<value>"`

***

### /api/v0/key/list

List all local keypairs


#### Arguments

  - `l` [bool]: Show extra information about keys. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Keys": [
        {
            "Name": "<string>"
            "Id": "<string>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/key/list?l=<value>"`

***

### /api/v0/key/rename

Rename a keypair


#### Arguments

  - `arg` [string]: name of key to rename Required: **yes**.
  - `arg` [string]: new name of the key Required: **yes**.
  - `force` [bool]: Allow to overwrite an existing key. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Was": "<string>"
    "Now": "<string>"
    "Id": "<string>"
    "Overwrite": "<bool>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/key/rename?arg=<name>&arg=<newName>&force=<value>"`

***

### /api/v0/key/rm

Remove a keypair


#### Arguments

  - `arg` [string]: names of keys to remove Required: **yes**.
  - `l` [bool]: Show extra information about keys. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Keys": [
        {
            "Name": "<string>"
            "Id": "<string>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/key/rm?arg=<name>&l=<value>"`

***

### /api/v0/log/level

Change the logging level.


#### Arguments

  - `arg` [string]: The subsystem logging identifier. Use 'all' for all subsystems. Required: **yes**.
  - `arg` [string]: The log level, with 'debug' the most verbose and 'critical' the least verbose.
			One of: debug, info, warning, error, critical.
		 Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Message": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/log/level?arg=<subsystem>&arg=<level>"`

***

### /api/v0/log/ls

List the logging subsystems.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/log/ls"`

***

### /api/v0/log/tail

Read the event log.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/log/tail"`

***

### /api/v0/ls

List directory contents for Unix filesystem objects.


#### Arguments

  - `arg` [string]: The path to the IPFS object(s) to list links from. Required: **yes**.
  - `headers` [bool]: Print table headers (Hash, Size, Name). Required: no.
  - `resolve-type` [bool]: Resolve linked objects to find out their types. Default: "true". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Objects": [
        {
            "Hash": "<string>"
            "Links": [
                {
                    "Name": "<string>"
                    "Hash": "<string>"
                    "Size": "<uint64>"
                    "Type": "<int32>"
                }
            ]
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/ls?arg=<ipfs-path>&headers=<value>&resolve-type=true"`

***

### /api/v0/mount

Mounts IPFS to the filesystem (read-only).


#### Arguments

  - `ipfs-path` [string]: The path where IPFS should be mounted. Required: no.
  - `ipns-path` [string]: The path where IPNS should be mounted. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "IPFS": "<string>"
    "IPNS": "<string>"
    "FuseAllowOther": "<bool>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/mount?ipfs-path=<value>&ipns-path=<value>"`

***

### /api/v0/name/publish

Publish IPNS names.


#### Arguments

  - `arg` [string]: ipfs path of the object to be published. Required: **yes**.
  - `resolve` [bool]: Resolve given path before publishing. Default: "true". Required: no.
  - `lifetime` [string]: Time duration that the record will be valid for.
    This accepts durations such as "300s", "1.5h" or "2h45m". Valid time units are
    "ns", "us" (or "Âµs"), "ms", "s", "m", "h". Default: "24h". Required: no.
  - `ttl` [string]: Time duration this record should be cached for (caution: experimental). Required: no.
  - `key` [string]: Name of the key to be used or a valid PeerID, as listed by 'ipfs key list -l'. Default:. Default: "self". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Name": "<string>"
    "Value": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/name/publish?arg=<ipfs-path>&resolve=true&lifetime=24h&ttl=<value>&key=self"`

***

### /api/v0/name/pubsub/cancel

Cancel a name subscription


#### Arguments

  - `arg` [string]: Name to cancel the subscription for. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Canceled": "<bool>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/name/pubsub/cancel?arg=<name>"`

***

### /api/v0/name/pubsub/state

Query the state of IPNS pubsub


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Enabled": "<bool>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/name/pubsub/state"`

***

### /api/v0/name/pubsub/subs

Show current name subscriptions


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/name/pubsub/subs"`

***

### /api/v0/name/resolve

Resolve IPNS names.


#### Arguments

  - `arg` [string]: The IPNS name to resolve. Defaults to your node's peerID. Required: no.
  - `recursive` [bool]: Resolve until the result is not an IPNS name. Required: no.
  - `nocache` [bool]: Do not use cached entries. Required: no.
  - `dht-record-count` [uint]: Number of records to request for DHT resolution. Required: no.
  - `dht-timeout` [string]: Max time to collect values during DHT resolution eg "30s". Pass 0 for no timeout. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Path": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/name/resolve?arg=<name>&recursive=<value>&nocache=<value>&dht-record-count=<value>&dht-timeout=<value>"`

***

### /api/v0/object/data

Output the raw bytes of an IPFS object.


#### Arguments

  - `arg` [string]: Key of the object to retrieve, in base58-encoded multihash format. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/data?arg=<key>"`

***

### /api/v0/object/diff

Display the diff between two ipfs objects.


#### Arguments

  - `arg` [string]: Object to diff against. Required: **yes**.
  - `arg` [string]: Object to diff. Required: **yes**.
  - `verbose` [bool]: Print extra information. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Changes": [
        {
            "Type": "<int>"
            "Path": "<string>"
            "Before": "<string>"
            "After": "<string>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/diff?arg=<obj_a>&arg=<obj_b>&verbose=<value>"`

***

### /api/v0/object/get

Get and serialize the DAG node named by <key>.


#### Arguments

  - `arg` [string]: Key of the object to retrieve, in base58-encoded multihash format. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
    "Data": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/get?arg=<key>"`

***

### /api/v0/object/links

Output the links pointed to by the specified object.


#### Arguments

  - `arg` [string]: Key of the object to retrieve, in base58-encoded multihash format. Required: **yes**.
  - `headers` [bool]: Print table headers (Hash, Size, Name). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/links?arg=<key>&headers=<value>"`

***

### /api/v0/object/new

Create a new object from an ipfs template.


#### Arguments

  - `arg` [string]: Template to use. Optional. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/new?arg=<template>"`

***

### /api/v0/object/patch/add-link

Add a link to a given object.


#### Arguments

  - `arg` [string]: The hash of the node to modify. Required: **yes**.
  - `arg` [string]: Name of link to create. Required: **yes**.
  - `arg` [string]: IPFS object to add link to. Required: **yes**.
  - `create` [bool]: Create intermediary nodes. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/patch/add-link?arg=<root>&arg=<name>&arg=<ref>&create=<value>"`

***

### /api/v0/object/patch/append-data

Append data to the data segment of a dag node.


#### Arguments

  - `arg` [string]: The hash of the node to modify. Required: **yes**.
  - `arg` [file]: Data to append. Required: **yes**.


#### Request Body

Argument "data" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/object/patch/append-data?arg=<root>"`

***

### /api/v0/object/patch/rm-link

Remove a link from an object.


#### Arguments

  - `arg` [string]: The hash of the node to modify. Required: **yes**.
  - `arg` [string]: Name of the link to remove. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/patch/rm-link?arg=<root>&arg=<link>"`

***

### /api/v0/object/patch/set-data

Set the data field of an IPFS object.


#### Arguments

  - `arg` [string]: The hash of the node to modify. Required: **yes**.
  - `arg` [file]: The data to set the object to. Required: **yes**.


#### Request Body

Argument "data" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/object/patch/set-data?arg=<root>"`

***

### /api/v0/object/put

Store input as a DAG object, print its key.


#### Arguments

  - `arg` [file]: Data to be stored as a DAG object. Required: **yes**.
  - `inputenc` [string]: Encoding type of input data. One of: {"protobuf", "json"}. Default: "json". Required: no.
  - `datafieldenc` [string]: Encoding type of the data field, either "text" or "base64". Default: "text". Required: no.
  - `pin` [bool]: Pin this object when adding. Required: no.
  - `quiet` [bool]: Write minimal output. Required: no.


#### Request Body

Argument "data" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "Links": [
        {
            "Name": "<string>"
            "Hash": "<string>"
            "Size": "<uint64>"
        }
    ]
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/object/put?inputenc=json&datafieldenc=text&pin=<value>&quiet=<value>"`

***

### /api/v0/object/stat

Get stats for the DAG node named by <key>.


#### Arguments

  - `arg` [string]: Key of the object to retrieve, in base58-encoded multihash format. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Hash": "<string>"
    "NumLinks": "<int>"
    "BlockSize": "<int>"
    "LinksSize": "<int>"
    "DataSize": "<int>"
    "CumulativeSize": "<int>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/object/stat?arg=<key>"`

***

### /api/v0/p2p/listener/close

Close active p2p listener.


#### Arguments

  - `arg` [string]: P2P listener protocol Required: no.
  - `all` [bool]: Close all listeners. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/p2p/listener/close?arg=<Protocol>&all=<value>"`

***

### /api/v0/p2p/listener/ls

List active p2p listeners.


#### Arguments

  - `headers` [bool]: Print table headers (HandlerID, Protocol, Local, Remote). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Listeners": [
        {
            "Protocol": "<string>"
            "Address": "<string>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/p2p/listener/ls?headers=<value>"`

***

### /api/v0/p2p/listener/open

Forward p2p connections to a network multiaddr.


#### Arguments

  - `arg` [string]: Protocol identifier. Required: **yes**.
  - `arg` [string]: Request handling application address. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/p2p/listener/open?arg=<Protocol>&arg=<Address>"`

***

### /api/v0/p2p/stream/close

Close active p2p stream.


#### Arguments

  - `arg` [string]: Stream HandlerID Required: no.
  - `all` [bool]: Close all streams. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/p2p/stream/close?arg=<HandlerID>&all=<value>"`

***

### /api/v0/p2p/stream/dial

Dial to a p2p listener.


#### Arguments

  - `arg` [string]: Remote peer to connect to Required: **yes**.
  - `arg` [string]: Protocol identifier. Required: **yes**.
  - `arg` [string]: Address to listen for connection/s (default: /ip4/127.0.0.1/tcp/0). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/p2p/stream/dial?arg=<Peer>&arg=<Protocol>&arg=<BindAddress>"`

***

### /api/v0/p2p/stream/ls

List active p2p streams.


#### Arguments

  - `headers` [bool]: Print table headers (HagndlerID, Protocol, Local, Remote). Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Streams": [
        {
            "HandlerID": "<string>"
            "Protocol": "<string>"
            "LocalPeer": "<string>"
            "LocalAddress": "<string>"
            "RemotePeer": "<string>"
            "RemoteAddress": "<string>"
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/p2p/stream/ls?headers=<value>"`

***

### /api/v0/pin/add

Pin objects to local storage.


#### Arguments

  - `arg` [string]: Path to object(s) to be pinned. Required: **yes**.
  - `recursive` [bool]: Recursively pin the object linked to by the specified object(s). Default: "true". Required: no.
  - `progress` [bool]: Show progress. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Pins": [
        "<string>"
    ]
    "Progress": "<int>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pin/add?arg=<ipfs-path>&recursive=true&progress=<value>"`

***

### /api/v0/pin/ls

List objects pinned to local storage.


#### Arguments

  - `arg` [string]: Path to object(s) to be listed. Required: no.
  - `type` [string]: The type of pinned keys to list. Can be "direct", "indirect", "recursive", or "all". Default: "all". Required: no.
  - `quiet` [bool]: Write just hashes of objects. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Keys": {
        "<string>": {
            "Type": "<string>"
        }
    }
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pin/ls?arg=<ipfs-path>&type=all&quiet=<value>"`

***

### /api/v0/pin/rm

Remove pinned objects from local storage.


#### Arguments

  - `arg` [string]: Path to object(s) to be unpinned. Required: **yes**.
  - `recursive` [bool]: Recursively unpin the object linked to by the specified object(s). Default: "true". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Pins": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pin/rm?arg=<ipfs-path>&recursive=true"`

***

### /api/v0/pin/update

Update a recursive pin


#### Arguments

  - `arg` [string]: Path to old object. Required: **yes**.
  - `arg` [string]: Path to new object to be pinned. Required: **yes**.
  - `unpin` [bool]: Remove the old pin. Default: "true". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Pins": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pin/update?arg=<from-path>&arg=<to-path>&unpin=true"`

***

### /api/v0/pin/verify

Verify that recursive pins are complete.


#### Arguments

  - `verbose` [bool]: Also write the hashes of non-broken pins. Required: no.
  - `quiet` [bool]: Write just hashes of broken pins. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Cid": "<string>"
    "PinStatus": {
        "Ok": "<bool>"
        "BadNodes": [
            {
                "Cid": "<string>"
                "Err": "<string>"
            }
        ]
    }
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pin/verify?verbose=<value>&quiet=<value>"`

***

### /api/v0/ping

Send echo request packets to IPFS hosts.


#### Arguments

  - `arg` [string]: ID of peer to be pinged. Required: **yes**.
  - `count` [int]: Number of ping messages to send. Default: "10". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Success": "<bool>"
    "Time": "<int64>"
    "Text": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/ping?arg=<peer ID>&count=10"`

***

### /api/v0/pubsub/ls

List subscribed topics by name.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pubsub/ls"`

***

### /api/v0/pubsub/peers

List peers we are currently pubsubbing with.


#### Arguments

  - `arg` [string]: topic to list connected peers of Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pubsub/peers?arg=<topic>"`

***

### /api/v0/pubsub/pub

Publish a message to a given pubsub topic.


#### Arguments

  - `arg` [string]: Topic to publish to. Required: **yes**.
  - `arg` [string]: Payload of message to publish. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/pubsub/pub?arg=<topic>&arg=<data>"`

***

### /api/v0/pubsub/sub

Subscribe to messages on a given topic.


#### Arguments

  - `arg` [string]: String name of topic to subscribe to. Required: **yes**.
  - `discover` [bool]: try to discover other peers subscribed to the same topic. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Message": {
        "From": [
            "<uint8>"
        ]
        "Data": [
            "<uint8>"
        ]
        "Seqno": [
            "<uint8>"
        ]
        "TopicIDs": [
            "<string>"
        ]
        "XXX_unrecognized": [
            "<uint8>"
        ]
    }
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/pubsub/sub?arg=<topic>&discover=<value>"`

***

### /api/v0/refs/local

List all local references.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Ref": "<string>"
    "Err": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/refs/local"`

***

### /api/v0/repo/fsck

Remove repo lockfiles.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Message": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/repo/fsck"`

***

### /api/v0/repo/gc

Perform a garbage collection sweep on the repo.


#### Arguments

  - `stream-errors` [bool]: Stream errors. Required: no.
  - `quiet` [bool]: Write minimal output. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Key": "<string>"
    "Error": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/repo/gc?stream-errors=<value>&quiet=<value>"`

***

### /api/v0/repo/stat

Get stats for the currently used repo.


#### Arguments

  - `human` [bool]: Output RepoSize in MiB. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "NumObjects": "<uint64>"
    "RepoSize": "<uint64>"
    "RepoPath": "<string>"
    "Version": "<string>"
    "StorageMax": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/repo/stat?human=<value>"`

***

### /api/v0/repo/verify

Verify all blocks in repo are not corrupted.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Msg": "<string>"
    "Progress": "<int>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/repo/verify"`

***

### /api/v0/repo/version

Show the repo version.


#### Arguments

  - `quiet` [bool]: Write minimal output. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Version": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/repo/version?quiet=<value>"`

***

### /api/v0/resolve

Resolve the value of names to IPFS.


#### Arguments

  - `arg` [string]: The name to resolve. Required: **yes**.
  - `recursive` [bool]: Resolve until the result is an IPFS name. Required: no.
  - `dht-record-count` [uint]: Number of records to request for DHT resolution. Required: no.
  - `dht-timeout` [string]: Max time to collect values during DHT resolution eg "30s". Pass 0 for no timeout. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Path": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/resolve?arg=<name>&recursive=<value>&dht-record-count=<value>&dht-timeout=<value>"`

***

### /api/v0/shutdown

Shut down the ipfs daemon


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/shutdown"`

***

### /api/v0/stats/bitswap

Show some diagnostic information on the bitswap agent.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "ProvideBufLen": "<int>"
    "Wantlist": [
        "<string>"
    ]
    "Peers": [
        "<string>"
    ]
    "BlocksReceived": "<uint64>"
    "DataReceived": "<uint64>"
    "BlocksSent": "<uint64>"
    "DataSent": "<uint64>"
    "DupBlksReceived": "<uint64>"
    "DupDataReceived": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/stats/bitswap"`

***

### /api/v0/stats/bw

Print ipfs bandwidth information.


#### Arguments

  - `peer` [string]: Specify a peer to print bandwidth for. Required: no.
  - `proto` [string]: Specify a protocol to print bandwidth for. Required: no.
  - `poll` [bool]: Print bandwidth at an interval. Required: no.
  - `interval` [string]: Time interval to wait between updating output, if 'poll' is true.

    This accepts durations such as "300s", "1.5h" or "2h45m". Valid time units are:
    "ns", "us" (or "Âµs"), "ms", "s", "m", "h". Default: "1s". Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "TotalIn": "<int64>"
    "TotalOut": "<int64>"
    "RateIn": "<float64>"
    "RateOut": "<float64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/stats/bw?peer=<value>&proto=<value>&poll=<value>&interval=1s"`

***

### /api/v0/stats/repo

Get stats for the currently used repo.


#### Arguments

  - `human` [bool]: Output RepoSize in MiB. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "NumObjects": "<uint64>"
    "RepoSize": "<uint64>"
    "RepoPath": "<string>"
    "Version": "<string>"
    "StorageMax": "<uint64>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/stats/repo?human=<value>"`

***

### /api/v0/swarm/addrs/listen

List interface listening addresses.


#### Arguments

This endpoint takes no arguments.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/addrs/listen"`

***

### /api/v0/swarm/addrs/local

List local addresses.


#### Arguments

  - `id` [bool]: Show peer ID in addresses. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/addrs/local?id=<value>"`

***

### /api/v0/swarm/connect

Open connection to a given address.


#### Arguments

  - `arg` [string]: Address of peer to connect to. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/connect?arg=<address>"`

***

### /api/v0/swarm/disconnect

Close connection to a given address.


#### Arguments

  - `arg` [string]: Address of peer to disconnect from. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/disconnect?arg=<address>"`

***

### /api/v0/swarm/filters/add

Add an address filter.


#### Arguments

  - `arg` [string]: Multiaddr to filter. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/filters/add?arg=<address>"`

***

### /api/v0/swarm/filters/rm

Remove an address filter.


#### Arguments

  - `arg` [string]: Multiaddr filter to remove. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Strings": [
        "<string>"
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/filters/rm?arg=<address>"`

***

### /api/v0/swarm/peers

List peers with open connections.


#### Arguments

  - `verbose` [bool]: display all extra information. Required: no.
  - `streams` [bool]: Also list information about open streams for each peer. Required: no.
  - `latency` [bool]: Also list information about latency to each peer. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Peers": [
        {
            "Addr": "<string>"
            "Peer": "<string>"
            "Latency": "<string>"
            "Muxer": "<string>"
            "Streams": [
                {
                    "Protocol": "<string>"
                }
            ]
        }
    ]
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/swarm/peers?verbose=<value>&streams=<value>&latency=<value>"`

***

### /api/v0/tar/add

Import a tar file into ipfs.


#### Arguments

  - `arg` [file]: Tar file to add. Required: **yes**.


#### Request Body

Argument "file" is of file type. This endpoint expects a file in the body of the request as 'multipart/form-data'.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Name": "<string>"
    "Hash": "<string>"
    "Bytes": "<int64>"
    "Size": "<string>"
}

```

#### cURL Example

`curl -F file=@myfile "http://localhost:5001/api/v0/tar/add"`

***

### /api/v0/tar/cat

Export a tar file from IPFS.


#### Arguments

  - `arg` [string]: ipfs path of archive to export. Required: **yes**.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/tar/cat?arg=<path>"`

***

### /api/v0/update




#### Arguments

  - `arg` [string]: Arguments for subcommand. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
This endpoint returns a `text/plain` response body.
```

#### cURL Example

`curl "http://localhost:5001/api/v0/update?arg=<args>"`

***

### /api/v0/version

Show ipfs version information.


#### Arguments

  - `number` [bool]: Only show the version number. Required: no.
  - `commit` [bool]: Show the commit hash. Required: no.
  - `repo` [bool]: Show repo version. Required: no.
  - `all` [bool]: Show all version information. Required: no.


#### Response

On success, the call to this endpoint will return with 200 and the following body:

```text
{
    "Version": "<string>"
    "Commit": "<string>"
    "Repo": "<string>"
    "System": "<string>"
    "Golang": "<string>"
}

```

#### cURL Example

`curl "http://localhost:5001/api/v0/version?number=<value>&commit=<value>&repo=<value>&all=<value>"`

***

![img](https://gguoss.github.io/img/orchildprotocol.png)

### æè¦

äºèç½çé£éåå±ï¼ è¶æ¥è¶å¤çæ¹æ³åéå¾å¯ä»¥å¾ææçå¿«éåç°åæ¥æ¾ä¸ªäººåç»ç»çéç§ï¼ å æ­¤ï¼ å¤§ä¼å¯¹å¿ååä¿æ¤éç§çéæ±è¶æ¥è¶è¿«åã è½ç¶ç°å¨æäºæ¹æ³(å¦I2Påæ´è±ç½ç»)è¢«å¹¿æ³éç¨ï¼ä½æ¯è¿äºç½ç»åªæå ååå¿æ¿èæ¿æå å¥ä¸­ç»§ååºå£èç¹ï¼ è¿æ ·ä¼å¯¼è´æ»å»èå¯ä»¥ç¨å¾å°æ°éçèç¹è½»æççè§æ´ä¸ªå å¯ç½ç»ãæä»¬æåºåºäºå¸åºçâå¸¦å®½æç¿âçæ¹æ³ï¼ æ¥æ¿å±å¤§å®¶å å¥ä¸­ç»§ååºå£èç¹ã
æ¬ææ¨å¨æè¿°ä¸ä¸ªä¸ç´å¨å¼åçç³»ç»ãå æ­¤ä¼å®æ¶çæ´æ°è¯¥æåå®¹ï¼ç¨ä»¥æè¿°å¨å®æ½å½ä¸­éå°é®é¢èå¯¹ç³»ç»çè°æ´ï¼ å¹¶ä¸è¯¥ç³»ç»å¯ä»¥çµæ´»çä½¿ç¨åºç»ä»¶åç¹å®çå å¯ç®æ³ãç¶èï¼ ä¸ç®¡ææ ·è°æ´ç³»ç»ï¼ç³»ç»çæ¬è´¨ä¼ä¿æç®æ åç®çä¸åã
æä»¬çè®¾è®¡åå®¹åæ¬ï¼

- åºäºåºåé¾(å·æé¡ºåºæåäº¤æçæ°æ®)çéæºæ¯ä»æºå¶
- å¸¦å®½éå®è§æ ¼çååè¯´æä¹¦
- å½çº³è¯æä¸ä¸ªå¨å¯¹ç­åå¸å¼ç³»ç»ä¸­ä½¿å¾Eclipseæ»å»éå¸¸å°é¾çæ¹æ³
- å¨æ»å»èå¯è½ä¼å°å¶åºä»·ä½ä¸ºæ»å»çä¸é¨åçæåµä¸ï¼éç¨äºéå®å¸¦å®½çé«æå®å¨ç¡¬åæåæºå¶
- å®å¨åå¸å¼çå¿åå¸¦å®½å¸åº

### 1. ä»ç»

å°è±åè®®å°å¸¦å®½åå®¶ç»ç»æä¸ä¸ªåæ§ç»æåçå¯¹ç­ï¼P2Pï¼ç½ç»ï¼ç§°ä¸ºå°è±å¸åºãå®¢æ·è¿æ¥å°å°è±å¸åºï¼å¹¶åå¤ä¸ªå¸¦å®½åå®¶åæ¯ä»ï¼å½¢æç¹å®ç½ç»æå¡å¨çä»£çé¾ã ä»£çé¾åè®¸å®¢æ·ä»å¨çäºèç½åéåæ¥æ¶æ°æ®ã
![img](https://gguoss.github.io/img/Orchid_connect.png)
ä¸ä»å¨çäºèç½åéåæ¥æ¶æ°æ®çæ´å¸¸è§çæ¹æ³ä¸åï¼å°è±å¸åºä¸­çä»£çé¾èªç¶å°å°å³äºæ°æ®çæ¥æºåç®çä¿¡æ¯åç¦»;æ²¡æä¸ä¸ªä¸­ç»§æä»£çåæ¶ææä¸¤æ¡ä¿¡æ¯ï¼æèç¥éæäººçèº«ä»½ãå°è±å¸åºçåæ§ç»æè¿ä¸æ­¥æ¯æä¿¡æ¯åç¦»ï¼æä¾å¼ºå¤§çæµæä¸²éæ»å»çè½å â ä¸ç»å¸¦å®½åå®¶åæç¥è¯åç¦»çè½åãä¸åäºäºèç½æ°æ®å¸¸ç¨çä¼ è¾æ¹æ³ï¼å°è±å¸åºæä¾åºå®éçä¸­ç»§ï¼ä»¥é²æ­¢æµéåæï¼å¹¶éè¿ä»£å¸æ¿å±å¤§å®¶åç°æ£ä¸¾éèæèä¿¡æ¯æ å³çåä¸çåä¸èç¹ãå¨æä»¬æè¿°ç³»ç»çç»èä¹åï¼æä»¬å°ç®è¦åé¡¾ä¸ä¸è§£å³çæ ¸å¿é®é¢ï¼ä»¥åæä»¬ä¸ºç³»ç»åºç¡éæ©çä¸è¬è§£å³æ¹æ¡ã

#### 1.1. ä¿¡æ¯å å¯ä¼ éé®é¢

**é®é¢éè¿°**ï¼æ³è±¡ä¸ä¸ï¼ä½ å¨ä¸ä¸ªåæ»¡æ°å­¦å®¶çé£å éï¼å¸æå¨æ²¡æä»»ä½äººç¥éè¿ä¸ªäºå®çæåµä¸ï¼åä½ çæååéæ¶æ¯ã æ¨å°æªéè¿æå®åè®®ä¼ éæ¶æ¯ï¼å æ­¤ææå®æ½ç»èé½å¿é¡»åææäººå¬å¼å£°æã å¯ä»¥æä¹åå¢ï¼
Chaumå¨1981å¹´æåºçè¿ä¸ªé®é¢çä¸ä¸ªç¹å«ä¼éçè§£å³æ¹æ¡æ¯è®©æ¯ä¸ªäººé½ä½ä¸ºä¸ä¸ªä¸­ç»§åä¸ä¸ªæ¥æ¶èã å¨è¿ä¸ªæ¹æ¡ä¸­ï¼åä¸èåå¤å å¯çæ¶æ¯ï¼å®ä»¬æ¯æ°å­ç­æçâåå«ä¿¡å°çä¿¡å°â - åAliceåéæ¶æ¯ï¼ä½ ä¼è®¡ç®

```
Enc(âT oBob 00 ||Enc(âT oAlice 00 ||Enc(message, Alice), Bob), Carol)
```

å¹¶å°è¯¥æ¶æ¯åéç»Carolï¼ä»ä»¬å°å¶è§£å¯å¹¶åéç»Bobï¼Bobå°å¶è§£å¯å¹¶åéç»Aliceã ä¸ºäºé²æ­¢æµéåæï¼æ¯ä¸ªå¨æé½ä¼åéåºå®æ°éçæ¶æ¯ã ä¸ºäºå¤çè¿åå°åï¼æä»¬å¯ä»¥è®©BobåCarolè®°ä½ä¸ä¸ªå¯ä¸çæ¶æ¯æ è¯ç¬¦ï¼ç¶åæ²¿çè¿ä¸æ¡é¾è·¯åéæ¶æ¯ã
å¯¹ä½¿ç¨ä¸è¿°æ¹æ³çç³»ç»ç¹å«éè¦çæ¯å±è°çå¯è½æ§ã å¦æBobåCarolåä½ï¼ä»ä»¬å¯è½ä¼å³å®è°åéç»å®çæ¶æ¯ä»¥ååéç»è°çæ¶æ¯ã

#### 1.2. å¥³å·«é®é¢

ä¸è¿°é£å é®é¢éè¿°ä½¿ç¨æ¯ä¸ªäººæ¬èº«æ¥é²æ­¢å¥³å·«æ»å» - ä¸ä¸ªåä¸èå¯è½åè£æ¯ä»»æå¤§éçç¨æ·çæåµã ä¸å¹¸çæ¯ï¼å¨æ°å­ç³»ç»ä¸­ï¼è¿ç§æ¹æ³æ¯ä¸è½ä½¿ç¨çã
**é®é¢éè¿°**ï¼æä»¬å¦ä½ç¥éæäººå¨çº¯æ°å­ç¯å¢ä¸­æ¯âçå®çâï¼
è¿ä¸ªé®é¢çè§£å³æ¹æ¡å¯ä»¥å¨Hashcash [81]ä¸­æ¾å°ãå¦ææä»¬è¦æ±å£°ç§°æ¯âçå®çâæ¥æ¶èè®¡ç®èµæºçè¯ï¼é£ä¹æä»¬å¯ä»¥æå¥³å·«æ»å»èç½®äºåªææ¥æä¸å¯æè®®çè®¡ç®èµæºææè½åæ»å»çä½ç½®ã

#### 1.3. éæºéæ©é®é¢

ä¸è¿°é£å é®é¢éè¿°åå®äºä¸ç§åç³»ç»çæ¯ä¸ªå¶ä»ç¨æ·åéæ¶æ¯çç®åæ¹æ³ï¼ä¾å¦ï¼æ¨ªè·¨èªå©é¤åï¼ãä¸ºäºå®ç°æå¤§éåº¦å°æµæâå±è°æ»å»âçChaumianç»åï¼æä»¬éè¦è½å¤ä»é£äºâçå®âçä¸­ç»§èç¹ä¸­éæºéæ©ãæ è®ºä½æ¶å å¥æç¦»å¼ç½ç»ï¼é½éè¦æ¶å°éç¥ãä¸å¹¸çæ¯ï¼å¨ç°å®ä¸ççP2Pç½ç»ä¸­ï¼æ¯ä¸ªç¨æ·ç»´æ¤è¿æ ·çåè¡¨å°å¯¼è´ä¸å¯æ¥åçç½ç»æµéï¼Oï¼n 2ï¼éç¥ï¼ã
**é®é¢æè¿°** ï¼æä»¬å¦ä½ç»´æ¤ææå½åâçå®âä¸­ç»§èç¹çåå¸å¼åè¡¨ï¼ä»¥æå¤§éåº¦å°åå°ç½ç»å¼éï¼å¹¶æ¯æé«æççéæºéæ©å¯¹ç­ä½ï¼
Chord [81]åå¸å¼åå¸è¡¨ï¼DHTï¼ä¸­å¯ä»¥æ¾å°ä¸ä¸ªç¹å«ä¼éçè§£å³æ¹æ¡ã å¨è¯¥æ¹æ¡ä¸­ï¼å¯¹ç­ä½å¨å¤§ç©ºé´ä¸­åéå¯ä¸çå°åï¼ç¶åä»¥å¨Oï¼logï¼nï¼ï¼æ¶é´åæ§è¡æ¥æ¾çæ¹å¼è¿æ¥ã æ·»å æå é¤ç¨æ·åªéè¦éç¥Oï¼logï¼nï¼ï¼å¯¹ç­ä½ã

#### 1.4. ç³»ç»æ»è§

âå°è±åè®®âçæ ¸å¿æ¯ä¸è¿°è§£å³æ¹æ¡çç»åãå¨æä»¬çæ¹æ³ä¸­ï¼åè¡ä»¬éè¦å¶ä½å¥ç« æ¥è¯æä»ä»¬çâçå®æ§âï¼ç¶åè¢«ç»ç»æä¸ä¸ªç§°ä¸ºå°è±å¸åºçåå¸å¼P2Pç½ç»ãä¸ºäºä¿æå°è±å¸åºçåä¸èè¯å®ï¼æ¯ä¸ªåè¡é½ä¼æ£æ¥å¶é»å±è¡ä¸ºçæ­£ç¡®æ§ãå®¢æ·ç¶åä½¿ç¨å°è±å¸åºä¸ºChaumianæ¶æ¯è½¬åéæ©éæºå¯¹ç­ä½ãä¸ºäºæ¿å±åä¸ï¼æä»¬çå®¢æ·ä»¥æ¯è½¬åå­èä¸ºåä½åä¸­ç»§èç¹æ¯ä»æ¥é¬ã
è¿æ³æ³è½ç¶ç®åï¼ä½ä¾ç¶éè¦é­é¬¼çç»èãç³»ç»è¦å®å¨åæ£ï¼å®å¨èªä¸»ï¼å®å¨å¿åï¼å¹¶ä¸è½åéèäº¤æãå æ­¤ï¼æ¬è®¾è®¡æä»¶çå¤§é¨ååå®¹éä¸­å¨é²æ­¢å¯¹å®¢æ·å®å¨ï¼ç³»ç»æ§è½åç³»ç»ç»æµæ§çæ»å»ç¨³å¥ãè½ç¶æ»å»åææ¯éè¦çï¼å¹¶ä¸å°å ç¨æä»¬å¤§é¨åæ¶é´ï¼ä½æç»åªä¸è¿æ¯å¸åºè¿è¡èæ¯ä¸çå¿è¦æ¡ä»¶; å¦æä½ åç°èªå·±âè¿·å¤±å¨æ£®æéâï¼æä»¬å¸æä½ å°ä½¿ç¨åé¢çæ»è§ä½ä¸ºä½ çåææ - ç³»ç»çè®¾è®¡ç»èé½æ¯ä¸ºäºå®ç°ä¸è¿°ä¸ä¸ªé®é¢ççå®è§£å³æ¹æ¡ã

### 2. æ»å»

æ¬æçå¤§é¨ååå®¹é½æ¯éå¯¹æ»å»é¢é²ï¼æä»¬é¦ååé¡¾ä¸ä¸å³äºè¿äºæ»å»çæç®å¯¹P2Pç½ç»å°¤å¶å¸¸è§ã

#### 2.1. æ»å»ç®æ 

2.1.1. ä¿¡æ¯æ¶é
å°è±åè®®å¿é¡»ä¿å«çæå¤§çæ»å»ç±»åæ¯ æ­ç¤ºæå³å¶ç¨æ·çä¿¡æ¯ãå ä¸ºå°è±è¢«å®ç°ä¸ºç°æäºèç½ä¸çå å å±ï¼ä¸äºä¿¡æ¯ä¸å¯é¿åå°ä¸ä¸äºåè¡å±äº«ã å¨ä¸é¢çåè¡¨ä¸­ï¼è¿æ ·çä¿¡æ¯è¢«æ è®°ä¸ºâ*âãä»»ä½æªè¢«æç¡®ååºçä¿¡æ¯å¨æ¬ææ¡£ä¸­ä¸å¯é¿åå°å±äº«ï¼ä½æ¯åç°äºä¸ç§æ¹æ³æ¥åç°ä¿¡æ¯è¢«ç§°ä¸ºä¿¡æ¯æ»å»ï¼å¹¶è¢«OrchidçWhite Hat Bug Bountyæè¦çãæå³å±äº«åå®¹çæ´å¤ä¿¡æ¯ï¼è¯·åè§ç¬¬8èä¸­çåè®®è§èåç¬¬9.2èä¸­çä¸²éè®¨è®ºä»¥åç½ç»åèå®ç°[1]ã
è¢«è®¤ä¸ºæ¯æ»å»èæå´è¶£çæ°æ®çç±»åï¼æ°¸æçï¼ï¼

- ç°å®ä¸ççèº«ä»½ä¿¡æ¯ã å¦ç¨æ·çå§åï¼ SSNï¼ å°åç­ã

- ç½ç«å¸æ·ä¿¡æ¯ãç¨æ·å¸æ·å¨ç¹å®çç½ç«ã æ³¨æè¿å¯ä»¥æ¥æ¾ä¸åç°å®ä¸çèº«ä»½ä¿¡æ¯ã

- *IPä¿¡æ¯ã ç¨æ·è®¿é®å°è±ç½ç»çIPå°åã è¯·æ³¨æï¼å¨æäºä½¿ç¨åºæ¯ä¸­ï¼è¿å¯è½ç­åäºç¥éâçå®ä¸çèº«ä»½ä¿¡æ¯âã

- *ethereumä¿¡æ¯ã ä¸ç¨æ·é±åç¸å³èç*å¬é¥åç§é¥ã è¯·æ³¨æï¼å¨æäºä½¿ç¨åºæ¯ä¸­ï¼è¿å¯è½ç­åäºç¥éâçå®ä¸çèº«ä»½ä¿¡æ¯âã

- *å°è±ç½ç»ä¿¡æ¯ã ä¸å°è±ç½ç»ä¸çèç¹å½åä¸å¡ç¸å³èçå¯é¥ï¼*å¬é¥æç§é¥ï¼ã
  è¢«è®¤ä¸ºæ¯æ»å»èæå´è¶£çè¡ä¸ºä¿¡æ¯çç±»åï¼æ¶é´åé¾ç¸å³èæ°æ®ï¼ï¼

- *å®¢æ·è¯å«ã æ»å»èæ¢æå®¢æ·çIPå°åã

- *ä¸­ç»§è¯å«ã æ»å»èæ¢æä¸­ç»§çIPå°åã

- *ä»£çè¯å«ã æ»å»èæ¢æä»£ççIPå°åã

- *é¾æ¥è¯å«ã æ»å»èæ¢æå°å¨é¾ä¸­ä½¿ç¨äºä¸¤ä¸ªIPå°åã

- *ç½ç«è®¿é®ã æ»å»èæ¢æå°å°è±ç½ç»è¿è¡äºoutboundè¿æ¥å°ä¸ä¸ªç¹å®çç½ç«ã

- *Webæå¡å¨è®¿é®ãæ»å»èäºè§£å°ï¼ä»å°è±ç½ç»å°ç¹å®çç½ç»æå¡å¨ï¼å¯è½ä¼æç®¡å¤ä¸ªç½ç«ï¼è¿è¡äºåºç«è¿æ¥ã

- *ä»¥å¤ªåèç³»ã æ»å»èäºè§£å°ï¼ä¸ä¸ªå°è±ç¨æ·ææä¸ä¸ªEthereumå¬é¥ã

- *è´­ä¹°èç³»ã æ»å»èäºè§£å°ä¸¤ä¸ªäº¤æå±äº«ä¸ä¸ªä»æ¬¾äººã

- *è´­ä¹°ä¿¡æ¯ã æ»å»èäºè§£éè¿é¾åéçå¸¦å®½çæ°éåæ¶é´ã

  â

  å°½ç®¡ä¸è¿°è¡ä¸ºä¿¡æ¯å¨æ­£å¸¸æä½æé´ä¸å°è±ç½ç»ä¸çå¶ä»èç¹å±äº«ï¼å¦ä¸æè¿°ï¼å¨å¤§å¤æ°æåµä¸ï¼åè®¾ç¨æ·åªæå¨è¡ä¸ºä¿¡æ¯æ¶éæ¶æä¼åå°ç´æ¥çä¼¤å®³ï¼å¦ææ»å»èå¯ä»¥å¿«éæ¢æå æ¡ä¿¡æ¯ãä¾å¦ï¼è¦è¯´ç¨æ·Xè®¿é®äºç½ç«Yï¼æ»å»èå°éè¦ï¼ä¹°æ¹è¯å«ï¼ç½ç«è®¿é®ä¿¡æ¯åå æ¡é¾æ¥æ è¯ã å æ­¤ï¼éµå¾ªåèè§æ ¼çåè¡ä¸ä¼å­å¨æå±äº«ä¸è¿°ä»»ä½ä¿¡æ¯ï¼é¤éæä¾å®¢æ·è´­ä¹°çæå¡æéã

  #### 2.2. ç»æµæ»å»

  ä¸ç¸å³ç³»ç»ä¸åï¼ å°è±åè®®å¿é¡»å³å¿æ¯ä»æºå¶çæ»å»ãæ¬æå½çº³ä¸¤å¤§ç±»å¦ä¸ï¼

  â

  -1. ç»æµå©çã æå©çä¸è¯è¡ä¸ºï¼ä¾å¦ç¨æ·æä¾âåè´¹æ ·åâå¸¦å®½ï¼åè®¸ç¨æ·ä¸é¨ä½¿ç¨åè´¹æ ·åå¸¦å®½ã

  â

  -2. ç»æµæç»æå¡ï¼EDoSï¼ã ä½¿ç¨ä»æ¬¾æ¥æ·¹æ²¡å°è±ç½ç»ä¸çå¦ä¸ä¸ªèç¹è¿è¡è´­ä¹°ï¼ä»èä½¿å¶è±æºã

  #### 2.3. æå¡è´¨éæ»å»

  ä¸äºå¯¹æå¯è½ä¼éè¿æ¾æ¢å°è±ç½ç»ç¨æ·çç³»ç»æ§è½æ¥æ»¡è¶³ï¼ä»èæ½å¨å°åå°ä½¿ç¨ã

  #### 2.4. ä¸­é´äººæ»å»

  åªæå¨ä¸¤ä¸ªäºå¨æ¹ä¹é´æå¥èªå·±æè½æ§è¡çæä½ç»ç§°ä¸ºä¸­é´äººæ»å»ãå¯ä»¥è®°å½å å¯çä¿¡æ¯ç¨äºåæåæ°æ®ï¼ç¬¬2.8èï¼ï¼èéå å¯æ°æ®å¯è½å¦å¤è¢«æ´æ¹ä¸ºæ§å¶è¡ä¸ºãå¦æå¯é¥äº¤æ¢æ²¡æå¾å°ä¿éï¼ä¸­é´äººä¹å¯è½ä¼æ¬ºéªåæ¹ä½¿å¶éè¯¯å°è®¤ä¸ºæ»å»èçå¯é¥æ¯å¯¹æ¹çå¯é¥ã

  #### 2.5. å¥³å·«æ»å»

  ä¼ªè£æå¤ä¸ªç¨æ·æ§è¡æ¶æè¡ä¸ºç§°ä¸ºSybilæ»å»ï¼ä½¿è¢«æ»å»èæ¿åå¤æ¹ä¼ªè£ç¨æ·çååæ°æ®ãè¿ç§æ»å»çåºç¨åæ¬ï¼

- åYelp, Amazon ç­å¹³å°æä¾å¤ä¸ªreviewsã

- éè¿åè£æ¯å¤ä¸ªå¾å¬èæ¥å®ç°BitTorrentä»èå¯ä»¥å¿«éä¸è½½[72]ã

  #### 2.6. æ¥èæ»å»

  å¨æ¥èæ»å»ä¸­ï¼æ»å»èçç®æ æ¯éèç³»ç»çä¸é¨åã éç¨çæ¹æ³æ¯ä¸è¬ç½ç»ç¸å½äºç¹æåçº§æ»å»ï¼è·å¾ç½ç»ä½ç½®çæ§å¶ææ´å¤å°æ§å¶ç½ç»ï¼ç¶åä½¿ç¨è¯¥æ§å¶æ¥è·åæ´å¤çæ§å¶æã

- æ¯ç¹å¸çp2pï¼ææèç¹é½æ¯å¹³ç­å°ä½ï¼ç«¯å£æ°æ¯æéå¶çï¼éè¦â51%âæ»å»çæ¯ç¹å¸ç½ç»æä¸´è¿èç¹çç«¯å£æ°å¨è¢«æ»å»èç»å ç¨ï¼ä»¥è´ç¨å°äº51%çç®åéè¿æ¬ºéªä¸´è¿èç¹å å¥èªå·±çç½ç»ï¼å¯¹æ¯ç¹å¸å½¢æâ51%âæ»å»ã

- éè¿æ¥ç®¡ä¸ç£é¾æ¥ç¸å³èçå°åç©ºé´ï¼ä»BitTorrent DHTä¸­å é¤æä»¶[83]ã

  #### 2.7. æç»æå¡æ»å»

  æç»æå¡æ»å»å³æ¯æ»å»èæ³åæ³è®©ç®æ æºå¨åæ­¢æä¾æå¡ã âæå¤âæåµä¸çç³»ç»è¡ä¸ºéå¸¸æå®åæµè¯ä¸è¶³ã DoSæ»å»å¯¹P2Pç½ç»ä¸­çèç¹è¿è¡å»å¿ååæ¯éå¸¸æç¨çã

- å¯¹ç¹å®ç®æ DoSæ»å»ç»åå¥³å·«æ»å»æ¥çæµTorçæµéä»èè·æå¿ååçä¿¡æ¯[53]ã

- åªéè¦20ä¸ªå¥³å·«èç¹ï¼Doså°±è½ å®å¨å¯ä»¥æ³æ»¥å¼æ»å»I2Pçæ°æ®åºä½¿å¶è±æºï¼ä»èå¯¹ç½ç»ä¸çæææµéè¿è¡å½æ¡£ã

  #### 2.8. æ¨çæ»å»

  æºäºç³»ç»è¡ä¸ºçç»è®¡å»ºæ¨¡çå»å¿ååè¢«ç§°ä¸ºæ¨çæ»å»æçè§æ»å»ãè¿äºéå¸¸ä¸ç²¾å¿å¶ä½æå®æ¶çâæ¢æµå¨ä½âç¸ç»åè¯·æ±æå¶ä»æ»å»ï¼ä¾å¦DoSå°ç¹å®å¯¹ç­ä½è±ç¦»ç½ç»å¹¶è§å¯æµéæ¨¡å¼

  â

  ååºã

- ä»SSLå å¯çWebæµéæ¨æ­å»çç¾çãå®¶åº­æ¶å¥åæç»ç¨æ·çæèµéæ©[ 58 ]ã

- æ¥èªå¨çä¼ è¾æ¥å¿çTorï¼I2Påå°è±æµéçåæå»é¤å¿å[60]ã

- éè¿æ¶åºåæå­¦ä¹ OpenSSLæå¡å¨çç§é¥[55]ã

  #### 2.9. é»å®¢

  éè¿å°åå²ä¸å¯ä¿¡èµçå¯¹ç­ä½è½¬æ¢ä¸ºæ»å»åéï¼æ¿å±çæ»å»èå¯è½ä¼ç´æ¥å±åç½ç»ä¸çèç¹ãå½ä½¿ç¨é¾é¨ç½²å¸¦å®½æ¶ï¼è¿­ä»£é»å®¢å¯è½æç»åè®¸æ»å»èâåæº¯âè¿æ¥ãè¿ç§æ»å»å·æéè¦çå®å¨éæ£ï¼ä½ä¸ç¬¦åå°è±ç½ç»çèå´ã å¦æå°è±ç½çè®¾è®¡è¾¾å°ç®æ ï¼è¿å°æ¯å¯¹ç³»ç»ç¨æ·çä¸»è¦æ»å»ã

  ### 3. å¯æ¿ä»£çæ¹æ³

  #### 3.1. ä¸åä¿æ¤çäºèç½è®¿é®

  å¨æ²¡æä¿æ¤çæåµä¸è®¿é®äºèç½çç¨æ·å°å¶å®æ´çæµè§åå²è®°å½åç½ç«ä½¿ç¨æåµæä¾ç»ISPï¼ç¶åä»ä»¬å¯ä»¥å±äº«æåºå®è¯¥æ°æ®ã

  #### 3.2. èæä¸ç¨ç½ç»ï¼VPNï¼æå¡

  èæä¸ç¨ç½ï¼VPNï¼ä½¿ç¨å å¯ææ¯å°VPNç¨æ·çæµéå®å¨å°ä¼ è¾å°æ´å¤§çä¸å®å¨ç½ç»ã ä¸æ¦VPNæ¥æ¶å°æµéï¼å®å°è¢«è§£å¯å¹¶éè¿ä¸åçå¤§åä¸å®å¨ç½ç»éæ°ä¼ è¾ã éä¼ å¯ä»¥å¸®å©ç¨æ·è§é¿ç½ç«çè®¿é®éå¶ï¼å¹¶å¨è¾å°çç¨åº¦ä¸åå°å¯¹ä»ä»¬ç½ç«æµè§ä¹ æ¯çè·è¸ªãå å¯é²æ­¢ç¨æ·çISPçå°ä»ä»¬çæµéï¼ä»èé²æ­¢çè§æ»å»ã è¿æ¯éè¿ä½¿VPNæä¸ºç¨æ·çæ°ISPæ¥å®ç°çã ä»¥åISPå¯ä»¥æ§è¡çä»»ä½æ»å»é½å¯ä»¥ç±VPNæä¾åè½»æ¾æ§è¡ã

  â

  VPNç¨æ·ä¸åºè¯¥è®¤ä¸ºä»ä»¬çVPNæä¾åæ¯å¼å¾ä¿¡èµçã å°½ç®¡VPNæå¡æä¾åé¢ä¸´æ¯ISPæ´å¤çç«äºï¼ä½ä»ä»¬æç»ä»ç¸åçæ¥æºè·å¾äººæï¼å¹¶ä¸å·æç±»ä¼¼çå¸¦å®½ - å¼ºå¶ååä¸æ¨¡å¼ã VPNæä¾åä¸å¯è½ä¸ä¼åå°å¯¼è´ç¨æ·ä¸ä¿¡ä»»ä»ä»¬çISPçåæ ·çæ¿å±ã å¦å¤ï¼å¨VPNè®¾ç½®ä¸­éå¤ä½¿ç¨IPå°åæ¥ä¸­ç»§æµéï¼å¯ä»¥ç¸å¯¹å®¹æå°é»æ­¢åä¸ç½ç«çä½¿ç¨[13]ã

  #### 3.3. TOR

  Tor [61]æ¯ä¸ä¸ªåè´¹è½¯ä»¶é¡¹ç®ï¼ä»¥åæ´å¹¿æ³çåä¼ä»ç»æ´è±è·¯ç±çææ³èé»åã å¨è¿ä¸ªç³»ç»ä¸­ï¼ç¨æ·ä¸è½½ä¸ä¸ªä¸­ç»§ååºå£èç¹çå¨å±åè¡¨ï¼éæºä»åè¡¨ä¸­éæ©ï¼å¹¶ä»ä»ä»¬çéæ©å½¢ææ´è±è·¯çº¿ã æ´è±è·¯çº¿æ¯ä¸­ç»§çæåºåè¡¨; ä¸ºæ¯ä¸ªå¯¹ç­ä½è½®æµåéçæ°æ®åä¾æ¬¡å å¯ï¼ç¡®ä¿æ¯ä¸ªèç¹é½å¿é¡»æ¶å°ä¸ä¸ªæ°æ®åæè½è¢«åºå£èç¹çè§£ãç»ææ¯ï¼é¤éæå¤ä¸ªèç¹è¢«åä¸ä¸ªç¨æ·å¥ä¾µæè¿è¡ï¼å¦åä¸¤ä¸ªä¸­ç»§é½ä¸ç¥éè°åéäºä¸ä¸ªæ°æ®åï¼ä¹ä¸ç¥éå®å°äºåªéã

  ### 4. æ©å±åº

  å°è±çåè½æ¯å»ºç«å¨å ä¸ªéè¦çç»ä»¶ä¸ã ç±äºä¸äºè¯»èå¯è½ä¸çæè¿äºåè¯­ï¼æèä¸çæå°è±ç½ç»ä¸­ä½¿ç¨çç¹å®å±æ§ï¼æä»¬å¨è¿éç®è¦æ»ç»ä¸ä¸ã

  #### 4.1. WEBRTC

  WebRTC [48]æ¯æåè®¾è®¡ç¨æ¥ä¿è¿Webæµè§å¨ä¹é´å®æ¶éä¿¡çç³»ç»ã å®æä¾äºä¼ç§çNATåé²ç«å¢ç©¿è¶æ¹æ³ï¼åæ¬STUNï¼ICEï¼TURNåRTP-over-TCPã éè¿éæ©WebRTCä½ä¸ºæä»¬ç½ç»åè®®çåºç¡ï¼èä¸æ¯å®å¶ç¼ç çTCPåUDPç½ç»ä»£ç ï¼æä»¬é½è·å¾äºè¿äºææ¯çä¸ççº§å®æ½ï¼å¹¶ä¸ï¼å¨ä¸å®ç¨åº¦ä¸ï¼å°ç¨æ·çæµéæ©çä¸ºä¸è¬çç½ç»æµéã

  #### 4.2. NACL

  NaCL [49]ï¼åé³ä¸ºâsaltâï¼æ¯Daniel J.Bernsteinç­äººçä¸ä¸ªå¯ç å­¦åºï¼ä¸æ³¨äºæå»ºæå»ºé«çº§å å¯å·¥å·æéçæ ¸å¿æä½ã å®è¢«éä¸ºè¿ä¸ªé¡¹ç®çå¯ç åè¯­çæ¥æºï¼å ä¸ºå®åå®çä½èçè±éå£°èªã ä¸é¢ä»ç»çææå å¯æä½é½æ¯ä½¿ç¨NaCLå®ç°çï¼é¤äºä»¥å¤ªåæºè½åçº¦å å¯ä»£ç ã

  #### 4.3. ä»¥å¤ªå

  ä»¥å¤ªå[56]æ¯ä¸ä¸ªåæ£çåºåé¾å¹³å°ï¼åæ¬ä¸ä¸ªæ¬å°è´§å¸ï¼ETHï¼åTuringcompleteæºè½åçº¦ã è¿äºæºè½åçº¦å¯¹äºOrchidçè®¾è®¡éå¸¸æç¨ï¼ä½¿æä»¬è½å¤åè½»ä¸è¿½è¸ªä»æ¬¾ä½é¢æå³çå¤§éè®¾è®¡é®é¢ï¼ä»¥åOrchidä»æ¬¾é¨ç¥¨çéªè¯åå¬æ­£æ§ã

  ### 5. å¥ç« 

  å®å¨åæ£çï¼å®å¿åçæ°å­ç³»ç»é­ååä¸ªæ¶æç¨æ·åè£æåä¸ä¸ç¨æ·ï¼Sybilæ»å»ï¼çæ»å»ã

  â

  ä¸ºäºæå»è¿ç±»æ»å»ï¼å°è±åè®®ä½¿ç¨å¥ç«  - æ°æ®è¡¨æç»å®çå¬é¥å¨ç»å®æ¶é´æ¥æç¸å½æ°éçè®¡ç®ã ç±äºè®¡ç®æ¯ä¸ç§æè´µçèµæºï¼å æ­¤ä½¿ç¨å¥ç« ä¼å¯¹ç»å®çæ»å»èååå¤ä¸ªç¨æ·çè½åé æé¢ç®éå¶ã

  #### 5.1. å¥ç« è§å

  ä¸ºäºçæå¥ç« ï¼å¯¹ç­ä½éç¨å¬é¥Kï¼å¹¶ä¸æè¿çä»¥å¤ªåååå¸Eï¼ç¶åï¼è¿­ä»£å°æå¹¶è¡å°ï¼å®ä½çSï¼ä½¿å¾Hï¼Kï¼Eï¼Sï¼â¥ Nï¼å¶ä¸­Næ¯ä¸äº é¾åº¦ç¼©æ¾å å­ã

  â

  å ä¸ºå®æ¯ç¹å®çå¯é¥ï¼æä»¥ä¸è½ç¨æ¥æ¨¡æå¤ä¸ªå¬é¥ã å ä¸ºå®è¢«ç»å¨ä¸ä¸ªä»¥å¤ªåååå¸ï¼ä¸è½é¢åè®¡ç®ã

  #### 5.2. è¯æç±»åçéæ©

  çæå¶ä»åºäºåå¸å¼å¸åºçç½ç»çè¯»èå°ä¼è®¤å¯Medallionå¨å·¥ä½è¯æç³»ç»ï¼æ¯ç¹å¸ç­ï¼çåæä¸æ¯ç¸ä¼¼çï¼å¹¶ä¸å¯è½ä¼å¾åäºé®ï¼ä¸ºä»ä¹ä¸ä½¿ç¨æçè¯æï¼proof-of-stakeï¼ï¼ ç©ºé²è¯æ(proof-of-idle)ï¼è¿æ¯å¶ä»ä¸é£ä¹æåçæµªè´¹æ¹æ³æ¥è¯æâçå®æ§âï¼

  â

  æçè¯æåå³äºæ²¡ææ»å»èå°æ§å¶å¤§å¤æ°ä»£å¸çåè®¾ã ç±äºæä»¬çæ»å»æ¨¡å¼åæ¬åè¿«æ¿åºï¼è¿æ¯ä¸è½ææçã å³ä½¿æ¯ç¹å¸çæäººçå¸å¼ä¹è¿è¿ä½äºä¸ä¸ªä¸­ç­è§æ¨¡å½å®¶çå½åçäº§æ»å¼ãæ´ä¸ºå¤æçæ¯ï¼å¨ä¸ä¹çå°æ¥ï¼æä»¬æç®å°è¿ä¸ªç³»ç»æ©å¤§å°æ¯æå¿åæ¯ä»ï¼è¿å°ä½¿å¾åç°è¿ç§âæææ¶è´­âåå¾æ´å å°é¾ãç®èè¨ä¹ï¼æä»¬å¹¶æ²¡æä½¿ç¨æçè¯æï¼å ä¸ºæä»¬ä¸æ³è®¾è®¡ä¸ä¸ªç³»ç»ï¼è®©æä»¬çç¨æ·çéç§æå¯ä»¥åºå®ç»åºä»·æé«çäººã

  â

  ç©ºé´è¯æ(proof-of-space)çèµ·æ¥æ´æè¶£ãå°½ç®¡æä»¬ä¸ç¡®å®å°æ¾å°åéçæ¹æ³ï¼ä½æä»¬ä¼å¨å³å°å°æ¥çå°è±åè®®çæ¬ä¸­ä½¿ç¨ç©ºé´è¯æã ä¾å¦ï¼è¿å°åè®¸ç¨æ·å¨å®¶ä¸­å®è£æ§çæºè½çµè¯ä½ä¸ºä¸­ç»§åä»£çãæå³è¿ä¸ªæ³æ³çæ´å¤ä¿¡æ¯ï¼è¯·åè§15.1èã

  â

  ç©ºé²è¯æåºäºé¢å¤çåè®¾ï¼å³å¨ææ§åæ­¥å·¥ä½è¯æè¶³ä»¥è¯æç¨æ·å¯¹å¨å±è®¡ç®è½åçåäº«ã

  â

  éæ¾çæ¯ï¼å¨ç½ç»å°å¤äºèµ·æ­¥é¶æ®µï¼å°äº1,000ä¸ä¼ æ­èï¼çæåµä¸ï¼ä»»ä½ä¸å®¶æ§å¶è¶çº§è®¡ç®ä¸­å¿çå¬å¸é½åªè¦çºç²1ï¼çè®¡ç®è½åå°±è½æ§å¶ç½ç»ãæ­£å¦æä»¬ææåºçï¼å¨æä»¬æ²¡ææ¥æè¶³å¤æ°éçä¼ æ­èä¹åï¼æä»¬ä¸ä¼ä½¿ç¨ç©ºé²è¯æã

  ### 6. å¥ç« å¼å·¥ä½è¯æ

  å¥ç« ææäºæä»¬æ ¸å¿å®å¨åè®¾ä¸æ´ä¸ªç½ç»ä¹é´çæ¡¥æ¢ãç±äºæä»¬çåºæ¬å®å¨ç®æ æ¯éå¶æ¿å±æ»å»èè·å¾å¯¹å°è±ç½ç»çæ§å¶æï¼å æ­¤æä»¬éæ©çå¥ç« åä½å¿é¡»ç¬¦åä»¥ä¸æ¡ä»¶ï¼

1. å¯¹äºéæ¶æèç¹æ¥è¯´ï¼åå»ºå¥ç« å¿é¡»éå¸¸å®¹æã
2. å¥ç« å¿é¡»å¾å®¹æéªè¯ã
3. å¥ç« å¿é¡»é¾ä»¥æ¹éåå»ºã
   æäºè¿äºæ¡ä»¶ï¼æä»¬å°é¾åº¦å®ä¹ä¸ºå¨æ¶é´åéé±ä¸çé«åº¦å¯ä¼¸ç¼©æ§ã ç®èè¨ä¹ï¼æä»¬éè¦ä¸ä¸ªå·¥ä½è¯æç³»ç»ï¼å¨è¿ä¸ªç³»ç»ä¸­ï¼ä¸ä¸ªæ­£å¸¸çèç¹å¾å®¹æè¿å¥ç½ç»ï¼ä½æ»å»èé¾ä»¥è¿å¥ç½ç»ã æä»¬å°è®¨è®ºæä»¬éæ©çå·¥ä½è¯æï¼èä¸æ¯å¶ä»æ¹æ³ï¼ä¾å¦æçè¯ææèç©ºé´è¯æã
   ç®åå­å¨ä¸¤ç§ä¸»è¦çæ¹æ³æ¥æ»¡è¶³ä¸è¿°è¦æ±ï¼è´¨è¯¢-ååºåè®®åå å¯é¾é¢ãä¸å¹¸çæ¯ï¼è´¨è¯¢- ååºåè®®å¯è½ä¸è½å¨å°è±æ¨¡åä¸­æä¾è¶³å¤çå®å¨æ§ï¼å ä¸ºæ»å»èå¯è½éè¿åè°é¢åè®¡ç®è´¨è¯¢å¹¶ä½åºååºãè¿çä¸äºä»å¤©æå¾å¤å­å¨çå å¯é¾é¢[51,76]ï¼æ¯ä¸ªé¾é¢é½æèªå·±çæè¡¡ãåæ ·ï¼ä¸ºäºæ»¡è¶³å°è±çè¦æ±ï¼åªæè¿äºå¯ç æ¼å¾çä¸ä¸ªå­éæ¯åéçãä¹å°±æ¯è¯´ï¼å¹³è¡åçå¯ç æ¼å¾ï¼å¶ä½æASICï¼æå¹³å¡å°ç¼©æ¾è¿æ ·çææ®µæ¯éå¸¸å°é¾çãæè¿ï¼ç ç©¶äººååç°äºä¸äºç®æ³ï¼å¯ä»¥äº§çæäºéªè¯çç»æï¼è¿äºç»æå·æå¯è°çåå»ºé¾åº¦[51]ãè¿äºç®æ³éåå©ç¨äºåå­åæ»ç¡çé¢ç§¯æè´µçè¶å¿[46,62]ãè¿ç±»ç®æ³è¢«ç§°ä¸ºä¸å¯¹ç§°è®°å¿ç¡¬åè½ï¼æä»¬ç¨å®ä»¬æ¥åå»ºå¥ç« ãè¿äºåè½æå ç§ç±»å[51,73,82]ï¼ä½æä»¬éæ©ä½¿ç¨EquihashãEquihashåºäºk-XORçæ¥é®é¢ï¼éè¿æ¶ç©ºæè¡·æ¹æ¡æä¾è®°å¿ç¡¬åº¦ãç±äºEquihashæ¯å¯è°çï¼ç®åçï¼åºäºNPé®é¢ï¼å¹¶ä¸å·²ç»å¨å å¯è´§å¸ç¤¾åºä¸­è¢«æ¥åï¼æä»¥æä»¬ç¸ä¿¡ä½¿ç¨è¿æ ·çå½æ°ä½ä¸ºæä»¬çå·¥ä½è¯æåºç¡æä¾äºå¯æ¥åçå®å¨æ§åé¢åæªæ¥çæ°´å¹³ã
   ä¸ºäºäº§çå¥ç« ï¼ä¸ä¸ªåä¼´æ¿ä¸ä¸ªå¬é¥Kï¼ä»¥åçä»¥å¤ªååæ£åEï¼ç¶åè¿è¡ä¸ç³»åçè®¡ç®ï¼ä»¥ä¾¿å®ä½ä¸ä¸ªçSï¼ä½¿å¾Fï¼Kï¼Eï¼Sï¼â¦ï¼â¥N å¶ä¸­Næ¯ä¸äºé¾åº¦ç¼©æ¾å å­ã å½ä¸ä¸ªæ°çä»¥å¤ªååè¢«æ·»å å°é¾ä¸­æ¶ï¼å¿é¡»è®¡ç®ä¸ä¸ªæ°çSæ¥ä¿æå½åçå¥ç« ã

### 7. æ¯ä»

#### 7.1. å°è±æ¯ä»éæ±

æ¯ä»å¸¦å®½æ¯ä¸ä¸ªç¸å½ç¬ç¹çææã å¨å¤§å¤æ°å¶ä»æ¯ä»ç³»ç»ä¸­ï¼ç©åçææ¬è¿è¿é«äºåéåçææ¬ï¼å æ­¤èç½ææ¬å¯è½è¢«å®å¨ææ¬å¿½ç¥ï¼è¢«åæ¬å¨äº¤æææ¬ä¸­ãç¶èï¼å¨å°è±ç½ç»ä¸­ï¼ä¸ä¸ªåçææ¬å°±æ¯æ¯ä»çä»·æ ¼ï¼æä»¥å³ä½¿æ¯ä»çäº¤æææ¬ä½äºä¸ä¸ªåï¼å®ä»¬çè´­ä¹°ææ¬ä¹æ¯ç¸åçã
å æ­¤ï¼æä»¬è¦æ±äº¤æè´¹ç¨è¶³å¤ä½ï¼ä»¥ä¾¿ç¨æ·å¯ä»¥ï¼èªå¨éè¿Orchidå®¢æ·ç«¯ï¼æ¯ä»ä»»ææ°éçä¸­ç»§æµéï¼ç´è³åä¸ªæ°æ®åãé¤äºä½äº¤æè´¹ç¨ä¹å¤ï¼æ¯ä»æºå¶å¿é¡»è¶³å¤ç²¾ç»ï¼ä»¥è³äºå¯ä»¥è¿è¡å¾®æ¯ä»çè³çº³æ¯ä»ãè¿ä¸ä»è¦æ±æ¯ä»æºå¶çæçï¼èä¸è¦æ±æ¯ä»åºç¡ç©åæå¯æ ¸å®è®°å½çå¯åæ§ã
ç±äºå°è±ç½ç»çç®çæ¯ä¸ºäºæè±ç½ç»çæ§åå®¡æ¥å¶åº¦ï¼æ¯ä»æºå¶çå¶ä»è¦æ±è¿åæ¬ä¸å¯é ï¼å¿åï¼ä¸ä¾èµäºå¯ä¿¡ä»»çç¬¬ä¸æ¹ãå³ä½¿åºå±ç½ç»ä¸åçè§åå®¡æ¥ï¼å¦æä»æ¬¾æºå¶ä¸æ¯ï¼é£ä¹å®å°±å°ä½¿å¾ç¨æ·å¯ä»¥è¢«å®¡æ¥åè·è¸ªãåæ ·ï¼å¯ä¿¡èµçç¬¬ä¸æ¹å¯è½å¨å½±åæ¯ä»æä¾åçå½å®¶è¡ä¸ºä½åå¶ä»å¼ºå¤§å®ä½çå¹²æ¶ä¹ä¸æ´é²å°è±ç½ç»æ´ã
å æ­¤ï¼å°è±ç½ç»çæ¯ä»éæ±åæ¬ï¼
*1. ä¸å¯ä¼ªé æ§ï¼åªææ¥æä»æ¬¾æ¥åçæµæ¼ç©åæå¯æ ¸å®è®°å½çææèæè½å¤ä½¿ç¨å®è¿è¡ä»æ¬¾ã* 2. å¯ç¨æ§ï¼æå³çæ²¡æäººå¯ä»¥é»æ­¢ç¨æ·åéå°è±ä»æ¬¾ï¼ä¹æ²¡æäººå¯ä»¥é»æ­¢æ¶æ¬¾äººæ¶å°ä»æ¬¾ã
*3. ä¸å¯éè½¬æ§ï¼å³ä½¿æ¯ä»æ¬¾æ¹ï¼ä¹ä¸å¯è½æ­è½¬è¿å»çä»æ¬¾ã* 4. å¿åï¼å®ä¹ä¸ºåä»¶äººåæ¶ä»¶äººçä¸å¯é¾æ¥æ§ï¼æ è®ºæ¯æå¸æ·å°åï¼éé¢è¿æ¯æ¶é´ï¼é½æ¾ä¸å°ç¨æ·ä¿¡æ¯èµ°è¿ççè¿¹ã çæ³æåµä¸ï¼å¿åä¼è¾¾å°å¦ä¸çææï¼ ä¸ä»æ¯å¨æ¶æçè§å¯èçæ»å»ä¸ï¼è¿æ¯åéèææ¥æ¶èçæ¶ææ»å»ä¸ï¼é½è½æ¯å¿åçã
å¨ä¸é¢çç« èä¸­ï¼æä»¬å°è®¨è®ºæ¯ä»çæ½å¨è§£å³æ¹æ¡ï¼ç¢è®°è¿äºè¦æ±ãæä»¬ä¼è¾©è¯çå»è®¨è®ºï¼å°è±æ¯ä»ï¼7.12èï¼å®æé¤å¿åè¦æ±ä»¥å¤çææåå®¹ãä¸é¢ï¼æä»¬ç»§ç»­è®¨è®ºæ¯ä»å¿åï¼æççæ©å±åæ¹è¿ã

#### 7.2. æ°æ®åçææ¬

ä¸ºäºè®¨è®ºçç®çï¼åè®¾ä¸ä¸ªæ°æ®åé¿åº¦ä¸º1Ã103ä¸ªå­èã ä¸ºäºè®¡ç®ä¸éï¼æä»¬è§å¯å°äºé©¬éç½ç»æå¡çæ°å å¡CloudFrontæ¯ææè´µçäºæå¡ä¹ä¸ï¼æ¯1Ã109å­èæ¶è´¹0.14ç¾åã è¿äº§çäºæ¯ä¸ªæ°æ®åçææ¬ä¸º1.4Ã10-5ï¼$ 0.00000014ï¼ãç±äºå¸¦å®½æ¯ä¸ç§æµªè´¹ï¼ä»»ä½æªå®åºçå¸¦å®½æ°¸è¿ä¸¢å¤±ï¼ï¼å®éä»·æ ¼å¯è½ä¼ææ¾ä½äºè¿ä¸ªä¸éã

#### 7.3. ä¼ ç»æ¯ä»

å¨ç®åçéèæ¯ä»ç³»ç»ä¸­ï¼äº¤ææ¯éè¿ä¸¤ä¸ªæä¸¤ä¸ªä»¥ä¸çå®ä½ï¼å¦é¶è¡ææ¯ä»æå¡æä¾å[2]ï¼ä¹é´çè°å¤æ¥è§£å³çï¼æ¯ä»å¡éç¨ISO / IEC 7816 [3]ï¼é¶è¡æ¯ä»éç¨EBICS [4]ãè¿äºåè®®è¿è¡å¨SWIFT [5]åNYCE [6]ç­ç½ç»ä¸ï¼ä»¥æ¯æå½ååå½éäº¤æãç»æè¿äºç½ç»çå®ä½æ¯ä¸ªé½ä¿çèªå·±çåç±»è´¦ï¼å¹¶ä¸æ­ä»çµå­æ¯ä»æ¶æ®åæå¨è°è§£ä¸­æ´æ°å®ä»¬[7]ã
è¿æ¥å°ä¼ ç»çæ¯ä»ç½ç»éå¸¸éè¦å¤§å¤æ°å¸æ³ç®¡è¾åºçç¹æ®è®¸å¯ä»¥åè¿æ¥å®ä½ä¹é´çéæ¡ä¸å¡åè®®ãç±æ­¤äº§ççå¨çéèç½ç»å¯ä»¥è¢«çä½æ¯è¿æ¥ä¼ä¸ååè®®åç½ç»æ··åçä¸ä¸ªè®¸å¯çä¸´æ¶ç½ç»ãæ¯ä¸ä¸ªåç±»è´¦é½ä»£è¡¨ä¸ä¸ªåä¸çå¤±è´¥ç¹ï¼ç¼ºä¹å¯ç çå®æ´æ§ï¼å¹¶å¯ä»¥éæçæ§å¶ä¸å¡å®ä½ã
è½ç¶ä¼ ç»çæ¯ä»åè®®éå¸¸ä¸ä¼èªè¡å®ä¹äº¤æè´¹ç¨ï¼ä½æ¯è¿è¡åè®®çå®ä½å´å¢å äºæ¶è´¹ã æ¯ç¬äº¤æè´¹ç¨å¯ä»¥ä»æ¯ä»å¡äº¤æçå ç¾å[8]å°å½éçµæ±[75]ç75ç¾åä¸ç­ã è®¸å¤ç³»ç»åè¿æ¥åæ¶åäºä¸ç¬äº¤æéé¢çç¾åæ¯è´¹ç¨ï¼å¯¹äºé¶è¡è½¬è´¦æ¯ä»å¯è½é«è¾¾13ï¼[10]ï¼å¯¹æ¯ä»å¡æ¯ä»åä¸º3.5ï¼[11]ã
ç±äºä¼ ç»ä»æ¬¾åå³äºå¯ä¿¡ä»»çåæ¹ï¼å æ­¤å¨ä¸çºç²æä»¬æéçæ§è½çæåµä¸ï¼å®éä¸ä¸å¯è½ä½¿ç¨å°è±ç½ç»ãç¹å«æ¯ï¼å¯éæ§æ¯ä»¥éè½¬äº¤æçå½¢å¼è®¾è®¡åºæ¥ç[75]ã äº¤æéå¸¸å¾é¾ä¼ªé ï¼ä½ä¿¡ç¨å¡æ¬ºè¯æ¯å¸¸è§çï¼èº«ä»½ççªæé»å®¢æ»å»å¯è½å¯¼è´ç¨æ·å¸æ·è¢«çç¨ãæ­¤å¤ï¼è¿äºæ¯ä»ç³»ç»ä»æä¾é¨åå¯ç¨æ§ï¼å ä¸ºå®ä»¬å¾å¾å¨ä¸æ¹ä¾¿çæ¶ååçæéå¹¶å®æé­ååæºãç±äºç®¡çæ¯ä»çå¯ä¿¡æ¹éå¸¸ä¸ä»æåéèï¼æ¥æ¶èï¼æ¯ä»éé¢åæ¶é´çè®°å½ï¼èä¸ç»å¸¸è¿æå³äºåéèçèº«ä»½ä¿¡æ¯ï¼æä»¥ç¼ºä¹å¿åæ§ã æåï¼æä»¬å°å¨ä¸é¢çç« èä¸­çå°ï¼ä¼ ç»æ¯ä»çäº¤æè´¹ç¨ç¸å¯¹äºå°è±å¸åºæ¥è¯´ï¼å°éå¸¸æè´µã

#### 7.4. åºåé¾æ¯ä»

æ¯ç¹å¸å½»åºæ¹åäºä¼ ç»æ¯ä»ç³»ç»çç°ç¶ï¼å¹¶ç»§ç»­æ°ä¹±å¨çæ¯ä»åå½éè½¬ç§»å¸åºãæ¯ç¹å¸æ¯ä¸ä¸ªå¨çæ§çç½ç»ååè®®ï¼ä¸ç¥éå°çè¾¹çã åºç¨å¬é¥å¯ç æ¯ï¼äº¤æå¨ç¨æ·èªå·±çæçå°åä¹é´è½¬ç§»æ¯ç¹å¸éé¢ï¼èä¸éè¦ä»»ä½å¯ä¿¡ä»»çæ¹ã ç¨æ·çæå¯é¥å¯¹ï¼å¶ä¸­å¬é¥çæ£åå¯ä»¥ç¨ä½æ¯ä»å°åï¼è¦æ±ç§é¥ç­¾åä»å°åä¼ è¾[12]ã æ¯ç¹å¸æ¯ä»æ¯ä¸å¯ä¼ªé çï¼ä¸å¯éè½¬ç[77]ï¼å¨åççæ¶é´åä»¥è®¡ç®åºåç¡®è®¤ï¼ã æ¯ç¹å¸ç½ç»èªæç«ä»¥æ¥åæºæ¶é´æç­ï¼èç¿å·¥ï¼é¤äºç¬¬7.6èè¿ä¸æ­¥è®¨è®ºçï¼ä¸å¤ªå¯è½åºç°æ´»è·çå®¡æ¥æåµï¼å æ­¤å¯ä»¥å°å¶è§ä¸ºæ®éå¯ç¨ãæ¯ç¹å¸æ¯ä»æ¯ä¼ªå¿åçï¼å¿åç¨åº¦å¨å¾å¤§ç¨åº¦ä¸åå³äº å¦ä½ä½¿ç¨ç½ç»[68]ã
ä¸è¬æ¥è¯´ï¼åæ£å¼å å¯è´§å¸åè®¸äººç±»åè®¡ç®æºç³»ç»å¨åå²ä¸ç¬¬ä¸æ¬¡å¨æ²¡æå¯ä¿¡èµçç¬¬ä¸æ¹çæåµä¸è¿è¡ä»·å¼äº¤æ - æ¿å±çåå¸å¼è¦çç½ç»ï¼å¦å°è±ï¼ã
æ¯ç¹å¸çäº¤æè´¹ç¨ä¸æ¯ç±äº¤æéé¢å³å®çï¼èæ¯ç±äº¤ææ°æ®ç»æçå¤§å°ä¹ä»¥åä»¶äººéç½®çå å­å³å®çã ç´å°2017å¹´ï¼å¹³åäº¤æè´¹ä»è¿ä½äº1ç¾åï¼ä½éçæ¯ç¹å¸ç½ç»è¾¾å°æå¤§äº¤æå®¹éï¼2017å¹´2æè´¹ç¨è¿éä¸æ¶¨ã å¹³åè´¹ç¨ä¸æ¶¨äº13ç¾åï¼é«è¾¾8ç¾åï¼ä½¿å¾ä¾é æ¯ç¹å¸ç½ç»ä¸çä½è´¹ç¨çåºç¨ç¨åºæä¸ºå¯è½ã
ä»¥å¤ªåç½ç»ä¹æ¤æ ¹äºå¬é¥å¯ç å­¦ï¼å¹¶éè¿åæ¯ç¹å¸è¿æ ·çå·¥ä½è¯æè¿è¡ä¿æ¤ï¼ä»èè·å¾äºä¸å¯ä¼ªé æ§ï¼å¯ç¨æ§åï¼éç»å¸ï¼ä¸å¯éæ§çç¸åå±æ§ã ä»¥å¤ªåæ¥ææ´é«çå¨æå¯è°æ´çäº¤æå®¹éï¼èª2015å¹´æ¨åºä»¥æ¥ï¼ç½ç»çæ¶è´¹æ°´å¹³ä¸ç´å¾ä½ãä½æ¯ï¼ç±äºäº¤ææ°éå¢å ä»¥åä»¥å¤ªååºç¡æ¬å°ä»£å¸Etherçäº¤æè´¹ç¨ï¼ç§°ä¸ºgas ï¼å·²ç»å¢é¿[14]ï¼å¹³åä¸º0.20ç¾åï¼æé«è¾¾å°1.00ç¾åã æ§è¡æºè½ååä»£ç çäº¤æææ¬æ´é«ï¼ä¸æ§è¡å¤å°è®¡ç®ææ¯ä¾ã
æµè¡çå¬å±åºåé¾ç½ç»ä¸­çäº¤æè´¹ç¨çå¢é¿ï¼é»ç¢äºä»ä»¬ç´æ¥å¤çå°é¢æ¯ä»çæ½åï¼å°å°é¢æ¯ä»æ¨åæ¯ä»ééç­ç¬¬äºå±è§£å³æ¹æ¡ã

#### 7.5. ä»¥å¤ªåäº¤æææ¬

ä»¥å¤ªåæºè½åçº¦åè®¸åå»ºå¤æçæ¯ä»æºå¶ï¼å©ç¨ä»¥å¤ªåèææº[85]ï¼EVMï¼çè½ååçµæ´»æ§ï¼å¨ç»æµèå´åæä¾å¾çµå®æ´çæ§è¡ç¯å¢ã ä»¥å¤ªåæºè½åçº¦æ§è¡çæ¯æ¡æä»¤é½ä¼å¢å åå§äº¤æçäº¤æè´¹ç¨ã
æ¯ä¸ªEVMæä»¤è±è´¹ä¸å®éçgasï¼ä»¥å¤ªåäº¤æè´¹ç¨å®ä¹ä¸ºäº¤ææè±è´¹çæ»gaséä¹ä»¥åéæ¹è®¾ç½®çgasä»·æ ¼ã ç¿å·¥éæ©ä»»ä½ææçäº¤æçº³å¥å¶å¼éåï¼å¯ä»¥åæ¬äº¤æä¸ä»»ä½gasä»·æ ¼ï¼åæ¬é¶ã éæ©gasä»·è¾é«çäº¤æå¯è½å¯¼è´æ´å¤çå©æ¶¦ï¼å ä¸ºæ¯ä¸ªåºåé½æå¯ä»¥åå«å¤å°äº¤æçéå¶ã åæ ·ï¼æ¥åè¾ä½çgasä»·æ ¼ä¹å¯è½å¯¼è´æ´å¤çå©æ¶¦ï¼å ä¸ºå¦æç½ç»æ²¡æä»¥æå¤§å®¹éè¿è¡ï¼å®å¯ä»¥åè®¸ç¿å·¥å¡«æ»¡ä»ä»¬çåºåã è¿ç§æºå¶åé äºä¸ä¸ªä¸æ­ååä½ç¨³å®çåå¼çè®ºå¹³è¡¡ï¼è¿ä¸ªå¹³è¡¡è¢«ä»¥å¤ªåå æ²¹ç«è¿æ ·çç½ç«è·è¸ª[15]ã
æªè³2017å¹´10æï¼å¨å ä¸ªåºååè·å¾é«æ¦ççäº¤æææ¬ä¸º0.026ç¾åã è¦å¨15åéåç¡®è®¤ï¼$ 0.006å°±è¶³å¤äºã è¿äºä¼°è®¡æ¯äº¤æçåºæ¬ææ¬ - 21,000gasï¼æ éæ§è¡ä»»ä½ææºçååä»£ç å³å¯è¿è¡ç®åçä»¥å¤ªå¸è½¬ç§»äº¤æã å¦æäº¤ææ§è¡æºè½åçº¦ä»£ç ï¼åæ¯ä¸ªEVMæä»¤é½ä¼å¢å é¢å¤çgasææ¬ã ä¾å¦ï¼å¨æºè½åçº¦å­å¨ä¸­æ°¸ä¹å­å¨æ°ç256ä½å¼éè¦è±è´¹20,000ä¸ªgasï¼æ´æ°ç°æå¼éè¦è±è´¹5,000ä¸ªgasã
ä½ä¸ºEthereum ERC20åç±»è´¦æ¬ä»ä»æ¯è´¦æ·å°åå°ä½é¢çæ å°ï¼ERC20ä»£å¸è½¬è´¦çææ¬åºè¯¥æ¯ï¼æ°è´¦æ·éè¦21,000 + 20,000gasï¼éåèè´¦æ·è½¬è´¦éè¦21,000 + 5,000gasï¼å ä¸ºæ¶æ¬¾äººè´¦æ·å·²ç»æäº ä»£å¸åç±»å¸æ¬ï¼ã è§å¯ç°åº[16] ERC20äº¤æï¼æä»¬çå°gasææ¬ç¨é«ï¼çº¦52,000å37,000gasè½¬ç§»å°æ°çåç°æçå¸æ·ã ä¸åä¹å¤å¨äºæºè½ååä»£ç æ§è¡ä¸åå¼éªè¯ï¼ä¾å¦åä»¶äººæ¯å¦å·æè¶³å¤çä½é¢ä»¥åå¶ä»å®ç°ç»èï¼å¦ä»æ¬¾æ¶æ®çè®°å½ï¼ã 50,000gaséè¦äº¤æè´¹ç¨0.014ç¾åè³0.062ç¾åä¹é´ï¼è¿åå³äºæä»¬å¸æäº¤æç¡®è®¤çéåº¦ã

#### 7.6. å°è±ä»£å¸

å°è±ç½ç»ä½¿ç¨åºäºä»¥å¤ªåçERC20ä»£å¸ï¼ä»¥æ»¡è¶³ä¸å¯ä¼ªé æ§ï¼å¯ç¨æ§åä¸å¯éæ§çæ¯ä»è¦æ±ã ä»¥ä¸é¨åå°è®¨è®ºæä»¬å¦ä½éä½ERC20è½¬å¸çäº¤æè´¹ç¨ä»¥å®ç°ä»»æå°çä»£å¸æ°é¢ã å¿åå¨7.17èä¸­è®¨è®ºã
å°è±ä»£å¸ï¼OCTï¼ç¨äºå°è±ç½ç»åçæ¯ä»ã å°è±ä»£å¸æ¯åºäºä»¥å¤ªååè¡çåºå®ä¾åºéçERC20ä»£å¸ã ä¾ç»åºå®å¨1Ã10^8ä¸ªï¼ æ¯ä¸ªä»£å¸æ1Ã10^18ä¸ªä¸å¯åå²çå­ååï¼ä¸Etherç¸åçå¯åè§£æ§ï¼ã
ä¹ä¸çï¼ä»¥ä¸é¨åè¯¦ç»ä»ç»çå°è±æ¯ä»ç³»ç»å¯ä»¥éç½®ä¸ºä½¿ç¨Etheræä»»ä½ERC20ä»£å¸ã äºå®ä¸ï¼ä½¿ç¨ä»¥å¤ªå¸å°ç®åç¥¨å¡ååï¼ç¨å¾®éä½äº¤æè´¹ææ¬ï¼æé«å¯ç¨æ§ï¼å ä¸ºç¨æ·åªéè¦Etherï¼èä¸å¿åæ¶è´­ä¹°å°è±ä»£å¸åEtherï¼äº¤æè´¹ç¨ï¼ã
ç¶èï¼ä»¥å¤ªåè®¡åæªæ¥çåè®®åçº§ï¼åè®¸äº¤æè´¹ç¨ç±ä»»ææºå¶æ¯ä»ï¼åæ¬ERC20ä»£å¸[17] [18]ã è¿å°æ¶é¤ä½¿ç¨æ°ä»£å¸çå¤§é¨åç¼ºç¹; gasææ¬æ²¡æä»»ä½å·®å«ï¼ç¨æ·åªéè¦è´­ä¹°ä¸ä¸ªä»£å¸ã ä¹å¯ä»¥å°gasä»·æ ¼è®¾ç½®ä¸ºé¶ï¼å¹¶å¨åçº¦æ§è¡ä¸­åéç¿èæ·»å ERC20ä»£å¸ä»æ¬¾ï¼ä½¿ç¨EVM COINBASE [85]æä½ç ï¼[19]ã è¿éè¦ç¿å·¥çæç¡®æ¯æï¼å ä¸ºä»ä»¬éè¦å°å¶éç¿ç­ç¥éç½®ä¸ºæ¥åé¶gasä»·æ ¼ï¼å¹¶éªè¯äº¤ææ§è¡åæ¬å°ERC20ä»£å¸è½¬ç§»å°coinbaseå°åã
ä½æ¯ï¼å¼å¥æ°çä»£å¸èä¸æ¯ç®åå°ä½¿ç¨Etherçå³å®æ¯åºäºç¤¾ä¼ç»æµèéææ¯åå ã éè¿åå»ºä¸ä¸ªæ°çä»£å¸ï¼å¹¶ä½¿å¶æä¸ºå°è±ç½ç»ä¸­å¯ä¸ææçæ¯ä»éé¡¹ï¼æä»¬è®¾è®¡åºäºæä»¬è®¤ä¸ºè¶³å¤éè¦çç¤¾ä¼ç»æµæåºï¼ä»¥ä¿è¯å¢å çå¤ææ§ã

##### 7.6.1. æ¿å±

æ¿å±æ¯éè¿èµäºäººä»¬å¯¹ç½ç»çé¨åææææ¥å¼å¯¼æ°çåè®®åç½ç»çä¸ç§æ¹å¼[20]ã
åå°è±è¿æ ·çæ°åå»ä¸­å¿åç½ç»åå°é¸¡åé¸¡èçå°æ°ã ä»£çåä¸­ç»§èç¹è¶å¤ï¼ç½ç»ä¸ºç¨æ·æä¾çå®ç¨ç¨åºå°±è¶å¤ã èç¨æ·è¶å¤ï¼è¿è¡ä»£çæä¸­ç»§èç¹å°±è¶æä»·å¼ã éè¿é¨ç½²ä¸ä¸ªæ°çç½ç»ä»£å¸ï¼å¯ä»¥å éç½ç»æåºï¼å ä¸ºæææ½å¨çç¨æ·é½è¢«æ¿å±æ¥å°½æ©ä½¿ç¨ç½ç»ã

##### 7.6.2. è§£è¦

å¨å»ä¸­å¿åç³»ç»ä¸­åå»ä¸­å¿åç³»ç»ï¼æ°çä»£å¸å°æ°ç³»ç»çå¸åºä»·å¼ä»åºç¡ç³»ç»ä¸­åç¦»åºæ¥ã ä¾å¦ï¼æªè³2017å¹´10æï¼Etherçå¸å¼çº¦ä¸º300äº¿ç¾åï¼æ¥åå¨çäº¤æéä¸º5äº¿ç¾å[21]ã ä»¥å¤ªç½çä»·æ ¼åå¤ç§å ç´ å½±åï¼å¦å å¯è´§å¸çæ´ä½çæµï¼ä»¥å¤ªåç¿å·¥çåå¸è½åä»¥åä»¥å¤ªåå»ºç«çæ°ç¾ä¸ªé¡¹ç®çæè´¥ã ç¶èï¼åä¸ªé¡¹ç®çå¤±è´¥ææåå¯è½ä¸ä¼å¯¹ä»¥å¤ªç½çä»·æ ¼äº§çéå¤§å½±åï¼ä½ä¼å¯¹ææ¶åçé¡¹ç®å·ææ¾ççå½±åã ä½¿ç¨æ°çä»£å¸è§£è¦å¸åºä»·å¼ï¼åé äºä¸ä¸ªæ´å¥½çé¡¹ç®åç³»ç»çè§æ¨¡åå¥åº·çææ ï¼ææå°é¢æµè¯¥å¸åºçæªæ¥ã

##### 7.6.3. æµå¨å¸åº

å¯¹äºç³»ç»ç¹å®çä»£å¸èè¨ï¼æµå¨æ§å¸åºå¯ä»¥ä½¿ä¸¥éä¾èµç³»ç»çç¨æ·éè¿åç©ºä»ä½æ¥å¯¹å²æ½å¨çç³»ç»æéã å¦æè¿çèµ·æ¥å¾è¿ï¼æä»¬åºè¯¥æ³¨æå°ï¼éèè¡çå·¥å·çåè¡·æ¯åè®¸ä¼ä¸å¯¹ä¸å¹¸çæªæ¥äºä»¶è¿è¡å¯¹å²ãéç0x [22]åetherdelta [23]ç­å»ä¸­å¿åäº¤æä»¥åAugur [24]åGnosis [25]ç­é¢æµå¸åºçåºç°ï¼åºäºä»¥å¤ªåçä»£å¸åç³»ç»çè¡çåä¹ä¸ç®å¤ªè¿ã äºå®ä¸ï¼è¿æ ·çè¡çå·¥å·å¯è½æ¯ä¼ ç»çéèè¡çå·¥å·æ´ææ[26]ï¼å ä¸ºåèæ²¡æä¿¡ä»»æ¹ï¼æ²¡ææéï¼çè³å¯è½æ¯å¿åçã

##### 7.6.4. æ°ä»£å¸

æ°çä»£å¸ä¹å¯ä»¥æ´å®¹æå°ä¸ºå©çç¸å³èè®¾è®¡å·ä½çæ¿å±æªæ½; å ä¸ºä»£å¸å®å¨æ¯ä»æ°ç³»ç»ä¸­è·å¾ä»·å¼çï¼æä»¥å®ä»¬å¯¹ä»»ä½ä¸ºäºç³»ç»æåèåªåçäººé½æ¯å¼ºæåçæ¿å±ã ä»¥å¤ªåæºè½åçº¦å¯ä»¥å®ç°ä»£å¸çèªä¸»éå®ï¼ä»¥ç¡®ä¿ä»£å¸ææèåªè½æ ¹æ®å®ä¹çæ¶é´è¡¨è®¿é®å¶ä»£å¸ã è¿ç§æ¿å±æªæ½éçæ¶é´çæ¨ç§»èè°æ´ï¼å¹¶å°ä»£å¸ææèçéç¹æ¾å¨ç³»ç»çé¿ææåä¸ï¼èä¸æ¯åç¹å®å¢éæç¸å³å¬å¸è¿æ ·çç¤¾ä¼ç»æã å¦æå°è±ç½ç»ä½¿ç¨äºEtherï¼å¹¶ä¸å©çç¸å³èè¢«éå®äºEtherï¼ä»ä»¬å®éä¸ä¼æ´å æ¿å±å°ä¸ºä»¥å¤ªåçæ´ä½æåèåªåï¼èä¸æ¯ä½¿ç¨ä»¥å¤ªåçä»»ä½ç¹å®ç³»ç»ã å¯ä»¥è®¤ä¸ºï¼è¿æ ·çç»æå°ä¸æ¯ä¸ä¸ªå°è±ç½ç»åé¡¹ç®çæä½³æ¿å±è°æ´ã

#### 7.7. ä»¥å¤ªåå®¡æ¥å¶åº¦çæµå¶

ä¸å¤§å¤æ°å¬é¾ç±»ä¼¼ï¼é¤ééªè¯èï¼ä»¥å¤ªåç½ç»ä¸­çç¿å·¥ï¼éæ©ä¸å°å°è±äº¤ææåï¼å¦åä¸å®ä¼å¯¹ä»¥å¤ªåäº¤æè¿è¡å®¡æ¥éªè¯ãç±äºææç¿å·¥é½æ¯éæºæååºåï¼ä¸åå¸è½åææ­£æ¯ï¼è¿å°±è¦æ±å¤§é¨åç¿å·¥ä¸»å¨å®¡æ¥å°è±ä»æ¬¾æ¥ä¿æ¤å°è±ç½ç»ãä¾å¦ï¼å³ä½¿90ï¼çç®åéæ©ä¸æåå°è±ç¸å³çäº¤æï¼å°è±ç½ç»ä»ç¶ä¼è¿ä½ï¼åªæ¯äº¤ææéçå¹³åæ¶é´æ¯æ­£å¸¸çååãå¦æä¸å¤§ç¾¤51ï¼çç¿å·¥éæ©éè¿æç»åæ¬ä»ä»¬å¨åçåºåæ¥å®¡æ¥å°è±ç¸å³äº¤æï¼é£ä¹æ´ä¸¥æ ¼çå®¡æ¥å½¢å¼å°±æ¯å¦æ­¤[71]ãæ ¹æ®ä»¥å¤ªååè®®è§åï¼è¿æ¯ææçï¼å¹¶ææå°åå»ºä¸ä¸ªè½¯ååãä½æ¯ï¼ç»ç»å¤§è§æ¨¡çç¿å·¥å¾ç»å¶é è¿æ ·ä¸ä¸ªè½¯åæå¾å¤§çå©æ¶¦æå¤±é£é©;å¦æè½¯åæªè½è·å¾è¶³å¤çåå¸è½åï¼é£ä¹å¾ç»çç¿å·¥å°±ä¼éè¿ä»ä»¬çåºåå¥å±ãé¤äºå©æ¶¦é£é©ä¹å¤ï¼èèå°ä»¥å¤ªåç¿å·¥çå»ä¸­å¿åæ§åå¯¹åºåé¾éç¿ç­ç¥çæ³å¾åæ³è§éå¶ï¼æä»¬è®¤ä¸ºè¿ç§å¯è½æ§æå°ã

#### 7.8. å¨å®æ¯ä»ä¸å»ºç«å¾®æ¯ä»

ç°å¨è®¨è®ºäº¤æææ¬åæ¯ä»ä»¤ççéæ©ï¼ç°å¨è®©æä»¬ççå¯è¡çæ¯ä»æ¹å¼ã ä»¥åºåé¾ä¸ºåºç¡çå°é¢æ¯ä»é¢ä¸´çä¸ä¸ªæ ¹æ¬æ§æææ¯å¦ä½é¿åäº¤æè´¹ç¨ã æ³è±¡ä¸ä¸ï¼å¦ææä»¬åéä¸åé±ä½ä¸ºä¸ä¸ªç®åçä»¥å¤ªåERC20äº¤æï¼æä»¬ä¼æ¯ä»1.4ç¾å - 140ï¼çäº¤æè´¹æ¯æ¬¡æ¯ä»ï¼ ææçå°é¢æ¯ä»è¦æ±éä½äº¤æè´¹å ä¸ªæ°éçº§ã
å¨MojoNation [27]ä¸­éç¨çä¸ä¸ªæ½å¨æè¶£çæ¹æ³æ¯å¨æ¯å¯¹èç¹ä¹é´å»ºç«ä¸ä¸ªâè´¸æå¹³è¡¡âã å½å¸¦å®½å¨å®ä»¬ä¹é´æµå¨æ¶ï¼ç­äº¤æè´¹ä»0è¾¾å°äºä¸å®çå¼æ¶ï¼å®ä»¬ä¼å®æç»ç®ã ä½æ¯ï¼æ­£å¦æä»¬æçå°çï¼ä½¿ç¨ä»¥å¤ªåäº¤æç»ç®ä»æ¬¾çäº¤æææ¬è³å°ä¼å¯¼è´0.014ç¾åçäº¤æè´¹ç¨ã æ ¹æ®ä¹åè®¨è®ºçä¸éï¼æä»¬å¯ä»¥çå°è¿ä¸ªä»·æ ¼å¤§çº¦ç­äº140åå­èçå¸¦å®½ã è¿ç§æ¹æ³çç¬¬äºä¸ªé®é¢æ¯ï¼æ¶æé»è¿èç¹ä¼ç¥éè¿ä¸ªäºå®ï¼å¹¶è¯å¾æ­å¼è¿æ¥å¹¶åå»ºä¸ä¸ªæ°çèº«ä»½ï¼èä¸æ¯æ¯ä»è´¹ç¨ã

#### 7.9. æ¯ä»éé

å¨æ¯ç¹å¸ç½ç»ä¸é¦æ¬¡åºç°çåºåé¾åºç¨ä¸­æµè¡çææ¯æ¯æ¯ä»éé[28]ãç±ä¸­æ¬èª[66]é¨åæè¿°ï¼åæ¥ç±HearnåSpilman [29]å®ä¹åå®æ½ï¼æ¯ä»ééåæ¥ç±PoonåDryja [ 30]æå®åºç¨å¨æ¯ç¹å¸éªçµç½ç»ãæ¯ä»ééåè®¸åéèåæ¥æ¶èå¨å½¼æ­¤ä¹é´åéä»»ææ°éçäº¤æï¼å¹¶ä¸ä»æ¯ä»ä¸¤ç¬äº¤æçäº¤æè´¹ - ä¸ä¸ªç¨äºè®¾ç½®æ¯ä»ééï¼å¦ä¸ä¸ªç¨äºå³é­å®ãè¿æ¯éè¿é¦åè®©åéèåéä¸ç¬äº¤ææ¥éå®ä¸äºä»£å¸ï¼è¿äºä»£å¸å¯ä»¥è¢«åéç»æ¶ä»¶äººæååç»åéèãéå¸¸ï¼ä»£å¸åªè½å¨å°æ¥çæä¸ªæ¶é´Tè¢«ååç»åéèãåæ¶ï¼ä»£å¸å¯ä»¥ï¼éå¢æå¨é¨ï¼åéç»æ¥åèãåéèæç»­ç­¾ç½²çäº¤æè±è´¹è¶æ¥è¶å¤çä»£å¸ç»æ¶ä»¶äººï¼å¹¶ç´æ¥åéç»æ¶æ¬¾äººï¼æ éåå¸å¨åºåé¾ä¸ãæ¶æ¬¾äººå¯ä»¥å¨ä»»ä½æ¶åï¼ååºåé¾åå¸ä»ä»¬æåæ¶å°çäº¤æè¦æ±æ±æ»çéé¢ï¼ ç´å°æ¶é´Tåï¼åéèæ²¡ææä¹ï¼æ­£å¼ç¡®å®äºä»ä»¬å¤æ¬¡åååçäº¤æã
æ¯ä»ééä¸ºåæ¬¾äººæä¾ä¸ä¸ªææçæ¹å¼ï¼ä¸ºæ¶æ¬¾äººæä¾è¿ç»­ä»æ¬¾çå¯ç è¯æ®ã ç±äºä¸­é´ä»æ¬¾ä¸ä¼äº§çä»»ä½äº¤æè´¹ç¨ï¼æä»¥å¯ä»¥éæå°é¢ä»æ¬¾ï¼ä»»æåéã å¨å®è·µä¸­ï¼ç¶é¢æä¸ºéªè¯äº¤æçè®¡ç®å¼éä»¥ååéå®ä»¬çå¸¦å®½è¦æ±ã
å°½ç®¡æ¯ä»ééææå°ä¸ºä»»ææ°éçä¸­é´æ¯ä»æä¾äºä¸åçäº¤æè´¹ç¨å¤ææ§ï¼ä½ä¸æ¯å¨ææçæåµä¸ï¼è¿äºæ¯ä»ééæçæè¿ä¹é«ã ç¹å«æ¯å¨æå¤§éåéèåæ¥æ¶èçç³»ç»ä¸­ï¼ä»ä»¬ç»å¸¸ä¸ä»ä»¬äºå¨ï¼ä»ä»¬ä¸æ­åå»ºæ°çæ¯ä»æ¸ éå¯è½å¤ªæè´µäºã åæ ·ï¼å¯¹äºæä¾çéå¸¸å°çæç­æçæå¡ï¼å¦åä¸ªHTTPè¯·æ±æ10ç§çè§é¢æµï¼ï¼æéé¾ä¸äº¤æçäº¤æè´¹ç¨å¯è½å¤ªé«ã

#### 7.10. æ¦çæ¯ä»

å¦ææä»¬æ æ³é¿åå¿é¡»å¨åºåé¾ä¸åæ¯ä»ç»ç®å¹¶äº§çäº¤ææç»­è´¹ï¼é£ä¹çè®ºä¸çæä½ææ¬å°±æ¯åä¸ªäº¤æçææ¬ï¼å ä¸ºåºåé¾éè¦è³å°ä¸ä¸ªäº¤ææ¥æ§è¡ç¶æè½¬æ¢ã ä¸ºäºè§£å³ä¸äºï¼å¾®ï¼æ¯ä»ï¼æä»¬è³å°éè¦ä¸ç¬äº¤æã
å¦ææä»¬å¯ä»¥åæ¶æ¯ä»ééæéçè®¾ç½®äº¤æï¼ä¹å°±æ¯ä¸ºäºå»ºç«ééèäº§ççç¬¬ä¸ç¬äº¤æï¼ï¼å¹¶ä¸ä»ç¶è½å¤åæ¶ä»¶äººè¯æä»ä»¬æ­£å¨è·å¾ä»æ¬¾ï¼é£è¯¥æä¹åï¼
å¹¸è¿çæ¯ï¼å¨åºåé¾è¡ä¸æä¸ä¸ªç±»ä¼¼çè§£å³é®é¢ï¼ç¿æ± ç®åå±äº«[31]ã éçåæ¯ç¹å¸è¿æ ·çç½ç»å·¥ä½çå·¥ä½é¾åº¦çå¢å ï¼ç¿å·¥ä»¬å¼å§å°ä»ä»¬çè®¡ç®è½åéä¸­å¨ä¸èµ·ï¼ä»¥é¿ååä¸ªç¿å·¥è±è´¹æ°å¹´çæ¶é´å¯»æ¾åè§£å³æ¹æ¡ï¼ä¹å°±æ¯æç¿åéçnonceæ¥æ¾ï¼æ¥äº§çåã ç¿æ± æç¿å·¥ç®åå ç¿æ± æ¯çç»äºå¥å±ï¼ä¸ªå«ç¿å·¥éè¿åå¸è¯æä»ä»¬çåå¸è½åä¸æ­åéè§£å³æ¹[32]ï¼å¨ç¸åçåºåä¸ååå¸è®¡ç®ï¼ä½ä¼éæ©ä¸ä¸ªè¾ä½çé¾åº¦ã è¯¥ææ¯ä½¿å¾ç¿æ± è½å¤ä»¥å¯ç æ¹å¼éªè¯æ¯ä¸ªæ± æåçåå¸è½åï¼èä¸ç®¡è¯¥æ± æåæ¯å¦æ¾å°æ»¡è¶³å®éå·¥ä½è¯æç®æ çè§£å³æ¹æ¡ã
å¦ææä»¬å°ç¸åçææ³åºç¨äºæ¯ä»ééï¼æä»¬å¯ä»¥æå»ºæ¦çæ¯ä»æ¹æ¡ï¼åä»¶äººä¸æ­ååæ¹è¯æä»ä»¬æ¯å¹³åæ¯ä»çï¼èä¸ç®¡å®éæ¯ä»æ¯å¦åçã è¿ä½¿æä»¬è½å¤åå»ºæ¦çæ§çå¾®æ¯ä»ï¼èä¸éè¦è®¾ç½®äº¤æï¼éªçµç½ç»åé·çµç½ç»éè¦å¨å»ºç«ééæ¶ååºåé¾åéç¬¬ä¸ç¬äº¤æç¨äºéå®å®éçä»£å¸ï¼ï¼æ¥æ¶èåªéå¨âåç°âæ¶æ¯ä»äº¤æè´¹ç¨ã
å¨æä»¬ç ç©¶å¦ä½ä½¿ç¨ä»¥å¤ªåæºè½åçº¦æ¥æå»ºè¿æ ·çæ¦çå¾®æ¯ä»ä¹åï¼è®©æä»¬éä¸æ­¥è§å¯ä¸ä¸ï¼æ¦çæ¯ä»çæåæ¦å¿µæ©äºåºåé¾ææ¯ï¼å¹¶äº1996å¹´ç±David Wheeler [84]é¦æ¬¡åè¡¨ãWheeleræè¿°äºæ ¸å¿ æ¦çæ¯ä»çæ¦å¿µä»¥åå¦ä½å°å¶åºç¨äºä½¿ç¨éæºæ°å­æ¿è¯ºççµå­åè®®ï¼ä½¿å¾åä»¶äººåæ¶ä»¶äººï¼è®ºæçæ¯è¯­ä¸­çä¹°æ¹ååæ¹ï¼é½ä¸è½æçºµæ¦çäºä»¶çç»æï¼åæ¶ä¹è¯æä»ä»¬ä¹é´çè·èçæ¦çæ¯å¤å°ã
æå ç¯è®ºæè·éæ åçæ³æ³ï¼1997å¹´Ronald Rivest [79]åè¡¨äºä¸ç¯è®ºæï¼æè¿°äºå¦ä½å¨çµå­å¾®æ¯ä»ä¸­åºç¨æ¦çæ¯ä»ã 2015å¹´ï¼PassåShelat [78]æè¿°äºå¦ä½å°å¯è½æ§å¾®æ¯ä»åºç¨äºæ¯ç¹å¸ç­å»ä¸­å¿åè´§å¸ï¼å¹¶æåºååçæ¹æ¡é½ä¾èµäºå¯ä¿¡çç¬¬ä¸æ¹ã ç¬¬äºå¹´ï¼Chiesaï¼Greenï¼Liuï¼Miaoï¼MiersåMishra [59]å°è¿é¡¹ç ç©¶æ©å±å°é¶ç¥è¯è¯æï¼æä¾éç¨äºå å¯è´§å¸åè®®çå»ä¸­å¿ååå¿åå¾®æ¯ä»ã
é´äºæè¿å¨ä»¥å¤ªåç³»ç»ä¸­æ¯ä»ééçå´è¶£åæ®éæ§ï¼ä»æ¯ä»ééçè§åº¦æ¥çå¾å¯è½çæ¯ä»å¯è½æ¯æä»·å¼çã ä¸ºäºçç¥ç¬¬ä¸æ¬¡è®¾ç½®äº¤æï¼æä»¬å¤±å»äºä¿è¯åéç¡®åéé¢çè½åï¼åèä»£ä¹çåªæ¯ä¸ä¸ªæ¦çä¿è¯ã ç¶èï¼æä»¬å°éè¿è°æ´æ¯ä»æ¦çï¼æ¯ä»éé¢åæ¯ä»é¢çæ¥å±ç¤ºå¯è½çå°é¢æ¯ä»ï¼ä»¥ä¾¿å®ä»¬è½å¤åä»£å ç±»åºäºåºåé¾çåºç¨çæ¯ä»ééï¼èä¸å­å¨ææ¾çç¼ºé·ã
ä»æ¬è´¨ä¸è®²ï¼æä»¬å¯ä»¥é¿ååå§è®¾ç½®äº¤æï¼æä»¬å¯ä»¥ä»åä¸ä¸ªåéèå¸æ·ä¸­ä¸ºä»»ææ°éçæ¶ä»¶èæ¯ä»ä»»æå°çæå¡ä¼è¯ï¼åæ¶è¿åæ¯ä¸ªäººè¯ææ¯ä»éé¢çç¡®åæ¦çãåè®¾æå¡æä¾åï¼å°è±ç½ç»ä¸­çä¸ä¸ªä¸­ç»§æä»£çèç¹ï¼æä¾äºè¶³å¤çæå¡éï¼é£ä¹æ¦çæ¯åºçååå°±ä¼å¾å¿«è¾¾å°å¹³è¡¡ã

#### 7.11. åºäºåºåé¾çæ¦çå¾®æ¯ä»

ä¸ºäºæ´å®¹æå°ä¼ è¾¾å¦ä½å°æ¦çæ¯ä»åºç¨äºåºåé¾åè®®çæ ¸å¿ææ³ï¼æä»¬å°å¨è¿éè¯¦è¿°å ä¸ªç»èã å¨å¼ç¨çåæä¸­æä¾äºå¯¹MICROPAY1æ¹æ¡çæ­£å¼æè¿°ï¼èå°è±çæ¦çæ¯ä»æ¹æ¡å¨7.12èã
PassåShelatæè¿°äºMICROPAY1 [78]ï¼ç»åäºæ°å­ç­¾ååæ¿è¯ºæ¹æ¡ï¼æ¥è¾¾å°åå¸ç²¾ç¡®æ¦ççéæºç»æçæ¡ä»¶ãåä»¶äººé¦åéè¿å°æ¯ç¹å¸è½¬ç§»å°æ°çæçå¯é¥çæç®¡å°åæ¥è¿è¡âå­æ¬¾âã ç¶åï¼æ¶æ¬¾äººï¼MICROPAY1æ¡æ¬¾ä¸­çåå®¶ï¼æéä¸ä¸ªéæºæ°å­ï¼å¹¶å°æ­¤å·ç çæ¿è¯ºåéç»åæ¬¾äººãé¤äºæ¿è¯ºï¼æ¶æ¬¾äººè¿æä¾äºä¸ä¸ªæ°çæ¯ç¹å¸å°åãåæ¬¾äººä¹æéä¸ä¸ªéæºæ°å­ï¼å¹¶å¯¹è¿ä¸ªæ°å­ï¼ææçå½¢å¼ï¼ï¼æ¶æ¬¾äººçæ¿è¯ºåå¶ä»ä»æ¬¾æ°æ®ï¼å¦æ¶ä»¶äººæä¾çä»æ¬¾ç®çå°å°åï¼ç­ä¸ç³»åæ°æ®ç­¾åã
éªè¯æäº§ççç¥¨æ®åæ¬æ£æ¥æ¶æ¬¾äººçæ¿è¯ºæ¯å¦ç¬¦åä»ææ«é²çæ°å­ï¼ä»¥åéªè¯åæ¬¾äººçç­¾åæ¯å¦ä¸æ¯ç¹å¸å­æ¬¾çå°åç¸ç¬¦ãå¦ææ¥èªåæ¬¾äººåæ¶æ¬¾äººçéæºæ°å­çXORçæåä¸¤ä½æ°å­æ¯00ï¼é£ä¹ç¥¨æ®éè¿éªè¯ï¼å¹¶ä¸å¯ä»¥ç±æ¶æ¬¾äººä½¿ç¨ã
ç´è§ä¸ï¼æä»¬å¯ä»¥æè¿ä¸ªæ¹æ¡ä¸­çâæç¡¬å¸âçä½æ¯æ²¡æåè§çï¼é¤éåéæ¹å¯ä»¥æç ´æ¿è¯ºççº¦ææ§ï¼æä¼ªé ç­¾åï¼ï¼æèç¨æ·å¯ä»¥æç ´æ¿è¯ºçéèæ§ã
è¯·æ³¨æï¼åæ¬¾äººå¯ä»¥éè¿åå¤ä¸ªæ¶æ¬¾äººå¹¶è¡çåè¡ç¥¨æ®æ¥âåè±âå¶å­æ¬¾ï¼éè¿å¨æ¶æ¬¾äººçå°ç¥¨æ®å£°æåå¹¿æ­è±è´¹ï¼è¾¾å°å¨æ¶æ¬¾äººä¹ååè´¹è¯¥å­æ¬¾çç®çãMICROPAY1çä½èè®¨è®ºäºå¦ä½éè¿âæ©ç½æç®¡âæ¥è§£å³è¿ä¸ªé®é¢ï¼ç±åæ¬¾äººå­å¥çç¬¬äºç¬éé¢åæµæ¼ï¼å¯ä»¥å¨æªæ¥æä¸ªæ¶é´ç¹è¿åç»åæ¬¾äººï¼ä½è¿ç¬æµæ¼å¯ä»¥è¢«ä»»ä½å¯ä»¥ä¸ºåä¸ä»æ¬¾æç®¡æäº¤ä¸¤å¼ ææç¥¨æ®çäººâååâæâç§æ¯âãè¿å¯ä»¥é²æ­¢åæ¬¾äººä¸æ¶æ¬¾äººå¾ç»æä½ä¸ºèªå·±çæ¶ä»¶äººã
MICROPAY1çä½èå¨MICROPAY2åMICROPAY3ä¸­æé äºè¿­ä»£æ¹è¿ï¼å¶ä¸­å¼å¥äºä¸ä¸ªå¯ä¿¡æ¹ï¼å¨ç¥¨æ®ä¸æ§è¡ä¸äºè®¡ç®éªè¯æ­¥éª¤ï¼å¹¶å¨è®¡ç®æ­£ç¡®çæåµä¸éæ¾ç­¾åã

#### 7.12. å°è±æ¯ä»æ¹æ¡

ç°å¨æä»¬å·²ç»ä¸ºæä»¬çæ¯ä»æ¾å°äºåéçæ½è±¡ï¼ æ¥ä¸æ¥æ¯è¯¥å¦ä½å»å®æ½ï¼
é¤äºç¬¬7.1èä¸­è®¨è®ºçè¦æ±å¤ï¼æä»¬è¿è¦æ»¡è¶³ï¼

- å¯éç¨æ§ï¼æå»ºæ¯å¼ æ°ç¥¨æ®æ¶ä¸éè¦æ¯ä¸å¼ ç¥¨æ®é½äº§çäº¤æè´¹æå¿é¡»ä¸é¾äº¤æï¼å¦åäº¤æè´¹å°åæ¬¡æä¸ºé®é¢ã

- å¿é¡»é²æ­¢åè±ï¼ å¦åä¼ç»æ¶æ¬¾äººé ææå¤±ã

- å°±è®¡ç®ææ¬èè¨ï¼ç³»ç»å¿é¡»å·æè¶³å¤çæ§è½ï¼ä»¥åè¶åºæ°æ®åçææ¬ã

  â

  å¨è¿äºè¦æ±ä¸­ï¼æåä¸ä¸ªè¦ç´ å¯è½æ¯æéº»ç¦çã æ®æä»¬æç¥ï¼ä¸å­å¨ä¸éè¦æç§éªè¯ECDSAç­¾åçé¡ºåºè¿è¡è®¡ç®çæ¹æ³å¨ä»¥å¤ªåä¸æå»ºå½©ç¥¨çdappãæ­£å¦æ¬èæè¯¦ç»æè¿°çï¼ä»åä»¶äººçè¦æ±æ¥çï¼ä¸ä»è¦è¯ææ¶ä»¶äººçç¥¨æ®éé¢åè·èçå¯è½æ§ï¼èä¸è¿è¦æ±åä»¶äººçä»¥å¤ªåè´¦æ·æè¶³å¤æ°éè¢«éå®çå°è±ä»£å¸ä½ä¸ºåéçé¨ç¥¨ã

  â

  åºäºè¿ä¸ªåå ï¼è½ç¶åé ä½¿ç¨è¿ä¸å¤ï¼ä½æä»¬ä¸å¾ä¸éç¨ä¸ä¸è¿°ç±»ä¼¼çè´¸æå¹³è¡¡æ¹æ³ãè¿åè¿æ¥å¯¼è´äºä¸ä¸ªæ°çè¦æ±ï¼å³âè´¸æå¹³è¡¡å¿é¡»ä¿æè¶³å¤å°ï¼ä»¥åå¨è´¸æè¿ç¨ä¸­é ææ¿å±æ­å¼âãç±äºè¿æ¯ä¸ä¸ªç±å®ç°å®éé®é¢èå¼èµ·çæºå¶è®¾è®¡é®é¢ï¼ç°å¨è®©æä»¬éè¿åè®¾ä¸ä¸ªè§£å³æ¹æ¡æ¥å³æ³¨å®ç°ï¼å¹¶æ¨è¿å°7.15èè¿ä¸æ­¥çè®¨è®ºã

  â

  å°è±æ¯ä»æ¹æ¡åMICROPAY1åç¸å³æé çå¯åï¼æ¯ä¸ä¸ªä¼ªé çå¿åï¼æ¦çå¾®æ¯ä»æ¹æ¡ï¼ãéè¿å©ç¨ä»¥å¤ªåæºè½åçº¦åä»£å¸éå®æµæ¼æ©ç½æºå¶ï¼å®å¯ä»¥åå°è¿è¡ååå¹¶è¡ï¼åæ¬åè±ï¼æ¯åºæ»å»ï¼èä¸éè¦å¯ä¿¡ä»»çç¬¬ä¸æ¹ãå°è±æ¯ä»çä¼ªå¿åç­åäºå¨ä»¥å¤ªåå®æäº¤æä¸­å¯ä»¥å®ç°çåè½ï¼å°½ç®¡å°è±å®¢æ·ä½¿ç¨é¢å¤çéç§ææ¯ï¼ä¾å¦ä¸æ¬¡æ§å°ååèç¹èº«ä»½ä¸æ¯ä»å°åä¹é´çå³é®åç¦»ä»¥å®ç°æéçå¿åï¼ã

  â

  MICROPAY2åMICROPAY3ä¸­å¼å¥çä¿¡ä»»æ¹å¯ä»¥è¢«Ethereumæºè½åçº¦ä»£ç æææ¿ä»£ãEVMåè®¸å¨éªè¯å¾®æ¯ä»ç¥¨æ®æ¶å®ç°ä»»æé»è¾ï¼å¨è®¡ç®çç»æµèå´åï¼ï¼å¹¶ä¸ºECDSA [70]æ¢å¤æä½ä»¥åå å¯åå¸å½æ°æä¾åè¯­[85]ã

  ##### 7.12.1. æ¯ä»ç¥¨æ®çå®ä¹

  å°è±æ¯ä»ç¥¨æ®æå¦ä¸å­æ®µï¼

  ```
  H(function) --- åå¸å½æ°ï¼æ´å¤ç»èå¨7.12.2ï¼
  timestamp(uint32) --- Unixæ¶é´è¡¨ç¤ºç¥¨æ®çå¼ä½æ¶å¼å§åææ°ä¸é
  rand(uint256) --- æ¶ä»¶äººéæ©çéæºæ´æ°
  nonce(uint256) --- ç¥¨æ®åéèçéæºæ´æ°
  faceValue(uint256) --- èµ¢å¾ç¥¨æ®çå¼
  minValueMarket(uint256) --- åºäºå¸¦å®½å¸åºçç¥¨æ®å¼
  minValueAccepted(uint256) ---  åºäºæ¶ä»¶äººææ¥åçåå®¹çé¢æå¼
  winProb(uint256) --- ç¹å®ç¥¨æ®èµ¢ååéèé¢å¼çæ¦ç
  recipient(uint160) --- ç¥¨æ®æ¥æ¶èå¨ä»¥å¤ªåä¸160ä½ä»¥å¤ªåè´¦æ·å°å
  randHash(uint256) --- éæºæ°åå¸æè¦
  ticketHash(uint256) --- randHash,recipient,faceValue,winProb,nonceçåå¸æè¦
  (v1,r1,s1)(tuple) --- ç¥¨æ®åéèçECDSAç­¾ååç´ 
  (v2,r2,s2)(tuple) --- æ¥æ¶èçECDSAç­¾ååç´ 
  ```

##### 7.12.2. æ¯ä»ç¥¨æ®å å¯åºéæ©

ä¸ºäºéä½å°è±å°é¢æ¯ä»çææ¬ï¼æä»¬éæ©äºæäºå¯ç åè½ï¼å ä¸ºä¸å¶ä»ä»»æå½æ°ç¸æ¯ï¼ä»¥å¤ªåçgasææ¬éä½äºã
H â - Keccak-256 - ç±äºå·ææä½çgasææ¬ï¼ç¨äºåå¸32ä¸ªå­èéè¦è±è´¹36ä¸ªgas[85]ï¼ï¼æä»¥å¨EVMä¸­å¯ç¨çææåå¸å½æ°ä¸­è±è´¹æ¯æä½çã
ECDSA â secp256k1ä¸Keccak-256ï¼ç±äºEVMæ¯æECDSAæ¢å¤æ­¤æ²çº¿ä»¥åå¼å®¹ç°æåºåé¾è½¯ä»¶åºåå·¥å·ã

##### 7.12.3. çææ¯ä»ç¥¨æ®

Alice ä½ä¸ºæ¥æ¶èï¼Bob åä¸ºåéèã
-1. Aliceæéä¸ä¸ªéæºç256ä½æ°randï¼è®¡ç®randHashï¼å¹¶å°æè¦åéç»Bob
-2. Bob åå§ååæ°ï¼nonce, faceValue, winProb,recipientï¼
-3. Bob è®¡ç®ç¥¨æ®åå¸
-4. Bob äº§çç­¾å(ç§é¥ï¼ç¥¨æ®hash)
-5. ç¥¨æ®å®ä¹åäº§ççåå®¹ï¼

```
(a) randHash
(b) recipient
(c) faceValue
(d) winProb
(e) nonce
(f) ticketHash
(g) creator (ç­¾åticketHashçåä»¶äººå¯é¥çå°å)
(h) creatorSig (åä»¶äººå¯¹tickerHashçç­¾å)
```

è¯·æ³¨æï¼è½ç¶æ­¤ç¥¨æ®åªè¦æ¶ä»¶äººå¯ä»¥å®å¨éªè¯å°±æ¯ææçï¼ä½æ¶ä»¶äººéè¦å¯¹å¶ç­¾åï¼è¯·åè§ä¸æï¼ï¼ä»¥ä¾¿è½å¤å¨ä»¥å¤ªåä¸çå°è±æ¯ä»åçº¦ä¸­å£°æã

##### 7.12.4. æ¯ä»åçº¦çéªè¯

Alice (å¸¦å®½éå®è) å¯ä»¥æ§è¡ä¸é¢çæä½ï¼

```
Verify:
(a) randHash == H(rand)
(b) faceValue >= minValueMarket
(c) winProb >= minValueAccepted
(d) recipient == {æ¥æ¶èå¬å¸çä»¥å¤ªåå¸å·å°å}
(e) creator == {åéèå¬å¸çä»¥å¤ªåå¸å·å°å}
Validate:
(a) Validate: ç¨å¬é¥éªè¯æ¯å¦æ¯è¯¥å¬é¥å¯¹åºçç§é¥æåçç­¾å
Check:
(a)Validate: äº¤æåéèå¨å°è±æ¯ä»åçº¦ä¸­éå®äºè¶³å¤çå°è±ä»£å¸
```

ç°å¨ç¥¨æ®è¢«è¯ææ¯ææçï¼å¹¶ä¸å¯è½æ¯ä¸å¼ ä¸­å¥ç¥¨

##### 7.12.5. é¢åç¥¨æ®ä¸­çä»æ¬¾

è½ç¶æ¥æ¶èå¯ä»¥å¨æ¬å°ååéªè¯ç¥¨æ®æ¯å¦ææï¼å¹¶ä¸å¦æå®æ¯ä¸­å¥ç¥¨æ®ï¼ä¸­å¥ç¥¨æ®ä¸­ä»£å¸çå®éæ¯ä»æ¯éè¿å°è±æ¯ä»æºè½åçº¦å®æçã
è¿ä¸ªæºè½åçº¦å¬å¼äºä¸ä¸ªä»¥è¾å¥ä¸ºåæ°çSolidity APIï¼

```
1. rand
2. nonce
3. faceValue
4. winProb
5. receipient
6. recipientSig (æ¥æ¶èå¯¹ç¥¨æ®hashçç­¾å)
7. creatorSig (åéèå¯¹ticketHashçç­¾å)
```

##### 7.12.6. åçº¦çæ§è¡

åè®¾Aliceæ¯å¸æè´­ä¹°å¸¦å®½çç¨æ·ã Aliceå¿é¡»æä¸ä¸ªä»¥å¤ªåå¸æ·å°åaddressAliceåå°è±ä»£å¸ã è¯·æ³¨æï¼è¯¥å°åå°å·æå³èçå¬é¥PubKeyAliceãAliceè¿å¿é¡»å°å°è±ä»£å¸éå®å¨ä»¥åé¨åå®ä¹çä»¥å¤ªåæºè½åçº¦ä¸­ï¼å¹¶ä½¿ç¨PubKeyAliceéå®ã å¨ä¸ä¸èä¸­ï¼Aliceçå°åå°±æ¯ä»¥å¤ªåå¸æ·å°åï¼ç­äºä»ticketHashä¸creatorSigæ¢å¤çå¬é¥ã
åè®¾SLASHæ¯ä¸ä¸ªä¸´æ¶å¸å°å¼ï¼å®è¢«è®¾ç½®ä¸ºFALSEï¼PubKeyæ¯éè¿ticketHashä»recipientSigæ¢å¤çå¬é¥ï¼

```
è®¡ç®ï¼(a) ticketHash
éªè¯ï¼
(a) randHash; å¦æä¸æ¯ï¼ ç»ææ§è¡ã
(b) PubKey == recipient address; å¦æä¸æ¯ï¼ç»ææ§è¡ã
(c) addressAliceå°ä»£å¸éå¨ç½éæç®¡è´¦æ·ãå¦æä¸æ¯ï¼ç»ææ§è¡ã
(d) addressAliceå·²ç»æè¶³å¤çå°è±ä»£å¸è¢«éå®å¨é¨ç¥¨å¸æ·ä¸­ä»¥æ¯ä»é¨ç¥¨ã å¦æä¸æ¯ï¼åå°SLASHè®¾ç½®ä¸ºTRUEå¹¶ç»§ç»­æ§è¡ã
(e) H(ticketHash, rand) <= winProbã å¦æä¸æ¯ï¼ç»ææ§è¡ã
å¤æ­:
(a) å¦æSLASH == FALSEï¼åæ¯ä»ç¥¨æ¬¾ï¼faceValueä»åå»ºèçç¥¨æ®è½¬ç§»å°æ¶ä»¶äººã
(b) å¦æSLASH = TRUEï¼ååå»ºèéå®çä»£å¸ä¸­æ£åã
ç»ç®ï¼
(a) åéåå»ºèçç¥¨æ®èµéï¼å¦ææçè¯ï¼ç»æ¶ä»¶äººï¼è¿æ¯æ¥èªä¹åçéªè¯ï¼ä¿è¯å°äºfaceValueï¼ã
(b) å°åå»ºèçæ©ç½æç®¡å¸æ·è®¾ç½®ä¸ºé¶ï¼éæ¯/å é¤è¿äºä»£å¸ï¼ã
```

è¯·æ³¨æï¼è½ç¶æ©ç½æµæ¼æºå¶æ¶é¤äºåéèæ½å¨çåè±ä½æ¶ï¼ä½ç¥¨æ®åéèä»ç¶æå¤§è§æ¨¡è¶æ¯çå±é©ãä¸ºäºè§£å³è¿ä¸ªé®é¢ï¼è·èç¥¨æ®çé¢åº¦åºè¯¥å¨æ¶é´æ³ä¸åææ°ä¸éï¼ä»èä¸ºè·èèç«å³åç°æä¾äºå¼ºæåçæ¿å±ãæ¥æ¶èå¯ä»¥ä½¿ç¨è¿ç§ç´æ¥æ§æ¥è®¡ç®åéèçå°è±ä»£å¸ä½é¢çâæµªè´¹çâã

#### 7.13. å°è±GASææ¬

æä»¬å·²ç»ä»ä¸è¿°æ¹æ¡çå¯é æ§ååå®æ½ä¸­æµéäºçº¦87,000çgasææ¬ãè¿ä¸ªææ¬æ¶èå¨å¯¹è·èç¥¨æ®å£°æçAPIè°ç¨ä¸­ãå¯¹ç¥¨æ®åçº¦çæ§è¡è¿ç¨åæ¬å¯¹å°è±ä»£å¸è½¬è´¦APIçå­è°ç¨ãææå°è±æºè½åçº¦å¨å¯ç å®¡æ¥åå¤é¨å®å¨å®¡è®¡ä¹åï¼ ä¼é¨ç½²å°ä»¥å¤ªåä¸»ç½å¹¶å¼æºã

#### 7.14. å¯éªè¯çéæºå½æ°

éè¿ç¨å¯éªè¯çéæºå½æ°ï¼VRFï¼æ¿æ¢æ¥æ¶èçéæºæ°å­æ¿è¯ºï¼å¯ä»¥åå°åé¢é¨åä¸­æè¿°çæ¯ä»ç¥¨æ®çäº¤äºæ§ã ç±Micaliï¼RabinåVadhan [80]äº1999å¹´é¦æ¬¡åè¡¨ï¼IETF VRFèæ¡æè¿ç±GoldbergåPapadopoulos [33]æåºãè¯¥èæ¡è§å®äºä¸¤ç§å¯¹VRFçæé ï¼ä¸ä¸ªä½¿ç¨RSAï¼ä¸ä¸ªä½¿ç¨æ¤­åæ²çº¿ï¼EC-VRFï¼ã
ä½¿ç¨VRFï¼å°è±æ¯ä»ç¥¨æ®çåä»¶äººå°è½å¤å¨æ éå¾å°æ¯ä¸ªç¥¨æ®æ¥æ¶èçæ¿è¯ºã ç¸åï¼åä»¶äººåªéè¦ç¥éæ¶ä»¶äººçå¬é¥ã åä»¶äººå°ç¨æ­¤å¬é¥æ¿æ¢ä¹åæè¿°çç¥¨æ®æ¹æ¡ä¸­çéæºæ°åå¸ã ä¸ºäºæé«æçï¼è¿å¯ä»¥æ¯æ¥æ¶ç¥¨æ®ä¸­å·²ç»å­å¨çèµéçæ¥æ¶æ¹å¬é¥ï¼ä½è¦åæå¯é¥åç¦»çå¯ç åçï¼å¯è½éè¦ç¬¬äºä¸ªå¯é¥ã
ç¶èï¼éªè¯å°è±æ¯ä»åçº¦ä¸­çEC-VRFå°éè¦æç¡®çEVMå éæ¤­åæ²çº¿æä½ï¼å ä¸ºç´æ¥ä»¥solidityè¯­è¨æEVM ä»£ç ç»è£æ¹å¼å®æ½å®ä»¬å¨gasææ¬æ¹é¢å°æ¯éå¸¸æè´µçã
å¹¸è¿çæ¯ï¼å¨ä»¥å¤ªå Byzantium [34]çæ¬ä¸­ï¼ä»¥å¤ªåç½ç»å¢å äºå¯¹æ¤­åæ²çº¿æ éå æ³åä¹æ³çEVMæ¯æ[35]ä»¥åalt bn128æ²çº¿çéå¯¹æ£æ¥[36]ã EC-VRFç»ææ¯éå¯¹ä»»ä½æ¤­åæ²çº¿èå®ä¹çï¼IETFèæ¡ç¹å«å°EC-VRFP256-SHA256å®ä¹ä¸ºEC-VRFå¯ç ç»ï¼å¶ä¸­P256æ¯NIST-P256æ²çº¿[54]ï¼ã ä½æ¯ï¼ä¼¼ä¹æ²¡æçç± å¨åæ ·è¶³å¤å®å¨ççº§å«ä¸ï¼ä¸å»ä½¿ç¨alt bn128æ²çº¿ã èä¸ï¼SHA256å¯ä»¥ç¨Keccak-256æ¥ä»£æ¿ã è¿å°åè®¸å¨ä»¥å¤ªåæºè½åçº¦ä¸­è¿è¡VRFéªè¯ï¼ä»èä¸å°è±æºè½åçº¦è¿è¡æ´åã
ç¶èï¼å°½ç®¡å¨zcashä¸­ä½¿ç¨äºalt bn128æ²çº¿ï¼ä½æ¯ä¸P256ç¸æ¯ï¼è¿æ¯ä¸ä¸ªæ´å¹´è½»çæ²çº¿ï¼å¹¶ä¸æ²¡æè¢«ç ç©¶ã ä¹è®¸æ´éè¦çæ¯ï¼EC-VRFçæå»ºæ¯ä¸ä¸ªæ©æèæ¡ï¼æ­£å¨ç­å¾å®¡æ¥ï¼EVMæå åº­åçº§åçå¨æ°åæ¬ææ¶ï¼å¹¶ä¸å°æªå¨ç°åºç³»ç»ä¸­è¯æå·æéå¤§ä»·å¼ã å æ­¤ï¼å¨å°è±æ¦çå¾®æ¯ä»ä¸­ä½¿ç¨EC-VRFå¹¶ä¸æ¯ç«å³å¯è¡çï¼å°è±é¡¹ç®çç®æ æ¯è¿ä¸æ­¥ç ç©¶ä½¿ç¨ï¼ä¾å¦ å¯ä»¥åè¯ç¨EVMéªè¯çEC-VRF-ALTBN128-KECCAK256ç»æã

#### 7.15. è´¸æå¹³è¡¡

å¦åæè¿°ï¼å¯¹ç§°å å¯æ§è½çç°å®é»ç¢äºæä»¬æ¯ä¸ªæ°æ®åçæ¯ä»ï¼æä»¥æä»¬éè¦å¾å¥½å°çè§£éç¨âè´¸æå¹³è¡¡âæ¹æ³æåºæçé£é©ã æä»¬è¿æ ·åçä¸è¬æåµæ¯ï¼æ³è±¡ä¸ä¸AliceåBobå¸æä»¥å®å¨å¿åçæ¹å¼è¿è¡äº¤æã Bobè¦æ§è¡ä¸äºä»æè¦æ±çä»»å¡ï¼èAliceæ¯å·¥ä½ä¸æ¬¡å°±è¦ä»ä¸æ¬¡é±ã ä¸å¹¸çæ¯ï¼å¿åçæ§è´¨æ¯è¿æ ·çï¼æ²¡æäºåäº¤æï¼AliceåBobæ²¡ææºå¶äºç¸ä¿¡ä»»ã ä»ä»¬è½åä½åï¼
å¦æAliceåBobçå³ç³»æä¸äºå¯å¨ææ¬ï¼SAliceï¼SBob s.t. SAlice> xyï¼SBob> xyï¼ï¼ç­æ¡æ¯è¯å®çï¼éé¿éé±æå·¥ä½ä¸åæ¯ç»æµä¸ççæ§ï¼é¤éï¼1ï¼Aliceæè¦æ±çæ»å·¥ä½éâ¤xyæï¼2ï¼Bobè½å¤å®æçå·¥ä½æ»éâ¤xyãæ­£å¦æä»¬å¨è®¨è®ºå°è±å¸åºæ¶ï¼ç¬¬11èï¼æçå°çé£æ ·ï¼å°è±ç½ä¸å­å¨çå¯å¨ææ¬è¶è¿1Ã103æ°æ®åå°±ä¼è´¸æä¸å¹³è¡¡ãå ä¸ºå°è±å¸åºçåå®¶ä¸è¬æ¯ä¹°å®¶æ¯ä»æ´é«çå¯å¨ææ¬ï¼èä¸ç±äºå®¢æ·ä¸å¯¹ç§°å°ç¥ééè¦å¤å°å·¥ä½ï¼å°è±ç½ç»æå®¢æ·é¢ä»æ¬¾ã

#### 7.16. æ¹è¯

#### 7.17. å¿å

åé¢å èè®¨è®ºçå°è±æ¯ä»ä¸æ®éä»¥å¤ªåäº¤æä¸æ ·æ¯ä¼ªå¿åç; ææäº¤æé½æ¯å¬å¼çï¼åæ¬éé¢ä»¥ååä»¶äººåæ¶ä»¶äººå¸æ·ãå°è±å®¢æ·æ¨å¨éè¿ç°ä»£é±åææ¯ï¼å¦ä¸æ¬¡æ§å°å[37]åä½¿ç¨åå±é±å[38]ï¼æ¥æ¹è¿å¬å±åºåé¾äº¤æçé»è®¤ä¼ªå¿åæ§ï¼å¹¶ä½¿ç¨åå±é±å[38]æ¥æä¾å°½ç®¡ä½¿ç¨åä¸ªæ ¹å¯é¥çæ¯ä»å°åçä¸å¯é¾æ¥æ§ã
éçä»¥å¤ªåæå å»·çæ¬çåå¸ï¼ç°å¨å¯ä»¥éè¿å©ç¨æ°çEVMæ¤­åæ²çº¿åè¯­æä½ç æ¥å®ç°å·æåçgasææ¬çå¯é¾æ¥ç¯ç­¾å[39]ã å°ä»¥å¤ªåæºè½åçº¦ä¸éèå°åï¼å¦HDé±ååå¯é¾æ¥ç¯ç­¾åæä¾çå°åï¼ç¸ç»åï¼å¯å®ç°ä¸ç±»æ··åææ¯ï¼å¦MÂ¨obius [74]æ··åæå¡ãå¦MÂ¨obiusæä¾äºå¼ºå¤§çå¿åæ§ä¿è¯ï¼éè¿ä½¿ç¨åºäºåå¼çå®å¨æ¨¡åå¯¹æ··åæå¡è¿è¡å¯ç éªè¯ãç¶èï¼ä¸ä»¥åçæ··åææ¯ä¸åçæ¯ï¼å®æä¾äºéå¯¹æ¶æè§å¯èååéèçå¿åï¼èä¸æ¯éå¯¹æ¶ææ¥æ¶èã å°MÂ¨obiusç­æå¡ä¸å°è±æ¦çå°é¢æ¯ä»ç¸ç»åï¼ä½¿æä»¬æ´æ¥è¿äºæä»¬å¯¹ä»æ¬¾çæç»è¦æ± - å¿åã
ä¸ºäºå®ç°å®å¨å¿åä¿è¯ï¼é²æ­¢ä»»ä½æ¶æè¡ä¸ºèï¼æ è®ºæ¯è§å¯åï¼åéèè¿æ¯æ¥æ¶èï¼æä»¬é½è¦ä¾é é¶ç¥è¯è¯æææ¯ã
å¨zcashç½ç»[40]ä¸­åºç¨çzk-SNARK [47]ææ¯ä¸ç¯ç­¾åç¸æ¯å¯ä»¥æä¾æ´å¼ºçå¿åæ§ä¿è¯ã å¨zcashä¸­ï¼å±è½å°åä¹é´çäº¤ææä¾äºåéèï¼æ¥æ¶èåéé¢çå®å¨å¿åã

#### 7.18. éäº¤äºå¼

å¨7.14èä¸­ï¼æä»¬è¡¨æï¼éè¿ç¨VRFæ¿æ¢å°è±ä»æ¬¾æ¹æ¡ä¸­çéæºæ°æ¿è¯ºï¼éè¿å»é¤ä¸éæºæ°æ¿è¯ºç¸å³èçéä¿¡æ­¥éª¤ä½¿å¾è¯¥æ¹æ¡æ´å éäºå¨ã æ¥æ¶æ¹ä¸å¿å¨åéèæé ç¥¨æ®ä¹åå°æ¿è¯ºä¼ è¾¾ç»åéèï¼èåªéä»å¬å¼çæ¥æ¶æ¹ä¿¡æ¯ä¸­ç«å³æå»ºç¥¨æ®åã
æ¯ä¸ªæ¥æ¶èå°çæä¸ä¸ªä¸é¨ç¨äºVRFçæ°å¯é¥å¯¹ï¼å¹¶å°å¬é¥ä¸å¶ä»å¬å±æ¥æ¶èä¿¡æ¯ä¸èµ·åå¸ï¼è¯¦è§11.1èãåéèåªéå¨ç¥¨æ®ä¸­éç½®è¯¥å¬é¥ï¼èæ¶ä»¶äººå°ä½¿ç¨ç¸åºçç§é¥å¯¹æ¶å°çç¥¨æ®è¿è¡ç­¾åãå¨7.12.4èä¸­å®ä¹çç¥¨æ®éªè¯é»è¾å°ææ¥æ¶èVRFç­¾åè§£éä¸ºå®ä¸è·èæ¦çéå¼è¿è¡æ¯è¾çå¼ã
æ­£å¦7.14èæè®¨è®ºçé£æ ·ï¼è½ç¶è¿å°æ¯å¯¹æ¯ä»æ¹æ¡çç¸å¯¹ç®åçä¿®æ¹ï¼ä½å¨EVMä¸­éªè¯VRFçå¯è¡æ§éè¦è¿ä¸æ­¥çç ç©¶ã

#### 7.19. æ§è½

è½ç¶å°è±æºè½åçº¦æ¯ä¸å¯åçï¼ä½æ¯ä»ä»¬å¯ä»¥éè¿é¨ç½²æ°çåçº¦ååçº§å°è±å®¢æ·ç«¯è½¯ä»¶æ¥æåä»ä»¬ï¼å¦ææéè¦çè¯ä¹å¯ä»¥ååå¼å®¹æ§åçº¦ï¼æ¥ææå°è¿è¡åçº§ãä»¥å¤ªåæºè½åçº¦æ¯æå¤å±ä¼åä»¥éä½gasææ¬ï¼æä»¬é¢è®¡å°è±æ¯ä»æºè½åçº¦çæªæ¥çæ¬å°ä½¿ç¨ ä¾å¦EVM åè¯­[41]ï¼ä¹å°±æ¯é¢ç¼è¯çä»£ç ï¼æ¥ä¼ågasææ¬ï¼ç±»ä¼¼äºå¸¸è§è½¯ä»¶ç³»ç»å¸¸å¸¸ç¨åèç»è£ä»£æ¿æè´µçå­ç¨åºã
ç¶èï¼å°è±æ¯ä»ç¥¨æ®çéªè¯ç¶é¢æ¯è¯¸å¦ECDSA recovery ç­å¯ç å­¦ç¸å³æä½çæ§è¡ä»¥åå°è±ä»£å¸åéèåæ¥æ¶èçä»¥å¤ªåè´¦æ·çç¶ææ´æ°ãå¨è¿éï¼ä¸ä¸ªæ¹è¿å¯è½æ¯ä¸¤æ¬¡ä½¿ç¨æ¥æ¶èå¯¹æææ°æ®äº¤æçç­¾åã ç®åï¼ç±äºå°è±å®¢æ·çµæ´»æ§çåå ï¼å°è±è®¡åå¨é£éå®ä¹äºä¸¤ä¸ªç­¾åï¼å¹¶ä¸ä½¿å¾å¨ä¸ä¾èµä»¥å¤ªåç»èçæåµä¸æ´å®¹ææå®åæ¨çä»æ¬¾æ¹æ¡ã æ´ç®åçä¼ååæ¬ç´§å¯åè£ç¥¨æ®å­æ®µå¹¶å°åä¸ª256ä½å­ä¸­çå¤ä¸ªåé¨åéè¿è¡ç¼ç ï¼ä»¥ä¸EVMå æ å­åæ°¸ä¹å¥çº¦å­å¨ææ§½ï¼åä¸º256ä½ï¼å¯¹é½ã
å¦ä¸æ¹é¢ï¼ä¸ºäºå®ç°æ´å¤§çå¿åæ§ï¼å¯éæçè³å¼ºå¶ä½¿ç¨æ··åææ¯å¯è½ä¼å¤§å¤§å¢å å°è±æ¯ä»åçº¦çgasææ¬ã ä½¿ç¨åºäºå¯é¾æ¥ç¯ç­¾åçæ··åæå¡å¾å®¹æå¯¼è´å¤§çº¦é«åºä¸ä¸ªæ°éçº§çäº¤æè´¹ç¨[39]ãä½æ¯ï¼è¿è½æä¾ç»ç¨æ·å¼ºæåçå¿åä¿è¯ï¼ç¨æ·å¯è½ä¼è§å¾è¿æ¯å¼å¾çã å ä¸ºæä»¬å¯ä»¥å¾å®¹æå°è°æ´å°è±æ¯ä»çæ¦çåé - ç¥¨æ®é¢çï¼è·èæ¦çåè·èéé¢ - æä»¬å¯ä»¥è°æ´ç¥¨è¯ä¹é´çå¹³åæ¶é´æ¥åå°äº¤æè´¹ç¨ï¼ç¹å«æ¯å¯¹äºé¿æè¿è¡çèç¹ï¼å¯ä»¥éä¸ªå å¤©æåç»ç®ä¸æ¬¡ï¼ã
æåï¼é¶ç¥è¯ææ¯å¦zk-SNARKsçä¸ä¸ªéå¸¸æè¶£çå±æ§æ¯å¤§å¤§åå°ä»»æè®¡ç®çè®¡ç®å¼éï¼å¦ä»¥å¤ªåæºè½åçº¦æ§è¡[42]ãè½ç¶çæzk-SNARKè¯ææ¯æè´µçï¼ä½éªè¯æ´ä¾¿å® - çè³ä¸åå§ä»£ç ç¸æ¯ã ç±äºåªæéªè¯éè¦å¨é¾ä¸æ§è¡ï¼æä»¥å¨å°è±ç¥¨æ®ä¸­éç¨é¶ç¥è¯è¯ææ¯åå§éªè¯ç æ´ä¾¿å®ã
è¿ä¸æ­¥æ¥è¯´ï¼éå½SNARKs [52]æå¯è½å°ä¸ç»SNAKè¯æéåæä¸ä¸ªè¯æãè½ç¶å®ä»¬å¯è½æ´éç¨äºåºåé¾å±è¯åè®®[43]ï¼ä½å®ä»¬ä¹å¯è½å¯¹å°è±åè®®æç¨ï¼ä¾å¦ å°å¤ä¸ªç¥¨æ®ç´¢èµæ¹éåä¸ºåä¸ªæºè½åçº¦äº¤æï¼åæ¶é¿åçº¿æ§gasææ¬å å ã

### 8. å¸¦å®½æç¿

![ ](https://gguoss.github.io/img/%E5%B8%A6%E5%AE%BD%E6%8C%96%E7%9F%BF.png)
å¨è¿ç« æä»¬å°æè¿°ä¸­ç»§çè§ååä»£ççè¡ä¸ºï¼ä»¥åè®¨è®ºè¿äºæ æ³å®¡æ¥çï¼å¿åç½é¡µæµè§çèç¹å¦ä½âè¿æ¥å¨ä¸èµ·çâ

#### 8.1. å¸¦å®½éå®è§è

ä¸­ç»§èç¹å®ç°ç¸å¯¹ç®åçè¡ä¸ºæ¨¡å¼å¦ä¸ï¼

- ä¿æä¸ä¸ªæå¤ä¸ªè¿æ¥ï¼æ¯ä¸ªé½æèªå·±çå å¯å¯é¥ã

- æ£æ¥æ¶å°çä»»ä½ç¥¨æ®åè·å¾çå¥è´¦ã

- çæ§äº¤æçå¹³è¡¡ï¼å¦æè¶è¿é¢åç¡®å®çé¢åº¦ï¼åæ­å¼è¿æ¥ã

- ä»ä»»ä½æå¼çè¿æ¥æ¥æ¶æ°æ®ï¼å¹¶å¨æ¶æ¯è¾¹çæ§è¡è§£å¯ã

- å¤çè§£å¯æ¶æ¯å¦ä¸:

  â

  âå°ä»»ä½éæ§å¶æ®µè½¬åå°æ¶æ¯ä¸­æå®çè¿æ¥ã

  â

  âå¤çæ§å¶å­æ®µå¦ä¸ï¼

  ```
  * ç©ºæ°æ®ã æç¤ºä¸­ç»§ä¸¢å¼è¿ä¸ªå­æ®µã
  * æ°æ®è½¬åéçãæç¤ºä¸­ç»§ä»¥åºå®éçéè¿é¾æ¥åéæ°æ®ï¼æ ¹æ®éè¦å¯¹æ°æ®åè¿è¡æéå¹¶çææ°æ®ä»¥ä¿æéçã
  * æ£è½®ç¥¨æ®ãæç¤ºä¸­ç»§å°ä¸ä¸ªç¥¨æ®ä¼ éç»ä¸ä¸ªå¯¹ç­èï¼ è¯¥å¯¹ç­èç¹æ¯åæ¥æ°æ®æ¥æºç¹ã
  * åå§åé¾æ¥ã æç¤ºå½å»ºç«åæ­å¼é¾æ¥çè¿ç¨æ¶ï¼ä¸­ç»§å»ºç«ä¸ä¸ªæ°é¾æ¥ã
  * åå§åç½é¡µé¾æ¥ãï¼ä»éä»£çï¼æç¤ºä»£çæå¼æå®ä¸»æºçSSLè¿æ¥ãä¸ºäºæ¯æç½ååï¼è¿ä¸è½æ¯ä¸ä¸ªåçIPå°åã
  ```

ä¸è¿°è¡ä¸ºä¸­çä¸ä¸ªéè¦èèæ¯éè¦ä¸­ç»§èç¹æç»­ä¸æ­å°çå·¥ä½è¯æãå½ä¸æä»¬ææçWebRTCé¾æ¥ç»åèµ·æ¥æ¶ï¼ç½ç«å°±å¯è½éè¿è¿è¡çº¯ç²¹çJavaScriptä¸­ç»§ä»£ç æ¥è·å©ã
æå³éè¿æ§å¶å­æ®µæ©å±åºç¨ç¨åºçè®¨è®ºï¼è¯·åè§ç¬¬15èã

#### 8.2. èç¹ä¿æ¤åâå¸¦å®½çç§â

å®¢æ·è¿æ¥çä¸­ç»§æä¸ä¸ªéå¸¸éè¦çä¿¡æ¯ï¼å®¢æ·çIPå°åã æä»¬åè®¾å®¢æ·å¸æå°½å¯è½ä¿æç§å¯æ§ï¼æä»¥é»è®¤çå®¢æ·ç«¯ä¼é¿æ¶é´ä½ä¸ºç¬¬ä¸è·³å¯¹ç­èç¹ã
å¦ä¸ä¸ªå³äºç¬¬ä¸è·³èç¹çé®é¢ï¼æä»¬å¨è®¨è®ºç±å±è°ï¼9.2èï¼å¼èµ·çä¿¡æ¯æ»å»æ¹é¢è¿è¡äºæ·±å¥çè®¨è®ºï¼ä»ä»¬åå¨ä¸ä¸ªçæ³çä½ç½®æ¥æ§è¡å®æ¶æ»å»ãä¸ºäºé²æ­¢è¿äºæ»å»ï¼æä»¬å»ºè®®æéç§æè¯çç¨æ·éç¨ä¸ç§ç§°ä¸ºâå¸¦å®½çç§âçæ¹æ³ï¼åç¬¬äºè·³èç¹æ¯ä»éé¢æ¥è·å¾åºå®æ°éçå¸¦å®½ãç±äºè¿ç§æ¹æ³ä½¿ç¨çæ°æ®ä¼åç½ç»ä½¿ç¨çæ°æ®å®å¨ä¸ç¸å³ï¼ä»èå¯ä»¥é²æ­¢æ»å»èæ æ³çå°ä¸­ç»§3çå¥ç«æµéã
ä¸ºäºç»å¯»æ±éé¿çç¨æ·æä¾å¸®å©ï¼ç¬¬12èï¼ï¼å¸¦å®½çç§ä¹å°æ¯æç±æµè¡çéå°è±WebRTCåè®®çç»è®¡ç¹æ§ç¡®å®çéåºå®éçã

#### 8.3. é¾è·¯

å¯¹ä½¿ç¨ä¸­ç»§è¿è¡å¿åè®¿é®æå´è¶£çå®¢æ·å°ä½¿ç¨ä¸è¿°è§èæ¥åå»ºä¸­ç»§çâé¾è·¯âã

### 9. é¾è·¯ä¸²è°æ»å»

å¨æ¬èä¸­ï¼æä»¬å°æ¢è®¨æ»å»èå¯ä»¥éè¿æ§å¶æçè§å¤ä¸ªä¸­ç»§å/æäºèç½æå¡æä¾åï¼ISP) æ¥æ¨æ­ææ¨å¯¼åªäºç±»åçä¿¡æ¯ãåå®ä¸­ç»§åä»£çæ¯éæºéæ©ï¼ISPä¹åæ ·åæ­¤åå®ï¼ï¼æä»¬å»ºç«äºä¸ä¸ªç»å®æ»å»å¯è½ä»¥ä¸åé¾é¿è¿è¡çæ¦çæ¨¡åã

#### 9.1. ä¸ªäººä¸­ç»§åä»£çæç¨çä¿¡æ¯

ç±äºåºäºIPçç½ç»åºæç»æä»¥åå°è±åè®®ä½¿ç¨åºäºä»¥å¤ªåçæ¯ä»ï¼ä¸­ç»§åä»£çèç¹åå¶å¥ä¾µé²å¾¡ç³»ç»å¯ä»¥è®¿é®ä»¥ä¸ä¿¡æ¯

- ä»ä»¬æè¿æ¥çææè®¡ç®æºçIPå°åã

- ä»ä»¬è½¬åçæ°æ®åçå¤§å°ï¼æ¶é´åæ°éã

- æ§å¶æ¯ä»ä»£å¸çå¬é¥ã

- éå¯¹å®ä»¬çæ°æ®åæ§å¶å­æ®µçåå®¹ã
  æ­¤å¤ï¼ä»£çèç¹åå¥ä¾µé²å¾¡ç³»ç»å¯ä»¥è®¿é®ä»¥ä¸ä¿¡æ¯ï¼

- Webæå¡å¨çä¸»æºååSSL / TLSä¼è¯ååçææé¨åã

  #### 9.2. æ½å¨çåè°è

  å¨å°è±ç½ç»ä¸­ï¼ ä»¥ä¸çè§è²å¯è½è¢«æ»å»èçè§æèä¸²è°ï¼

- äºèç½æå¡æä¾åä»¥å®¢æ·ï¼ä¸­ç»§ï¼ä»£çï¼webæå¡å¨çè§è²å å¥å°è±ç½ç»ãä¸å¯é æ¦çç¨sè¡¨ç¤ºã

- ç½ç«ã é¾æ¥å°ä»£ççç½ç«æå¡å¨ã ä¸å¯é æ¦çç¨wè¡¨ç¤ºã

- Relaynã é¾è·¯ä¸­çç¬¬nä¸ªä¸­ç»§èç¹ã ä¸å¯é æ¦çç¨r/n è¡¨ç¤ºã

- ä»£çã ææµééè¿ä¸­ç»§å°ç½ç«æå¡å¨çä»£çãä¸å¯é æ¦çç¨x/n è¡¨ç¤ºã

  â

  æä»¬å·²ç»åç¦»åºä¸é¢çråxï¼åå æ¯ï¼è½ç¶æ»å»èæ æ³æ§å¶ä»ä»¬å¯ç¨äºè®¡ç®å·¥ä½éè®¡ç®çæ»è®¡ç®éï¼ä½ä»ä»¬å¯ä»¥æ§å¶å¦ä½å¨ä¸­ç»§åä»£çèç¹ä¹é´åéè®¡ç®ã

  #### 9.3. æ»å»ç±»å

  å±è°æ»å»çæ ¸å¿ç®æ æ¯å°ç¹å®çå°è±å®¢æ·ä¸ç¹å®çSSLè¿æ¥ç¸é¾æ¥ã ä¸»è¦å¯ä»¥éç¨å¦ä¸æ¹æ³ï¼

- å³ç³»ãæ»å»èå¯ä»¥éè¿è§å¯æ¶æ¯è·¯ç±è¿ç¨ä¸­çèç¹æ¥æ¨æ­åºä¸ä¸ªå®¢æ·æ­£å¨åä¸ä¸ªç»å®çç½ç«éè¯ã

- è®°æ¶ã æ»å»èå¯ä»¥éè¿æ§å¶å¹¶è§å¯æ°æ®åçæ¶é´è§å¾æ¥æ¨æ­å®¢æ·æ­£å¨ä¸ç»å®ç½ç«éè¯ã

- æªçç§çå¸¦å®½è±è´¹ã å°½ç®¡å®¢æ·å¯ä»¥ä½¿ç¨å¸¦å®½çç§çæ¹å¼æ©çèªå·±çæµéï¼ä½æ»å»èä»ç¶å¯ä»¥æ§è¡å®æ¶æ»å»ã

  #### 9.4. âå¸¸è§âäºèç½è®¿é®ï¼é¶ä¸­ç»§ï¼é¶ä»£ç

  è½ç¶å½å®¢æ·ç´æ¥è¿æ¥ç½ç«æ¶ï¼å°è±ç³»ç»ä¸è¢«ä½¿ç¨ï¼ä½æä»¬å¨æ¥ä¸æ¥çç±»å®¹ä¼åæå¨å®¢æ·å¯å¨ä¸­å­å¨çé£é©ã

  ![img](https://gguoss.github.io/img/OrchidAccess.png)

  å¨ä¸è¡¨ä¸­ï¼âXâè¡¨ç¤ºåä¸å±è°ï¼äºèç½æå¡å æxçæ¦çéç¨å³ç³»æ»å»ç±»åãç½ç«æwçæ¦çéç¨å³ç³»æ»å»ç±»åã

  #### 9.5. VPN: é¶ä¸­ç»§ï¼ é¶ä»£ç

  ä¸ºäºè¿è¡åæï¼æä»¬ä¹æåºäºVPNè®¿é®åºæçåè°é£é©

  gæ¯VPNæä¾åè¢«çæ§æèä¸å¯¹æå¾ç»çå¯è½æ§ã è¯·æ³¨æï¼gå¯è½ä¼éçæ¶é´çæ¨ç§»èååå¯¼è´é¾ä»¥å»ºæ¨¡ï¼ä¾å¦ï¼ç±äºæ¨çVPNä½¿ç¨æåµã

  #### 9.6. é¶ä¸­ç»§ï¼ä¸ä¸ªä»£ç

  æ¯«æ çé®ï¼è¿ç§æåµä¸çé£é©ä¸VPNä½¿ç¨çé£é©å¾ç¸ä¼¼ã ä¸ä½¿ç¨ä¸­ç»§çé¾ç¸å½äºå¨æ¯ä¸ªæµè§ä¼è¯ä¹åéæºéæ©æ°çVPNæä¾åçVPNï¼å¹¶ä¸VPNæä¾åä¸å­å¨ä¸ªäººä¿¡æ¯ã

  #### 9.7. ä¸ä¸ªä¸­ç»§ï¼ä¸ä¸ªä»£ç

  å¦æå¨è¿ç§éç½®ä¸­ä½¿ç¨å¸¦å®½çç§ï¼ææçå®æ¶æ»å»é½ä¼è¢«ç¼è§£ã

### 15. æªæ¥çå·¥ä½

æ¬èä¸­çåå®¹åä¸ºä¸¤ç±»ï¼å¥½çæ¹é¢åæä»¬åå¬ä¼å±ç¤ºçåé¨çç¾ç¹å¾ãä¸å¤æä»¬ç¸ä¿¡è¿ç§çç¾é½æ¯å¾æ®éçââè½ç¶å ä¹ææäººé½æä¸ä¸ªèªå·±æåæ¬¢çå°æå©ç¨ä½æ­§éçä¾å­ï¼ä½æ¯åæ ·ä¹ææ æ°çå°æå©ç¨ä½æ­£éçä¾å­ãå°è±è¿ç§åè®®æ¯æ²¡æèªå·±çå¤æ­åï¼æ æ³åç¥å®è¢«èªç±æå£«ï¼è¿æ¯è¢«ææåå­ï¼åäººè¿æ¯è±éæç¨ã

#### 15.1. ç©ºé´è¯æ

å¦ç¬¬5èæè¿°ï¼æä»¬éå¸¸æå´è¶£æ¢ç´¢å¶ä»è¯æç±»åãè¿æ¯ä¸ä¸ªéè¦çé®é¢ï¼å ä¸ºå·¥ä½è¯æç³»ç»çç¯å¢å½±åï¼ä»¥åæä»¬ç®åçå·¥ä½è¯æç®æ³è¦æ±å¨é¢çè®¡ç®æºåå½ç½ç»è·¯ç±å¨ã
æä»¬å¾é«å´è½å¤æ¢ç´¢ä½¿ç¨ç£çç©ºé´æä¸ºæä»¬å®å¨æ ¸å¿çç¨ç¼ºèµæºçå¯è½æ§ï¼è¿å¯è½ä¼è®©æ§ææºæç±»ä¼¼ç¡¬ä»¶æå©å°åä¸å°å°è±ç½ç»ä¸­ã

#### 15.2. åå®¹ä¸»æºçä¿æ¤

è®¸å¤ååçæ¹æ³ï¼ç¬¬3èï¼åç°åå®¹ä¸»æºå¯»æ±ä¸ç½ç»ç¨æ·ç±»ä¼¼çä¿æ¤ãæä»¬å¨è¿æ¹é¢åé¨æ¯æçç¾çï¼å ä¸ºæä»¬ç¡®å®è®¤ä¸ºæä¸äºåå®¹ä¸ç¬¦åå¬å±å©çï¼ä¾å¦æå³å¶é æ ¸æ­¦å¨çä¿¡æ¯ï¼ãä½æ¯ï¼å¦ææåµä¸ç¬¦åè¦æ±ï¼å°è±å¯ä»¥æ©å±å°æ¯æè¿ç§âæ éå¶çï¼æªåå°å¨èçä¸»æºâï¼å¦ä¸å¾æç¤ºï¼
![img](https://gguoss.github.io/home/gavin/work/shell/blog/themes/yilia/source/img/OrichidFigure3.png)

#### 15.3. ä»¥å¤ªåæ¯ä»æ¨¡åçå®å¨ä¿è¯

æ­£å¦æä»¬å¨é²ç«å¢è§é¿é¨åï¼ç¬¬12èï¼ä¸­æè®¨è®ºçï¼å®¢æ·ç«¯çä»¥å¤ªåç½ç»æµéå¾å¯è½æ¯å®å¨çèå¼±ç¯èãå ä¸ºææçèç¹é½å¿é¡»ç»´æ¤è¿ä¸ªä¿¡æ¯ï¼æä»¥ä½¿ç¨å°è±åè®®æ¥
ååä»¥å¤ªåä¿¡æ¯ä¼¼ä¹æ¯å¤©ä½ä¹åã
ä¸å¹¸çæ¯ï¼ä¾é é£äºä½ æ­£å¨ä»é±çä¿¡æ¯ä¼å¯¼è´æ£æçé®é¢ãæä»¬å¸æå¨ä¸ä¹çå°æ¥æ·»å å¤çè¿ä¸ªé®é¢çåè½ï¼ä½ä¸ä¼å¨æä»¬æååå¸ççæ¬å å¥æ­¤åè½ã

#### 15.4. å°è±å¹³å°

å°½ç®¡æä»¬é¢è®¡æ ¸å¿ç³»ç»çè®¾è®¡å°å¨ä¸ä¹çå°æ¥å ç¨æä»¬å¤§é¨åçæ¶é´ï¼æä»¬ä¹ä¼æ·»å ä»¥ä¸ç¨ä¾çç¸å³çåè½ï¼ å ä¸ºè¿æ ·åï¼ å¯ä»¥ä¸ºå°è±ç½ç»å¢å å¤§éçæµéã

- 1.ç´æ¥è®¿é®ç½ç»çAPIæ¥å£å å¥ä»£å¸æå¡ã
- 2.ç½ç»ä¸çæä»¶å­å¨åéæç½ç«æç®¡ã
- 3.æä»¶å±äº«ã
- 4.çµå­é®ä»¶/æ¶æ¯æå¡ã
- 5.ä»²è£/è°è§£æå¡ã



[TOC]

## **0 æè¦**

å½åäºèç½æ­£å¤äºä¸åºé©å½ä¸­ï¼éä¸­å¼ä¸ææå¡æ­£å¨è¢«å»ä¸­å¿åå¼æ¾æå¡æä»£æ¿ï¼ä¿¡ä»»å¼åä¸è¢«å¯éªè¯å¼è®¡ç®æä»£æ¿ï¼èå¼±çä½ç½®å¯»åè¢«å¼¹æ§çåå®¹å¯»åæä»£æ¿ï¼ä½æççæ´ä½å¼æå¡è¢«ç¹å¯¹ç¹ç®æ³å¸åºæä»£æ¿ï¼æ¯ç¹å¸ãä»¥å¤ªååå¶ä»çåºåé¾ç½ç»å·²ç»è¯æäºå»ä¸­å¿åäº¤æè´¦æ¬çæææ§ãè¿äºå¬å±è´¦æ¬å¤çå¤æçæºè½åçº¦åºç¨ç¨åºåäº¤æä»·å¼æ°ç¾äº¿ç¾éçå å¯èµäº§ãè¿äºç³»ç»çåä¸èä»¬å½¢æå»ä¸­å¿åçãæ²¡æä¸­å¿ç®¡çæºææèå¯ä¿¡ä»»åæ´¾çç½ç»æä¾äºæç¨çæ¯ä»æå¡ï¼è¿æ¯å¹¿æ³äºèç½å¼æ¾æå¡çç¬¬ä¸ä¸ªå®ä¾ãIPFSéè¿åæ£çç½é¡µèªèº«å·²ç»è¯æäºåå®¹å¯»åçæææ§ï¼å®æä¾äºå¨çç¹å¯¹ç¹ç½ç»æ°åäº¿æä»¶ä½¿ç¨ãå®è§£æ¾äºå­¤å²æ°æ®ï¼ç½ç»ååºå­æ´»ï¼ç¦»çº¿å·¥ä½ï¼å®¡æ¥å¶åº¦è·¯çº¿ï¼äº§çäºæä¹çæ°å­ä¿¡æ¯ã

Filecoinæ¯ä¸ä¸ªå»ä¸­å¿åå­å¨ç½ç»ï¼å®è®©äºå­å¨åæä¸ä¸ªç®æ³å¸åºãè¿ä¸ªå¸åºè¿è¡å¨æçæ¬å°åè®®ä»¤çï¼ä¹å«åFilecoinï¼çåºåé¾ãåºåé¾ä¸­çæ·å·¥å¯ä»¥éè¿ä¸ºå®¢æ·æä¾å­å¨æ¥è·åFilecoin,ç¸åçï¼å®¢æ·å¯ä»¥éè¿è±è´¹Filecoinæ¥éä½£æ·å·¥æ¥å­å¨æååæ°æ®ãåæ¯ç¹å¸ä¸æ ·ï¼Filecoinçæ·å·¥ä»¬ä¸ºäºå·¨å¤§çå¥å±èç«äºå¼æåºåï¼ä½Filecoinçæç¿æçæ¯ä¸å­å¨æ´»è·åº¦ææ¯ä¾çï¼è¿ç´æ¥ä¸ºå®¢æ·æä¾äºæç¨çæå¡ï¼ä¸åæ¯ç¹å¸çæç¿ä»æ¯ä¸ºäºç»´æ¤åºåé¾çå±è¯ï¼ãè¿ç§æ¹å¼ç»æ·å·¥ä»¬åé äºå¼ºå¤§çæ¿å±ï¼æ¿å±ä»ä»¬å°½å¯è½å¤çèéå­å¨å¨å¹¶ä¸æå®ä»¬åºç§ç»å®¢æ·ä»¬ãFilecoinåè®®å°è¿äºèéçèµæºç¼ç»æä¸çä¸ä»»ä½äººé½è½ä¾èµçèªæä¿®å¤çå­å¨ç½ç»ãè¯¥ç½ç»éè¿å¤å¶ååæ£åå®¹å®ç°é²æ£æ§ï¼åæ¶èªå¨æ£æµåä¿®å¤å¯æ¬å¤±è´¥ãå®¢æ·å¯ä»¥éæ©å¤å¶åæ°æ¥é²èä¸åçå¨èæ¨¡åãè¯¥åè®®çäºå­å¨ç½ç»è¿æä¾äºå®å¨æ§ï¼å ä¸ºåå®¹æ¯å¨å®¢æ·ç«¯ç«¯å¯¹ç«¯å å¯çï¼èå­å¨æä¾èä¸è½è®¿é®å°è§£å¯ç§é¥ãFilecoinçææä½ä¸ºå¯ä»¥ä¸ºä»»ä½æ°æ®æä¾å­å¨åºç¡æ¶æçIPFSæä¸é¢çæ¿å±å±ãå®å¯¹å»ä¸­å¿åæ°æ®ï¼æå»ºåè¿è¡åå¸å¼åºç¨ç¨åºï¼ä»¥åå®ç°æºè½ååé½éå¸¸æç¨ã

è¿äºå·¥ä½åæ¬ä»¥ä¸å é¨ååå®¹ï¼

ï¼a)ä»ç»Filecoinç½ç»ï¼æ¦è¿°è¿ä¸ªåè®®ä»¥åè¯¦ç»ä»ç»å ä¸ªç»ä»¶ã

ï¼b)å½¢å¼åå»ä¸­å¿åå­å¨ç½ç»ï¼DSN)çè®¡åä¸åå®¹ï¼ç¶åæå»ºFilecoinä½ä¸ºä¸ä¸ªDSNã

ï¼c)ä»ç»ä¸ç§å«âå¤å¶è¯æâçæ°åå­å¨è¯ææ¹æ¡ï¼å®åè®¸éªè¯ä»»ä½æ°æ®å¯æ¬é½å­å¨å¨ç©çä¸ç¬ç«çå­å¨å¨ä¸­ã

ï¼d)ä»ç»ä¸ç§æ°åçä»¥åºäºé¡ºåºå¤å¶åå­å¨ä½ä¸ºæ¿å±åº¦éçæç¨å·¥ä½å±è¯ã

ï¼e)å½¢æå¯éªè¯å¸åºï¼å¹¶æå»ºä¸¤ä¸ªå¸åºï¼å­å¨å¸åºåæ£ç´¢å¸åºï¼å®ä»¬åå«ç®¡çå¦ä½ä»Filecoinåå¥åè¯»åæ°æ®ã

ï¼f)è®¨è®ºç¨ä¾ï¼å¦ä½è¿æ¥å¶ä»ç³»ç»ä»¥åå¦ä½ä½¿ç¨è¿ä¸ªåè®®ã

*æ³¨æï¼Filecoinæ¯ä¸é¡¹æ­£å¨è¿è¡çå·¥ä½ãæ­£å¨è¿è¡ç§¯æçç ç©¶ï¼æ¬æçæ°çæ¬å°ä¼åºç°å¨https://filecoin.io*

*å¦ææè§åå»ºè®®ï¼è¯·éè¿research@filecoin.ioä¸æä»¬èç³»*



## **1 ä»ç»**

Filecoinæ¯ä¸ç§åè®®ä»¤çï¼å¶åºåé¾è¿è¡å¨ä¸ç§å«âæ¶ç©ºè¯æâçæ°åè¯ææºå¶ä¸ï¼å¶åºåè¢«å­å¨æ°æ®çç¿å·¥ææãFilecoinåè®®éè¿ä¸ä¾èµäºåä¸ªåè°åçç¬ç«å­å¨æä¾åç»æçç½ç»æä¾æ°æ®å­å¨æå¡åæ°æ®æ£ç´¢æå¡ãå¶ä¸­ï¼

1. ç¨æ·ä¸ºæ°æ®å­å¨åæ£ç´¢æ¯ä»ä»¤ç
2. å­å¨ç¿å·¥éè¿æä¾å­å¨ç©ºé´èµåä»¤ç
3. æ£ç´¢ç¿å·¥éè¿æä¾æ°æ®æå¡èµåä»¤ç



### **1.1 åºæ¬ç»ä»¶**

Filecoinåè®®ç±åä¸ªæ°åç»ä»¶ç»æ

1. å»ä¸­å¿åå­å¨ç½ç»(Decentralized Storage Network)(DSN)ï¼æä»¬æä¾ä¸ä¸ªç±æä¾å­å¨åæ£ç´¢æå¡çç¬ç«æå¡åç½ç»çæ½è±¡ï¼å¨ç¬¬äºèï¼ãæ¥çæä»¬æåºäºFilecoinåè®®ä½ä¸ºæ¿å±ï¼å¯å®¡è®¡åå¯éªè¯çDSNæå»ºï¼å¨ç¬¬4èï¼ã
2. æ°åçå­å¨è¯æï¼æä»¬æåºäºä¸¤ç§æ°åå­å¨è¯ææ¹æ¡ï¼å¨ç¬¬ä¸èï¼ï¼ï¼1ï¼âå¤å¶è¯æâï¼Proof-of-Replicationï¼åè®¸å­å¨æä¾åè¯ææ°æ®å·²ç»è¢«å¤å¶å°äºä»èªå·±å¯ä¸ä¸ç¨çç©çå­å¨è®¾å¤ä¸äºãæ§è¡å¯ä¸çç©çå¯æ¬ä½¿éªè¯èè½å¤æ£æ¥è¯æèæ¯å¦ä¸å­å¨å°å¤ä¸ªæ°æ®å¯æ¬éå¤æ·è´å°åä¸å­å¨ç©ºé´ãï¼2ï¼âæ¶ç©ºè¯æâï¼Proof-of-Spacetimeï¼åè®¸å­å¨æä¾åè¯æå¨æå®çæ¶é´åå­å¨äºæäºæ°æ®ã
3. å¯éªè¯å¸åºï¼æä»¬å°å­å¨è¯·æ±åæ£ç´¢éæ±ä½ä¸ºä¸¤ä¸ªç±Filecoinç½ç»æä½çå»ä¸­å¿åå¯éªè¯å¸åºçè®¢åè¿è¡å»ºæ¨¡ï¼å¨ç¬¬äºèï¼ãéªè¯å¸åºç¡®ä¿äºå½ä¸ä¸ªæå¡è¢«æ­£ç¡®æä¾çæ¶åè½æ§è¡ä»æ¬¾ãæä»¬ä»ç»äºå®¢æ·åç¿å·¥å¯ä»¥åå«æäº¤å­å¨åæ£ç´¢è®¢åçå­å¨å¸åºåæ£ç´¢å¸åºã
4. ææçå·¥ä½éè¯æï¼Proof-of-Workï¼ï¼æä»¬å±ç¤ºäºå¦ä½åºäºâæ¶ç©ºè¯æâæ¥æå»ºææçå·¥ä½éè¯ææ¥åºç¨äºå±è¯åè®®ãæ·å·¥ä»¬ä¸éè¦è±è´¹ä¸å¿è¦çè®¡ç®æ¥æç¿ï¼ä½ç¸åçå¿é¡»å­å¨æ°æ®äºç½ç»ä¸­ã

### **1.2 åè®®æ¦è¿°**

- Filecoinåè®®æ¯æå»ºäºåºåé¾åå¸¦æåçä»¤ççå»ä¸­å¿åå­å¨ç½ç»ãå®¢æ·è±è´¹ä»¤çæ¥å­å¨æ°æ®åæ£ç´¢æ°æ®ï¼èç¿å·¥ä»¬éè¿æä¾å­å¨åæ£ç´¢æ°æ®æ¥èµåä»¤çã
- Filecoin DSN åå«éè¿ä¸¤ä¸ªå¯éªè¯å¸åºæ¥å¤çå­å¨è¯·æ±åæ£ç´¢è¯·æ±ï¼å­å¨å¸åºåæ£ç´¢å¸åºãå®¢æ·åç¿å·¥è®¾å®æè¦æ±æå¡çä»·æ ¼åæä¾æå¡çä»·æ ¼ï¼å¹¶å°å¶è®¢åæäº¤å°å¸åºã
- å¸åºç±Filecoinç½ç»æ¥æä½ï¼è¯¥ç½ç»éç¨äºâæ¶ç©ºè¯æâåâå¤å¶è¯æâæ¥ç¡®ä¿ç¿å·¥ä»¬æ­£ç¡®å­å¨ä»ä»¬æ¿è¯ºå­å¨çæ°æ®ã
- æåï¼ç¿å·¥ä»¬è½åä¸å°åºåé¾æ°åºåçé»é ãç¿å·¥å¯¹ä¸ä¸ä¸ªåºåé¾çå½±åä¸ä»ä»¬å¨ç½ç»ä¸­å½åå­å¨ä½¿ç¨éææ­£æ¯ã

*å¾ä¸æ¯ä½¿ç¨äºæ¯è¯­å®ä¹ä¹åçFilecoinåè®®èå¾ï¼ä¼´éçä¸ä¸ªä¾å­å¦å¾2æç¤º*

![filecoin-å¾1.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bd972e4cc5.png)

![filecoin-å¾2.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bd98383339.png)

### **1.3 è®ºæç»ç»**

æ¬æçå¶ä½é¨åå®æå¦ä¸ï¼æä»¬å¨ç¬¬äºèä¸­ä»ç»äºå¯¹ä¸ä¸ªçè®ºä¸çDNSæ¹æ¡çå®ä¹åéæ±ãå¨ç¬¬ä¸èä¸­æä»¬å®ä¹åä»ç»æä»¬çâå¤å¶è¯æâåâæ¶ç©ºè¯æâåè®®ï¼ä»¥åFilecoinå°å¶ç¨äºå å¯å°éªè¯æ°æ®æç§è®¢åçè¦æ±è¢«æç»­ä¸æ­çå­å¨ãç¬¬åèæè¿°äºFilecoin DSNçå·ä½å®ä¾ï¼æè¿°äºæ°æ®ç»æï¼åè®®ï¼ä»¥ååä¸èä¹é´çäº¤äºãç¬¬5èå®ä¹åæè¿°å¯éªè¯å¸åºçæ¦å¿µï¼è¿æå­å¨å¸åºåæ£ç´¢å¸åºçå®æ½ãç¬¬6èæè¿°äºä½¿ç¨âæ¶ç©ºè¯æâåè®®è¿è¡æ¼ç¤ºï¼å¹¶ä¸è¯ä¼°ç¿å·¥å¯¹ç½ç»çè´¡ç®ï¼è¿å¯¹æ©å±åºåé¾åååºåå¥å±æ¯å¿è¦çãç¬¬7èç®è¦ä»ç»äºFilecoinä¸­çæºè½åçº¦ãå¨ç¬¬8èä¸­è®¨è®ºäºæªæ¥çå·¥ä½ä½ä¸ºç»æã



## **2 å»ä¸­å¿åå­å¨ç½ç»çå®ä¹**

æä»¬ä»ç»äºå»ä¸­å¿åå­å¨ç½ç»ï¼DSNï¼æ¹æ¡çæ¦å¿µãDSNsèéäºç±å¤ä¸ªç¬ç«å­å¨æä¾åæä¾çå­å¨ï¼å¹¶ä¸è½èªæåè°çæä¾å­å¨æ°æ®åæ£ç´¢æ°æ®æå¡ç»å®¢æ·ãè¿ç§åè°æ¯å»ä¸­å¿åçãæ éä¿¡ä»»çï¼éè¿åè®®çåè°ä¸ä¸ªä½åä¸èè½å®æ½éªè¯æä½ï¼ç³»ç»å¯ä»¥è·å¾å®å¨æ§æä½ãDSNså¯ä»¥ä½¿ç¨ä¸åçåè°ç­ç¥ï¼åæ¬æå åº­åè®®ï¼gossipåè®®æèCRDTsï¼è¿åå³äºç³»ç»çéæ±ãå¨åé¢ï¼ç¬¬åèï¼æä»¬æä¾Filecoin DSNççä¸ä¸ªæå»ºã

**å®ä¹ 2.1**

*DSNæ¹æ¡(Î )æ¯ç±å­å¨æä¾ååå®¢æ·è¿è¡çåè®®åç»: (Put, Get, Manage)*

- Put(data) â key: å®¢æ·ç«¯æ§è¡Putåè®®ä»¥å°æ°æ®å­å¨å¨å¯ä¸çæ è¯ç¬¦ç§é¥ä¸ã

- Get(key) â data: å®¢æ·ç«¯æ§è¡Getåè®®æ¥æ£ç´¢å½åä½¿ç¨ç§é¥å­å¨çæ°æ®ã

- Manage(): ç½ç»çåä¸èéè¿ç®¡çåè®®æ¥åè°ï¼æ§å¶å¯ç¨çå­å¨ï¼å®¡æ ¸æä¾åæä¾çæå¡å¹¶ä¿®å¤å¯è½çæéã

  ç®¡çåè®®ç±å­å¨æä¾åæ¥è¿è¡ï¼å¹¶ä¸ç»å¸¸ä¸å®¢æ·æèå®¡è®¡ç½ç»ç»åï¼å¨ç®¡çåè®®ä¾èµåºåé¾çæåµä¸ï¼æä»¬è®¤ä¸ºç¿å·¥æ¯å®¡è®¡äººåï¼å ä¸ºä»ä»¬éªè¯ååè°å­å¨æä¾åï¼ã

DSNæ¹æ¡(Î )å¿é¡»ä¿è¯æ°æ®çå®æ´æ§åå¯æ¢å¤æ§ï¼å¹¶ä¸è½å¤å®¹å¿å¨åé¢ç« èä¸­æå®ä¹çç®¡çåå­å¨æéã

### **2.1 æéå®¹é**

#### **2.1.1 ç®¡çæé**

æä»¬å°ç®¡çæéå®ä¹ä¸ºç®¡çåè®®çåä¸èå¼èµ·çæå åº­æéãä¸ä¸ªDSNæ¹æ¡ä¾èµäºå®çåºç¡ç®¡çåè®®çæéå®¹éãè¿åæéå®¹éçç®¡çæéåè®¾å¯è½ä¼å½±åç³»ç»çæ´»è·åº¦åå®å¨æ§ã

ä¾å¦ï¼èèä¸ä¸ªDSNæ¹æ¡ï¼å¶ä¸­ç®¡çåè®®è¦æ±æå åº­å®¹éæ¥å®¡æ ¸å­å¨æä¾åãå¨è¿æ ·çåè®®ä¸­ï¼ç½ç»æ¶éå°æ¥èªå­å¨æä¾åçå­å¨è¯æï¼å¹¶è¿è¡æå åº­å®¹éå¯¹è¿äºè¯æçæææ§è¾¾æå±è¯ãå¦æå¨æ»å±nä¸ªèç¹ä¸­ï¼æå åº­å®¹éæå¤å®¹å¿fä¸ªæéèç¹ãé£ä¹æä»¬çDSNå¯ä»¥å®¹å¿f<n/2 ä¸ªæéèç¹ãå¨è¿åäºè¿äºåè®¾çæåµä¸ï¼å®¡è®¡ä¸å°±è¦ååºå¦¥åã

#### **2.1.2 å­å¨æé**

æä»¬å°å­å¨æéå®ä½ä¸ºæå åº­æéï¼é»æ­¢äºå®¢æ·æ£ç´¢æ°æ®ãä¾å¦å­å¨ç¿å·¥ä¸¢å¤±äºä»ä»¬çæ°æ®ï¼æ£ç´¢ç¿å·¥åæ­¢äºä»ä»¬çæå¡ãä¸ä¸ªæåçPutæä½çå®ä¹æ¯(f,m),æ¢æ¯å®çè¾å¥æ°æ®è¢«å­å¨å¨mä¸ªç¬ç«çå­å¨æä¾åï¼æ»å±ænä¸ªï¼ä¸­ï¼å¹¶ä¸å®å¯ä»¥å®¹å¿æå¤fä¸ªæå åº­å­å¨æä¾åãåæ°fåmåå³äºåè®®çå®ç°ãåè®®è®¾è®¡èå¯ä»¥åºå®fåmï¼æèçç»ç¨æ·èªå·±éæ©ãå°Put(data) æ©å±ä¸ºPut(data,f,m)ãå¦ææå°äºfä¸ªæéå­å¨æä¾åï¼åå¯¹å­å¨æ°æ®çGetæä½æ¯æåçã

ä¾å¦ï¼èèä¸ä¸ªç®åçæ¹æ¡ãå®çPutåè®®è®¾è®¡ä¸ºæ¯ä¸ªå­å¨æä¾åå­å¨ææçæ°æ®ãå¨è¿ä¸ªæ¹æ¡éï¼m=n,å¹¶ä¸f=m-1ãä½æ»æ¯f=m-1åï¼ä¸ä¸å®çï¼æäºæ¹æ¡å¯è½éç¨å¯æ¦é¤å¼è®¾è®¡ï¼å¶ä¸­æ¯ä¸ªå­å¨ä¾åºåå­å¨æ°æ®çç¹å®é¨åï¼è¿æ ·ä½¿å¾mä¸ªå­å¨ä¾åºåä¸­çxä¸ªéè¦æ£ç´¢æ°æ®ï¼å¨è¿ç§åºæ¯ä¸f=m-xã

### **2.2 å±æ§**

æä»¬æè¿°DSNæ¹æ¡æå¿é¡»çä¸¤ä¸ªå±æ§ï¼ç¶åæåºFilecoin DSNæéè¦çå¶ä»å±æ§ã

#### **2.2.1 æ°æ®å®æ´æ§**

è¯¥å±æ§è¦æ±æ²¡ææéçå¯¹æAå¯ä»¥è®©å®¢æ·å¨Getæä½ç»æçæ¶åæ¥åè¢«æ´æ¹æèä¼ªé çæ°æ®ã

**å®ä¹ 2.2**

*ä¸ä¸ªDSNæ¹æ¡(Î )æä¾äºæ°æ®å®æ´æ§ï¼å¦ææä»»ææåçPutæä½å°æ°æ®dè®¾ç½®å¨é®kä¸ï¼é£ä¸å­å¨è®¡ç®æéçå¯¹æAè½ä½¿å¾å®¢æ·å¨å¯¹é®kæ§è¡Getæä½ç»æçæ¶åæ¥ådâï¼å¶ä¸­d' ä¸ç­äºdã*

#### **2.2.2 å¯æ¢å¤æ§**

è¯¥å±æ§æ»¡è¶³äºä»¥ä¸è¦æ±ï¼èèå°æä»¬çÎ çå®¹éåè®¾ï¼å¦ææäºæ°æ®å·²ç»æåå­å¨å¨Î å¹¶ä¸å­å¨æä¾åç»§ç»­éµå¾ªåè®®ï¼é£ä¹å®¢æ·æç»è½å¤æ£ç´¢å°æ°æ®ã

**å®ä¹2.3**

*ä¸ä¸ªDSNæ¹æ¡(Î )æä¾äºå¯æ¢å¤æ§ï¼å¦ææä»»ææåçPutæä½å°æ°æ®dè®¾ç½®å¨é®kä¸ï¼ä¸å­å¨ä¸ä¸ªæåçå®¢æ·Getæä½éè¿å¯¹é®Kæ§è¡æ£ç´¢å¾å°æ°æ®ï¼è¿ä¸ªå®ä¹å¹¶ä¸ä¿è¯æ¯æ¬¡Getæä½é½è½æåï¼å¦ææ¯æ¬¡Getæä½æç»é½è½è¿åæ°æ®ï¼é£è¿ä¸ªæ¹æ¡æ¯å¬å¹³çï¼ã*

### **2.3 å¶ä»å±æ§**

DSNså¯ä»¥æä¾ç¹å®äºå¶åºç¨ç¨åºçå¶ä»å±æ§ãæä»¬å®ä¹äºFilecoin DSNæéè¦çä¸ä¸ªå³é®å±æ§ï¼å¬å¼å¯éªè¯æ§ãå¯å®¡æ¥æ§åæ¿å±å¼å®¹æ§ã

**å®ä¹2.4**

*ä¸ä¸ªDSNæ¹æ¡(Î )æ¯å¬å¼å¯éªè¯çï¼å¯¹äºæ¯ä¸ªæåçPutæä½ï¼å­å¨ç½ç»çä¾åºåå¯ä»¥çææ°æ®å½åæ­£å¨è¢«å­å¨çè¯æãè¿ä¸ªå­å¨è¯æå¿é¡»è¯´æä»»ä½åªç¥éé®ä½å¹¶ä¸è½è®¿é®é®æå¯¹åºçæ°æ®çææéªè¯èã*

**å®ä¹2.5**

*ä¸ä¸ªDSNæ¹æ¡(Î )æ¯å¯å®¡æ¥çï¼å¦æå®äº§çäºå¯éªè¯çæä½è½¨è¿¹ï¼å¹¶ä¸å¨æªæ¥è½è¢«æ£æ¥å¨æ­£ç¡®çæ¶é´ä¸æ°æ®ç¡®å®è¢«å­å¨äºã*

**å®ä¹2.6**

*ä¸ä¸ªDSNæ¹æ¡(Î )æ¯æ¿å±å¯å¼å®¹çï¼å¦æå­å¨æä¾åç±äºæåæä¾äºå­å¨æ°æ®åæ£ç´¢æ°æ®çæå¡èè·å¾æ¿å±ï¼æèå ä¸ºä½å¼èå¾å°æ©ç½ãææå­å¨æä¾åçä¼å¿ç­ç¥æ¯å­å¨æ°æ®ã*



## **3 å¤å¶è¯æä¸æ¶ç©ºè¯æ**

å¨Filecoinåè®®ä¸­ï¼å­å¨ä¾åºåå¿é¡»è®©ä»ä»¬çå®¢æ·ç¸ä¿¡ï¼å®¢æ·æä»è´¹çæ°æ®å·²ç»è¢«ä»ä»¬å­å¨ãå¨å®è·µä¸­ï¼å­å¨ä¾åºåå°çæ"å­å¨è¯æ"(POS)ç»åºåé¾ç½ç»ï¼æå®¢æ·èªå·±ï¼æ¥éªè¯ã

å¨æ¬èä¸­ï¼æä»¬ä»ç»åæ¦è¿°å¨Filecoinä¸­æä½¿ç¨çâå¤å¶è¯æân (PoRep)åâæ¶ç©ºè¯æâ(PoSt)å®ç°æ¹æ¡ã

### **3.1 å¨æº**

å­å¨è¯æ(POS)æ¹æ¡ç±»ä¼¼âæ°æ®æææ§éªè¯â(PDP)[2]åâå¯æ¢å¤æ§è¯æâ(PoR)[3,4]æ¹æ¡ãå®åè®¸ä¸ä¸ªå°æ°æ®å¤åç»æå¡å¨ï¼æ¢è¯æäººP)çç¨æ·ï¼æ¢éªè¯èV)å¯ä»¥åå¤æ£æ¥æå¡å¨æ¯å¦ä¾ç¶å­å¨æ°æ®Dãç¨æ·å¯ä»¥ç¨æ¯ä¸è½½æ°æ®è¿é«æçæ¹å¼æ¥éªè¯ä»å¤åç»æå¡å¨çæ°æ®çå®æ´æ§ãæå¡å¨éè¿å¯¹ä¸ç»éæºæ°æ®åè¿è¡éæ ·åæäº¤å°éæ°æ®æ¥çææ¥æçæ¦çè¯æä½ä¸ºç»ç¨æ·çååºåè®®ã

PDPåPoRæ¹æ¡åªä¿è¯äºè¯æäººå¨ååºçæ¶åæ¥ææäºæ°æ®ãå¨Filecoinä¸­ï¼æä»¬éè¦æ´å¼ºå¤§çä¿éè½é»æ­¢ä½æ¶ç¿å·¥å©ç¨ä¸æä¾å­å¨å´è·å¾å¥å±çä¸ç§ç±»åæ»å»ï¼å¥³å·«æ»å»(Sybil attack)ãå¤åæ»å»(outsourcing attacks)ãä»£æ»å»ï¼ï¼generation attacksï¼ã

- å¥³å·«æ»å»ï¼ä½æ¶ç¿å·¥å¯è½éè¿åå»ºå¤ä¸ªå¥³å·«èº«ä»½åè£ç©çå­å¨å¾å¤å¯æ¬ï¼ä»ä¸­è·åå¥å±ï¼ï¼ä½å®éä¸åªå­å¨ä¸æ¬¡ã
- å¤åæ»å»ï¼ä¾èµäºå¯ä»¥å¿«éä»å¶ä»å­å¨æä¾åè·åæ°æ®ï¼ä½æ¶ç¿å·¥å¯è½æ¿è¯ºè½å­å¨æ¯ä»ä»¬å®éç©çå­å¨å®¹éæ´å¤§çæ°æ®ã
- ä»£æ»å»ï¼ä½æ¶ç¿å·¥å¯è½å®£ç§°è¦å­å¨å¤§éçæ°æ®ï¼ç¸åçä»ä»¬ä½¿ç¨å°ç¨åºææå°çæè¯·æ±ãå¦æè¿ä¸ªå°ç¨åºå°äºæå®£ç§°è¦å­å¨çæ°æ®ï¼åä½æ¶ç¿å·¥å¨Filecoinè·ååºåå¥å±çå¯è½æ§å¢å äºï¼å ä¸ºè¿æ¯åç¿å·¥å½åä½¿ç¨éææ­£æ¯çã

### **3.2 å¤å¶è¯æ**

âå¤å¶è¯æâ(PoRep)æ¯ä¸ä¸ªæ°åçå­å¨è¯æãå®åè®¸æå¡å¨ï¼æ¢è¯æäººP)è¯´æç¨æ·ï¼æ¢éªè¯èVï¼ä¸äºæ°æ®Då·²è¢«å¤å¶å°å®å¯ä¸çä¸ç¨ç©çå­å¨ä¸äºãæä»¬çæ¹æ¡æ¯ä¸ç§äº¤äºå¼åè®®ãå½è¯æäººP:ï¼aï¼æ¿è¯ºå­å¨ææ°æ®Dçnä¸ªä¸åçå¯æ¬ï¼ç¬ç«ç©çå¯æ¬ï¼ï¼ç¶åï¼bï¼éè¿ååºåè®®æ¥è¯´æéªè¯èVï¼Pç¡®å®å·²ç»å­å¨äºæ¯ä¸ªå¯æ¬ãæ®æä»¬æç¥PoRepæ¹åäºPDPåPoRæ¹æ¡ï¼é»æ­¢äºå¥³å·«æ»å»ãå¤åæ»å»ãä»£æ»å»ã

*è¯·æ³¨æï¼æ­£å¼çå®ä¹ï¼å®çå±æ§æè¿°ï¼åPoRepçæ·±å¥ç ç©¶ï¼æä»¬åèäº[5]*

**å®ä¹3.1**

*PoRepæ¹æ¡ä½¿å¾ææçè¯æäººPè½è¯´æéªè¯èVï¼æ°æ®Dçä¸ä¸ªPä¸ç¨çç¬ç«ç©çå¯æ¬Rå·²è¢«å­å¨ãPoRepåè®®å¶ç¹å¾æ¯å¤é¡¹å¼æ¶é´ç®æ³çåç»ï¼* *(Setup, Prove, Verify)*

- PoRep.Setup(1Î», D) â R, SP , SV , å¶ä¸­SPåSVæ¯PåVçç¹ç¹æ¹æ¡çè®¾ç½®åéï¼Î»æ¯ä¸ä¸ªå®å¨åæ°ãPoRep.Setupç¨æ¥çæå¯æ¬Rï¼å¹¶ä¸ç»äºPåVå¿è¦çä¿¡æ¯æ¥è¿è¡PoRep.Prove å PoRep.Verifyãä¸äºæ¹æ¡å¯è½è¦æ±è¯æäººæèæ¯æäºå¨çç¬¬ä¸æ¹å»è¿ç®PoRep.Setupã
- PoRep.Prove(SP , R, c) â Ïcï¼å¶ä¸­cæ¯éªè¯äººVååºçéæºéªè¯ï¼ Ïcæ¯è¯æäººäº§ççå¯ä»¥è®¿é®æ°æ®Dçç¹å®å¯æ¬Rçè¯æãPoRep.Proveç±Pï¼è¯æäººï¼ä¸ºVï¼éªè¯èï¼è¿è¡çæÏcã
- PoRep.Verify(Sv , c, Ïc) â {0, 1}ï¼ç¨æ¥æ£æµè¯ææ¯å¦æ¯æ­£ç¡®ãPoRep.Verifyç±Vè¿è¡åè¯´æVç¸ä¿¡På·²ç»å­å¨äºRã

### **3.3 æ¶ç©ºè¯æ**

å­å¨è¯ææ¹æ¡åè®¸ç¨æ·è¯·æ±æ£æ¥å­å¨æä¾åå½æ¶æ¯å¦å·²ç»å­å¨äºå¤åæ°æ®ãæä»¬å¦ä½ä½¿ç¨PoSæ¹æ¡æ¥è¯ææ°æ®å¨ä¸æ®µæ¶é´åé½å·²ç»è¢«å­å¨äºï¼è¿ä¸ªé®é¢çä¸ä¸ªèªç¶çç­æ¡æ¯è¦æ±ç¨æ·éå¤ï¼ä¾å¦æ¯åéï¼å¯¹å­å¨æä¾ååéè¯·æ±ãç¶èæ¯æ¬¡äº¤äºæéè¦çéä¿¡å¤æåº¦ä¼æä¸ºç±»ä¼¼Filecoinè¿æ ·çç³»ç»çç¶é¢ï¼å ä¸ºå­å¨æä¾åè¢«è¦æ±æäº¤ä»ä»¬çè¯æå°åºåé¾ç½ç»ã

ä¸ºäºåç­è¿ä¸ªé®é¢ï¼æä»¬ä»ç»äºæ°çè¯æï¼âæ¶ç©ºè¯æâï¼å®å¯ä»¥è®©éªè¯èæ£æ¥å­å¨æä¾åæ¯å¦å¨ä¸æ®µæ¶é´åå­å¨äºä»/å¥¹çå¤åæ°æ®ãè¿å¯¹æä¾åçç´æ¥è¦æ±æ¯ï¼ï¼1ï¼çæé¡ºåºçå­å¨è¯æï¼å¨æä»¬çä¾å­éæ¯âå¤å¶è¯æâï¼æ¥ä½ä¸ºç¡®å®æ¶é´çä¸ç§æ¹æ³ ï¼2ï¼ç»æéå½æ§è¡æ¥çæç®åçè¯æã

**å®ä¹3.2**

*ï¼æ¶ç©ºè¯æï¼Postæ¹æ¡ä½¿å¾ææçè¯æäººPè½å¤è¯´æä¸ä¸ªéªè¯èVç¸ä¿¡På¨ä¸æ®µæ¶é´åå·²ç»å­å¨äºä¸äºæ°æ®DãPoStå¶ç¹å¾æ¯å¤é¡¹å¼æ¶é´ç®æ³çåç»ï¼ *(Setup, Prove, Verify)*

- PoSt.Setup(1Î»,D)->Spï¼Svï¼å¶ä¸­SPåSVæ¯PåVçç¹ç¹æ¹æ¡çè®¾ç½®åéï¼Î»æ¯ä¸ä¸ªå®å¨åæ°ãPoSt.Setupç¨æ¥ç»äºPåVå¿è¦çä¿¡æ¯æ¥è¿è¡PoSt.Prove å PoSt.Proveãä¸äºæ¹æ¡å¯è½è¦æ±è¯æäººæèæ¯æäºå¨çç¬¬ä¸æ¹å»è¿ç®PoSt.Setupã
- PoSt.Prove(Sp , D, c, t) â Ïcï¼å¶ä¸­cæ¯éªè¯äººVååºçéæºéªè¯ï¼ Ïcæ¯è¯æäººå¨ä¸æ®µæ¶é´åå¯ä»¥è®¿é®æ°æ®Dççè¯æãPoSt.Proveç±Pï¼è¯æäººï¼ä¸ºVï¼éªè¯èï¼è¿è¡çæÏcã
- PoSt.Verify(Sv , c, t, Ïc) â {0, 1}ï¼ç¨æ¥æ£æµè¯ææ¯å¦æ¯æ­£ç¡®ãPoSt.Verifyç±Vè¿è¡åè¯´æVç¸ä¿¡På¨ä¸æ®µæ¶é´åå·²ç»å­å¨äºRã

### **3.4 PoRepåPoStå®éåºç¨**

â    æä»¬æå´è¶£çæ¯PoRepåPoStçåºç¨æå»ºï¼å¯ä»¥åºç¨äºç°å­ç³»ç»å¹¶ä¸ä¸ä¾èµäºå¯ä¿¡ä»»çç¬¬ä¸æ¹æèç¡¬ä»¶ãæä»¬ç»åºäºPoRepçä¸ä¸ªæå»ºï¼è¯·åè§åºäºå¯å°çå¤å¶è¯æ[5]),å®å¨Setupè¿ç¨ä¸­éè¦ä¸ä¸ªéå¸¸æ¢çé¡ºåºè®¡ç®å¯å°çæ§è¡æ¥çæå¯æ¬ãPoRepåPoStçåè®®èå¾å¨å¾4ç»åºï¼Postçåºå±æºå¶çè¯ææ­¥éª¤å¨å¾3ä¸­ã

![filecoin-å¾3.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bda2a16ed6.png)

![filecoin-å¾4.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bda34b254b.png)

#### **3.4.1 æå»ºå å¯åºå**

**é²ç¢°ææ£å** æä»¬ä½¿ç¨ä¸ä¸ªé²ç¢°æçæ£åå½æ°ï¼CRH : {0, 1}* â {0, 1}O(Î»)ãæä»¬è¿ä½¿ç¨äºä¸ä¸ªé²ç¢°ææ£åå½æ°MerkleCRHï¼å®å°å­ç¬¦ä¸²åå²æå¤ä¸ªé¨åï¼æé åºäºåæ å¹¶éå½åºç¨CRHï¼ç¶åè¾åºæ æ ¹ã

**zk-SNARKs** æä»¬çPoRepåPoStçå®éå®ç°ä¾èµäºé¶ç¥è¯è¯æçç®æ´çéäº¤äºå¼ç¥è¯è®ºï¼zk-SNARKs)[6,7,8]ãå ä¸ºzk-SNARKsæ¯ç®æ´çï¼æä»¥è¯æå¾ç­å¹¶ä¸å¾å®¹æéªè¯ãæ´æ­£å¼å°ï¼è®©Lä¸ºNPè¯­è¨ï¼Cä¸ºLçå³ç­çµè·¯ãåä¿¡ä»»çä¸æ¹è¿è¡ä¸æ¬¡è®¾ç½®é¶æ®µï¼äº§çä¸¤ä¸ªå¬å±å¯é¥ï¼è¯æå¯é¥pkåéªè¯å¯é¥vkãè¯æå¯é¥pkä½¿ä»»ä½ï¼ä¸å¯ä¿¡ï¼çè¯æèé½è½äº§çè¯æè¯æÏï¼å¯¹äºå¥¹éæ©çå®ä¾xï¼xâLãéäº¤äºå¼è¯æÏæ¯é¶ç¥è¯åç¥è¯è¯æãä»»ä½äººé½å¯ä»¥ä½¿ç¨éªè¯å¯é¥vkéªè¯è¯æÏãç¹å«æ¯zk-SNARKçè¯æå¯å¬å¼éªè¯ï¼ä»»ä½äººé½å¯ä»¥éªè¯Ïï¼èä¸ä¸äº§çÏçè¯æèè¿è¡äº¤äºãè¯æÏå·ææå®çå¤§å°ï¼å¹¶ä¸å¯ä»¥å¨| x |ä¸­çº¿æ§çæ¶é´åéªè¯ã

å¯æ»¡è¶³çµè·¯å¯é ï¼çzk-SNARKsæ¯å¤é¡¹å¼æ¶é´ç®æ³çåç»ï¼*(KeyGen, Prove, Verify)*

- KeyGen(1Î»,C)â (pk, vk)ï¼è¾å¥å®å¨åæ°Î»åçµè·¯Cï¼KeyGenäº§çæ¦çæ ·æ¬pkåvkãè¿ä¸¤ä¸ªé®ä½ä¸ºå¬å±åæ°åå¸ï¼å¯å¨Lcä¸ç¨äºè¯æ/éªè¯ã
- Prove(pk, x, w) â Ï å¨è¾å¥pkãè¾å¥xåNPå£°æwçè§è¯æ¶ï¼è¯æäººä¸ºè¯­å¥xâLCè¾åºéäº¤äºå¼è¯æÏã
- Verify(vk, x, Ï) â {0, 1} å½è¾å¥vkï¼è¾å¥xåè¯æ Ïï¼éªè¯èéªè¯è¾åº1æ¯å¦æ»¡è¶³x â LCã

æä»¬å»ºè®®æå´è¶£çè¯»èåç[6ï¼7ï¼8]å¯¹zk-SNARKç³»ç»çæ­£å¼ä»ç»åå®ç°ã

éå¸¸èè¨è¿äºç³»ç»è¦æ±KeyGenæ¯ç±å¯ä¿¡ä»»åä¸æ¹æ¥è¿è¡ãåæ°çå¯æ©å±è®¡ç®å®æ´æ§åéç§ï¼SCIPï¼ç³»ç»[9]å±ç¤ºäºå¨åè®¾ä¿¡ä»»çåæä¸ï¼ä¸ä¸ªæå¸æçæ¹åæ¥é¿åè¿ä¸ªåå§åæ­¥éª¤ã

#### **3.4.2 å¯å°æä½**

å¯å°æä½çä½ç¨æ¯ï¼1ï¼éè¿è¦æ±è¯æäººå­å¨å¯¹äºä»ä»¬å¬é¥å¯ä¸çæ°æ®Dçä¼ªéæºæåå¯æ¬æä¸ºç©ççç¬ç«å¤å¶ï¼ä½¿å¾æäº¤å­å¨nä¸ªå¯æ¬å¯¼è´äºnä¸ªç¬ç«çç£çç©ºé´ï¼å æ­¤æ¯å¯æ¬å­å¨å¤§å°çnåï¼åï¼2ï¼å¨PoRep.Setupçæ¶åå¼ºå¶çæå¯æ¬å®è´¨ä¸ä¼è±è´¹æ¯é¢è®¡ååºè¯·æ±æ´å¤çæ¶é´ãæå³å¯å°æä½çæ´æ­£å¼å®ä¹ï¼è¯·åè§[5]ãä¸è¿°çæä½å¯ä»¥ç¨SealÏAESâ256æ¥å®ç°ï¼å¹¶ä¸Ïä½¿å¾SealÏAESâ256éè¦è±è´¹æ¯è¯å®çè¯æéªè¯è¯·æ±åºåå¤10-100åçæ¶é´ãè¯·æ³¨æï¼å¯¹Ïçéæ©æ¯éè¦çï¼è¿ä½¿å¾è¿è¡SealÏBCæ¯è¯æäººéæºè®¿é®Rè±è´¹æ´å¤æ¶é´æ¾å¾æ´å ææ¾ã

#### **3.4.3 PoRepæå»ºå®è·µ**

è¿èæè¿°PoRepåè®®çæå»ºå¹¶å·²å¨å¾4åæ¬äºä¸ä¸ªç®ååè®®èå¾ãå®ç°åä¼åçç»èç¥è¿äºã

**åå»ºå¯æ¬** Setupç®æ³éè¿å¯å°ç®æ³çæä¸ä¸ªå¯æ¬å¹¶æä¾è¯æãè¯æäººçæå¯æ¬å¹¶å°è¾åºï¼ä¸åæ¬R)åéç»éªè¯èã

Setup

- inputs:

  â prover key pair (pkP ,skP )

  â prover SEAL key pkSEAL

  â data D

- outputs: replica R, Merkle root rt of R, proof ÏSEAL

**è¯æå­å¨** Proveç®æ³çæå¯æ¬çå­å¨è¯æãè¯æäººæ¶å°æ¥èªéªè¯èçéæºææï¼è¦æ±å¨æ æ ¹ä¸ºrtçMerkleæ Rä¸­ç¡®è®¤ç¹å®çå¶å­èç¹Rcãè¯æäººçæå³äºä»æ æ ¹rtå°å¶å­Rcçè·¯å¾çç¥è¯è¯æã

Prove

- inputs:

  â prover Proof-of-Storage key pkPOS

  â replica R

  â random challenge c

- outputs: a proof ÏPOS

**éªè¯è¯æ** Verifyç®æ³æ£æ¥æç»çæºæ°æ®çåå¸åå¯æ¬çMerkleæ æ ¹çå­å¨è¯æçæææ§ãè¯ææ¯å¬å¼å¯éªè¯çï¼åå¸å¼ç³»ç»çèç¹ç»´æ¤è´¦æ¬åå¯¹ç¹å®æ°æ®æå´è¶£çå¯ä»¥éªè¯è¿äºè¯æã

Verify

- inputs:

  â prover public key, pkP

  â verifier SEAL and POS keys vkSEAL, vkPOS

  â hash of data D, hD

  â Merkle root of replica R, rt

  â random challenge, c

  â tuple of proofs, (ÏSEAL, ÏPOS)

- outputs: bit b, equals 1 if proofs are valid

#### **3.4.4 PoStæå»ºå®è·µ**

è¿èæè¿°Poståè®®çæå»ºå¹¶å·²å¨å¾4ä¸­åå«äºä¸ä¸ªç®ååè®®èå¾ãå®ç°åä¼åçç»èç¥è¿äºã

SetupåVerifyç®æ³åä¸é¢çPoRepæå»ºæ¯ä¸æ ·çãæä»¥æä»¬è¿éå¼æè¿°Proveã

**ç©ºé´åç©ºé´çè¯æ** Proveç®æ³ä¸ºå¯æ¬çæâæ¶ç©ºè¯æâãè¯æäººæ¥æ¶å°æ¥èªäºéªè¯èçéæºææï¼å¹¶é¡ºåºçæâå¤å¶è¯æâï¼ç¶åä½¿ç¨è¯æçè¾åºä½ä¸ºå¦ä¸ä¸ªè¾å¥åæå®tæ¬¡è¿­ä»£ï¼è§å¾3ï¼ã

Prove

- inputs:

  â prover PoSt key pkPOST

  â replica R

  â random challenge c

  â time parameter t

- outputs: a proof ÏPOST

### **3.5 å¨Filecoinçåºç¨**

Filecoinåè®®éç¨âæ¶ç©ºè¯æâæ¥å®¡æ ¸ç¿å·¥æä¾çå­å¨ãä¸ºäºå¨Filecoinä¸­ä½¿ç¨PoStï¼å ä¸ºæ²¡ææå®çéªè¯èï¼å¹¶ä¸æä»¬æ³è¦ä»»ä½ç½ç»æåé½è½å¤éªè¯ï¼æä»¥æä»¬ææ¹æ¡æ¹æäºéäº¤äºå¼ãå ä¸ºæä»¬çéªè¯èæ¯å¨public-coinæ¨¡åä¸­è¿è¡ï¼æä»¥æä»¬å¯ä»¥ä»åºåé¾ä¸­æåéæºæ§æ¥ååºææã



## **4 Filecoin:DSNæå»º**

Filecoin DSNæ¯å¯åçº§ï¼å¯å¬å¼éªè¯åæ¿å±å¼è®¾è®¡çå»ä¸­å¿åçå­å¨ç½ç»ãå®¢æ·ä¸ºäºå­å¨æ°æ®åæ£ç´¢æ°æ®åç¿å·¥ç½ç»ä»è´¹ãç¿å·¥æä¾ç£çç©ºé´åå¸¦å®½æ¥èµåè´¹ç¨ãç¿å·¥åªæå¨ç½ç»å¯ä»¥å®¡è®¡ä»ä»¬çæå¡æ¯å¦æ­£ç¡®æä¾çæ¶åæä¼æ¶å°ä»æ¬¾ã

å¨æ¬èä¸­ï¼æä»¬ä»ç»åºäºDSNçå®ä¹åâæ¶ç©ºè¯æâçFilecoin DSNæå»ºã

### **4.1 ç¯å¢**

#### **4.1.1 åä¸è**

ä»»ä½ç¨æ·é½å¯ä»¥ä½ä¸ºå®¢æ·ç«¯ãå­å¨ç¿å·¥å/ææ£ç´¢ç¿å·¥æ¥åä¸Filecoinç½ç»ã

- å®¢æ·å¨DSNä¸­éè¿PutåGetè¯·æ±å­å¨æ°æ®æèæ£ç´¢æ°æ®ï¼å¹¶ä¸ºæ­¤ä»è´¹ã
- å­å¨ç¿å·¥ä¸ºç½ç»æä¾æ°æ®å­å¨ãå­å¨ç¿å·¥éè¿æä¾ä»ä»¬çç£çç©ºé´åååºPugè¯·æ±æ¥åä¸Filecoinãè¦æ³æä¸ºå­å¨ç¿å·¥ï¼ç¨æ·å¿é¡»ç¨ä¸å­å¨ç©ºé´ææ¯ä¾çæµæ¼åæ¥æµæ¼ãå­å¨ç¿å·¥éè¿å¨ç¹å®æ¶é´å­å¨æ°æ®æ¥ååºç¨æ·çPutè¯·æ±ãå­å¨ç¿å·¥çæ"æ¶ç©ºè¯æâï¼å¹¶æäº¤å°åºåé¾ç½ç»æ¥è¯æä»ä»¬å¨ç¹å®æ¶é´åå­å¨äºæ°æ®ãåå¦è¯ææ ææä¸¢å¤±ï¼é£å­å¨ç¿å·¥å°è¢«ç½æ²¡ä»ä»¬çé¨åæµæ¼åãå­å¨ç¿å·¥ä¹æèµæ ¼æåæ°åºåï¼å¦ææå°äºæ°åï¼ç¿å·¥å°±è½å¾å°æåæ°åçå¥å±ååå«å¨åä¸­çäº¤æè´¹ã
- æ£ç´¢ç¿å·¥ä¸ºç½ç»æä¾æ°æ®æ£ç´¢æå¡ãæ£ç´¢ç¿å·¥éè¿æä¾ç¨æ·Getè¯·æ±æéè¦çæ°æ®æ¥åä¸Filecoinãåå­å¨ç¿å·¥ä¸åï¼ä»ä»¬ä¸éè¦æµæ¼ï¼ä¸éè¦æäº¤å­å¨æ°æ®ï¼ä¸éè¦æä¾å­å¨è¯æãå­å¨ç¿å·¥å¯ä»¥åæ¶ä¹ä½ä¸ºæ£ç´¢ç¿å·¥åä¸ç½ç»ãæ£ç´¢ç¿å·¥å¯ä»¥ç´æ¥ä»å®¢æ·æèä»æ£ç´¢å¸åºèµåæ¶çã

#### **4.1.2 ç½ç» N**

æä»¬å°è¿è¡ææè¿è¡Filecoinå¨èç¹çææç¨æ·ç»åä¸ºä¸ä¸ªæ½è±¡å®ä½ï¼ç½ç»ãè¯¥ç½ç»ä½ä¸ºè¿è¡ç®¡çåè®®çä¸­ä»ãç®åçè¯´ï¼Filecoinåºåé¾çæ¯ä¸ªæ°å,å¨èç¹ç®¡çå¯ç¨çå­å¨ï¼éªè¯æµæ¼åï¼å®¡æ ¸å­å¨è¯æå·²ç»ä¿®å¤å¯è½çæéã

#### **4.1.3 è´¦æ¬**

æä»¬çåè®®éç¨äºåºäºè´¦æ¬çè´§å¸ãä¸ºäºéç¨ï¼æä»¬ç§°ä¹ä¸ºâè´¦æ¬â Lãå¨ä»»ä½ç»å®çæ¶é´t(ç§°ä¸ºæ¶æ)ï¼ææçç¨æ·é½è½è®¿é®Ltãå½å¤äºæ¶ætçæ¶åï¼è´¦æ¬æ¯è¿½å å¼çï¼å®ç±é¡ºåºçä¸ç³»åäº¤æç»æãFilecoin DSNåè®®å¯ä»¥å¨è¿è¡éªè¯Filecoinçè¯æçä»»æè´¦æ¬ä¸å®ç°ãå¨ç¬¬å­èä¸­æä»¬å±ç¤ºäºæä»¬å¦ä½åºäºæç¨çå·¥ä½æå»ºä¸ä¸ªè´¦æ¬ã

#### **4.1.4 å¸åº**

å­å¨éæ±åä¾ç»ç»æäºä¸¤ä¸ªFilecoinå¸åºï¼å­å¨å¸åºåæ£ç´¢å¸åºãè¿ä¸¤ä¸ªå¸åºæ¯ä¸¤ä¸ªå»ä¸­å¿åäº¤ææï¼è¿ä¼å¨ç¬¬5èä¸­è¯¦ç»è§£éãç®èè¨ä¹ï¼å®¢æ·åç¿å·¥ä»¬éè¿ååèªçå¸åºæäº¤è®¢åæ¥è®¾å®ä»ä»¬è¯·æ±æå¡æèæä¾æå¡çè®¢åçä»·æ ¼ãäº¤ææä¸ºå®¢æ·åç¿å·¥ä»¬æä¾äºä¸ç§æ¹å¼æ¥æ¥çå¹éåºä»·å¹¶æ§è¡è®¢åãå¦ææå¡è¯·æ±è¢«æåæ»¡è¶³ï¼éè¿è¿è¡ç®¡çåè®®ï¼ç½ç»ä¿è¯äºç¿å·¥å¾å°æ¥é¬ï¼å®¢æ·å°è¢«æ¶åè´¹ç¨ã

### **4.2 æ°æ®ç»æ**

**ç¢ç** ç¢çæ¯å®¢æ·å¨DSNæå­å¨æ°æ®çä¸é¨åãä¾å¦ï¼æ°æ®æ¯å¯ä»¥ä»»æååä¸ºè®¸å¤çï¼å¹¶ä¸æ¯çé½å¯ä»¥æä¸åéåçå­å¨ç¿å·¥æ¥å­å¨ã

**æåº** æåºæ¯å­æ¬¾ç¿å·¥åç½ç»æä¾çä¸äºç£çç©ºé´ãç¿å·¥å°å®¢æ·æ°æ®çç¢çå­å¨å°æåºï¼å¹¶éè¿ä»ä»¬çæå¡æ¥èµåä»¤çãä¸ºäºå­å¨ç¢çï¼ç¿å·¥ä»¬å¿é¡»åç½ç»æµæ¼ä»ä»¬çæåºã

**åéè¡¨** åéè¡¨æ¯ä¸ä¸ªæ°æ®ç»æï¼å¯ä»¥è·è¸ªç¢çåå¶åéçæåºãåéè¡¨å¨è´¦æ¬çæ¯ä¸ªåºåé½ä¼æ´æ°ï¼Merkleæ ¹å­å¨å¨ææ°çåºåä¸­ãå¨å®è·µä¸­ï¼è¯¥è¡¨ç¨æ¥ä¿æDSNçç¶æï¼å®ä½¿å¾å¨è¯æéªè¯çè¿ç¨ä¸­å¯ä»¥å¿«éæ¥æ¾ãæ´è¯¦ç»çä¿¡æ¯ï¼è¯·åçå¾5ã

**è®¢å** è®¢åæ¯è¯·æ±ææä¾æå¡çæåå£°æãå®¢æ·åå¸åºæäº¤ææ è®¢åæ¥è¯·æ±æå¡ï¼å­å¨æ°æ®çå­å¨å¸åºåæ£ç´¢æ°æ®çæ£ç´¢å¸åºï¼ï¼ç¿å·¥ä»¬æäº¤æ¥ä»·è®¢åæ¥æä¾æå¡ãè®¢åæ°æ®ç»æå¦å¾10æç¤ºãå¸åºåè®®å°å¨ç¬¬5èè¯¦ç»ä»ç»ã

**è®¢åç°¿** è®¢åç°¿æ¯è®¢åçéåãè¯·æ¥çç¬¬5.2.2èçå­å¨å¸åºè®¢åç°¿åç¬¬5.3.3èçæ£ç´¢å¸åºè®¢åç°¿ã

**æµæ¼** æµæ¼æ¯åç½ç»æä¾å­å¨ï¼ç¹å«æ¯æåºï¼çæ¿è¯ºãå­å¨ç¿å·¥å¿é¡»å°æµæ¼æäº¤ç»è´¦æ¬ï¼ä»¥ä¾¿è½å¨å­å¨å¸åºæ¥åè®¢åãæµæ¼åæ¬äºæµæ¼æåºçå¤§å°åå­å¨ç¿å·¥çå­æ¾çæµæ¼åã

![filecoin-å¾5.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599be6f7887cd.png)

### **4.3 åè®®**

å¨æ¬èä¸­ï¼æä»¬éè¿æè¿°å®¢æ·ç«¯ãç¿å·¥åç½ç»æ§è¡çæä½æ¥æ¦è¿°Filecoin DSNãæä»¬å¨å¾7ä¸­ä»ç»äºGetåPutåè®®çæ¹æ³ï¼åå¨å¾8ä¸­çç®¡çåè®®ãä¸ä¸ªåè®®æ§è¡çç¤ºä¾å¦å¾6æç¤ºãå¾1æ¯Filecoinåè®®æ¦è§ã

#### **4.3.1 å®¢æ·çå½å¨æ**

æä»¬ç»åºå®¢æ·çå½å¨æçæ¦è§ï¼å¨ç¬¬5èæ¥ä¸æ¥çåè®®ä¼åæ·±åº¦çè§£æã

1. Putï¼å®¢æ·å°æ°æ®å­å¨äºFilecoin

   å®¢æ·å¯ä»¥éè¿åFilecoinä¸­çç¿å·¥æ¯ä»ä»¤çæ¥å­å¨ä»ä»¬çæ°æ®ãç¬¬5.2èè¯¦ç»ä»ç»äºPutåè®®ã

   å®¢æ·éè¿Putåè®®åå­å¨å¸åºçè®¢åç°¿æäº¤ææ è®¢åãå½æ¾å°ç¿å·¥çå¹éæ¥ä»·è®¢åçæ¶åï¼å®¢æ·ä¼å°æ°æ®åç»ç¿å·¥ï¼å¹¶ä¸åæ¹ç­¾ç½²äº¤æè®¢åå°å¶æäº¤å°å­å¨å¸åºè®¢åç°¿ãå®¢æ·å¯ä»¥éè¿æäº¤çè®¢åæ¥å³å®æ°æ®çç©çå¯æ¬æ°éãæ´é«çåä½åº¦ä¼ææ´é«çå­å¨æéå®¹å¿åº¦ã

2. Getï¼å®¢æ·ä»Filecoinæ£ç´¢æ°æ®ãå®¢æ·å¯ä»¥éè¿ä½¿ç¨Filecoin ä»¤çåå­å¨ç¿å·¥ä»è´¹æ¥æ£ç´¢ä»»ä½æ°æ®ãGetåè®®å¨ç¬¬5.3èæè¯¦ç»æè¿°ãå®¢æ·ç«¯éè¿æ§è¡Getåè®®åæ£ç´¢å¸åºè®¢åç°¿æäº¤ææ è®¢åãå½æ¾å°å¹éçç¿å·¥æ¥ä»·è®¢ååï¼å®¢æ·ä¼æ¶å°æ¥èªç¿å·¥çç¢çãå½æ¶å°çæ¶åï¼åæ¹å¯¹äº¤æè®¢åè¿è¡ç­¾åæäº¤å°åºåé¾æ¥ç¡®è®¤äº¤ææåã

#### 4.3.2 æç¿å¨æï¼å¯¹äºå­å¨ç¿å·¥ï¼

æä»¬ç»åºä¸ä¸ªéæ­£å¼çæç¿å¨ææ¦è¿°ã

1. æµæ¼ï¼å­å¨ç¿å·¥åç½ç»æµæ¼å­å¨ã

   å­å¨ç¿å·¥éè¿å¨æµæ¼äº¤æä¸­å­æ¾æµæ¼åæ¥ä¿è¯ååºåé¾æä¾å­å¨ãéè¿ **Manage.PledgeSector** ï¼æµæ¼åè¢«æµæ¼ä¸æ®µæéæ¯ä¸ºäºæä¾æå¡ï¼å¦æç¿å·¥ä¸ºä»ä»¬ææ¿è¯ºæäº¤å­å¨çæ°æ®çæå­å¨è¯æï¼æµæ¼åå°±ä¼è¿è¿ç»ä»ä»¬ãå¦æå­å¨è¯æå¤±è´¥äºï¼ä¸å®æ°éçæµæ¼åå°±ä¼æå¤±ãä»ä»¬è®¾å®ä»·æ ¼å¹¶åå¸åºè®¢åç°¿æäº¤æ¥ä»·è®¢åï¼ä¸æ¦æµæ¼äº¤æå¨åºåé¾ä¸­åºç°ï¼ç¿å·¥å°±è½å¨å­å¨å¸åºä¸­æä¾ä»ä»¬çå­å¨ã

   **Manage.PledgeSector** â¢ inputs:

   â current allocation table allocTable

   â pledge request pledge

   â¢ outputs: allocTable'

2. æ¥æ¶è®¢åï¼å­å¨ç¿å·¥ä»å­å¨å¸åºè·åå­å¨è¯·æ±ãä»ä»¬è®¾å®ä»·æ ¼å¹¶éå³è¿**Put.AddOrders**åå¸åºè®¢åç°¿æäº¤æ¥ä»·è®¢åï¼ä¸æ¦æµæ¼äº¤æåºç°å¨åºåé¾ä¸­ï¼ç¿å·¥å°±è½å¨å­å¨å¸åºä¸­æä¾ä»ä»¬çå­å¨ã

   Put.AddOrders

   â¢ inputs: list of orders O1..On

   â¢ outputs: bit b, equals 1 if successful

   éè¿**Put.MatchOrders** æ¥æ£æ¥æ¯å¦åå®¢æ·çæ¥ä»·è®¢åå¹éä¸è´ã

   Put.MatchOrders

   â¢ inputs:

   â the current Storage Market OrderBook â query order to match Oq

   â¢ outputs: matching orders O1..On

   ä¸å®è®¢åå¹éï¼å®¢æ·ä¼è®²ä»ä»¬çæ°æ®åç»å­å¨ç¿å·¥ãå­å¨ç¿å·¥æ¥æ¶å°æ°æ®çæ¶åï¼è¿è¡**Put.ReceivePiece** ãæ°æ®è¢«æ¥æ¶å®ä¹åï¼ç¿å·¥åå®¢æ·ç­¾æ¶è®¢åå¹¶å°å¶æäº¤å°åºåé¾ã

   Put.ReceivePiece

   â¢ inputs: â signing key for Mj

   â current orderbook OrderBook

   â ask order Oask

   â bid order Obid

   â piece p

   â¢ outputs: deal order Odeal signed by Ci and Mj

3. å¯å°ï¼å­å¨ç¿å·¥ä¸ºæªæ¥çè¯æåå¤ç¢çã

   å­å¨ç¿å·¥çå­å¨ååä¸ºæåºï¼æ¯ä¸ªæåºåæ¬äºåéç»ç¿å·¥çç¢çãç½ç»éè¿åéè¡¨æ¥è·è¸ªæ¯ä¸ªå­å¨ç¿å·¥çæåºãå½å­å¨ç¿å·¥çæåºå¡«æ»¡äºï¼è¿ä¸ªæåºå°±è¢«å¯å°èµ·æ¥ãå¯å°æ¯ä¸ç§ç¼æ¢çé¡ºåºæä½ãå°æåºä¸­çæ°æ®è½¬æ¢æä¸ºå¯æ¬ï¼ç¶åå°æ°æ®çå¯ä¸ç©çå¯æ¬ä¸å­å¨ç¿å·¥çå¬é¥ç¸å³èãå¨âå¤å¶è¯æâæé´å¯å°å¼å¿é¡»çæä½ãå¦ä¸æè¿°å¨ç¬¬3.4èã

   **Manage.SealSector** â¢ inputs:

   â miner public/private key pair M

   â sector index j

   â allocation table allocTable

   â¢ outputs: a proof ÏSEAL, a root hash rt

4. è¯æï¼å­å¨ç¿å·¥è¯æä»ä»¬æ­£å¨å­å¨ææ¿è¯ºçç¢çï¼æ°æ®ï¼ã

   å½å­å¨ç¿å·¥åéæ°æ®æ¶ï¼å¿é¡»éå¤çæå¤å¶è¯æä»¥ä¿è¯ä»ä»¬æ­£å¨å­å¨æ°æ®ï¼æå³æ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åçç¬¬3èï¼è¯æåå¸å¨åºåé¾ä¸­ï¼å¹¶ç±ç½ç»æ¥éªè¯ã

   **Manage.ProveSector**

   â¢ inputs:

   â miner public/private key pair M

   â sector index j

   â challenge c

   â¢ outputs: a proof ÏPOS

#### **4.3.3 æç¿å¨æï¼å¯¹äºæ£ç´¢ç¿å·¥ï¼**

æä»¬ç»åºä¸ä¸ªéæ­£å¼çæç¿å¨ææ¦è¿°ã

1. æ¶å°è®¢åï¼æ£ç´¢ç¿å·¥ä»æ£ç´¢å¸åºå¾å°è·åæ°æ®çè¯·æ±ã

   æ£ç´¢ç¿å·¥è®¾ç½®ä»·æ ¼å¹¶åå¸åºè®¢åç°¿å¢å æ¥ä»·è®¢åï¼å¹¶éè¿åç½ç»åéæ¥ä»·åæ¥æä¾æ°æ®ã

   **Get.AddOrders**

   â¢ inputs: list of orders O1..On

   â¢ outputs: none

   ç¶åæ£ç´¢ç¿å·¥æ£æ¥æ¯å¦ä¸å®¢æ·çæ¥ä»·è®¢åå¹éä¸è´ã

   **Get.MatchOrders**

   â¢ inputs:

   â the current Retrieval Market OrderBook

   â query order to match Oq

   â¢ outputs: matching orders O1..On

2. åéï¼æ£ç´¢ç¿å·¥åå®¢æ·åéæ°æ®ç¢çã

   ä¸æ¦è®¢åå¹éï¼æ£ç´¢ç¿å·¥å°±å°æ°æ®åéç»å®¢æ·ï¼ç¬¬5.3èæè¯¦ç»æè¿°ï¼ãå½æ°æ®è¢«æ¥æ¶å®æï¼ç¿å·¥åå®¢æ·å°±ç­¾ç½²äº¤æå¹¶æäº¤å°åºåé¾ã

   **Put.SendPieces**

   â¢ inputs: â an ask order Oask

   â a bid order Obid

   â a piece p

   â¢ outputs: a deal order Odeal signed by Mi

#### **4.3.4 ç½ç»å¨æ**

æä»¬ç»åºä¸ä¸ªéæ­£å¼çç½ç»æä½æ¦è¿°ã

1.åéï¼ç½ç»å°å®¢æ·çç¢çåéç»å­å¨ç¿å·¥çæåºã

å®¢æ·éè¿åå­å¨å¸åºæäº¤æ¥ä»·è®¢åæ¥å¯å¨Putåè®®ãå½è¯¢ä»·ååæ¥ä»·åå¹éçæ¶åï¼åä¸çåæ¹å±åæ¿è¯ºäº¤æå¹¶åå¸åºæäº¤æäº¤çè®¢åãæ­¤æ¶ï¼ç½ç»å°æ°æ®åéç»ç¿å·¥ï¼å¹¶å°å¶è®°å½å°åéè¡¨ä¸­ã

**Manage.AssignOrders**

â¢ inputs:

â deal orders O1deal..Ondeal

â allocation table allocTable

â¢ outputs: updated allocation table allocTable'

1. ä¿®å¤ï¼ç½ç»åç°æéå¹¶è¯å¾è¿è¡ä¿®å¤

   ææçå­å¨åéå¯¹äºç½ç»ä¸­çæ¯ä¸ªåä¸èé½æ¯å¬å¼çãå¯¹äºæ¯ä¸ªåï¼ç½ç»ä¼æ£æ¥æ¯ä¸ªéè¦çè¯æé½å­å¨ï¼æ£æ¥å®ä»¬æ¯å¦ææï¼å æ­¤éåè¡å¨ï¼

   **Manage.RepairOrders**

   â¢ inputs:

   â current time t

   â current ledger L

   â table of storage allocations allocTable

   â¢ outputs: orders to repair O1deal..Ondeal, updated allocation table allocTable

2. - å¦ææä»»ä½è¯æçä¸¢å¤±ææ æï¼ç½ç»ä¼éè¿æ£é¤é¨åæµæ¼åçæ¹å¼æ¥æ©ç½å­å¨ç¿å·¥ã
   - å¦æå¤§éè¯æä¸¢å¤±ææ æï¼ç±ç³»ç»åæ°Îfaultå®ä¹ï¼ï¼ç½ç»ä¼è®¤å®å­å¨ç¿å·¥å­å¨æéï¼å°è®¢åè®¾å®ä¸ºå¤±è´¥ï¼å¹¶ä¸ºåæ ·çæ°æ®å¼å¥æ°è®¢åè¿å¥å¸åºã
   - å¦æææå­å¨è¯¥æ°æ®çå­å¨ç¿å·¥é½ææéï¼åè¯¥æ°æ®ä¸¢å¤±ï¼å®¢æ·è·å¾éæ¬¾ã

![filecoin-å¾6.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bea53caabe.png)

### **4.4 æä¿åè¦æ±**

ä»¥ä¸æ¯Filecoin DSNå¦ä½å®ç°å®æ´æ§ãå¯æ£ç´¢æ§ï¼å¬å¼å¯éªè¯æ§åæ¿å±å¼å®¹æ§ã

- å®ç°å®æ´æ§ æ°æ®ç¢çä»¥å å¯åå¸å½åãä¸ä¸ªPutè¯·æ±åï¼å®¢æ·åªéè¦å­å¨åå¸å³å¯éè¿Getæä½æ¥æ£ç´¢æ°æ®ï¼å¹¶å¯ä»¥éªè¯æ¶å°çæ°æ®çå®æ´æ§ã
- å®ç°å¯æ¢å¤æ§ å¨Putè¯·æ±ä¸­ï¼å®¢æ·æå®å¯æ¬å å­åä»£ç æææ¦é¤ç±»åãåè®¾ç»å®çmä¸ªå­å¨ç¿å·¥å­å¨æ°æ®ï¼å¯ä»¥å®¹å¿æå¤fä¸ªæéï¼åè¯¥æ¹å¼æ¯(f, m)-tolerantå­å¨ãéè¿å¨ä¸åçå­å¨æä¾åå­å¨æ°æ®ï¼å®¢æ·ç«¯å¯ä»¥å¢å æ¢å¤çæºä¼ï¼ä»¥é²å­å¨ç¿å·¥ä¸çº¿æèæ¶å¤±ã
- å®ç°å¬å¼å¯éªè¯åå¯å®¡æ ¸æ§ å­å¨ç¿å·¥éè¦æäº¤å¶å­å¨ (ÏSEAL, ÏPOST)çè¯æå°åºåé¾ãç½ç»ä¸­çä»»æç¨æ·é½å¯ä»¥å¨ä¸è®¿é®å¤åæ°æ®çæåµä¸éªè¯è¿äºè¯æçæææ§ãå¦å¤ç±äºè¿äºè¯æé½æ¯å­å¨å¨åºåé¾ä¸çï¼æä»¥æä½çè¿¹å¯ä»¥éæ¶å®¡æ ¸ã
- å®ç°æ¿å±å¼å®¹æ§ ä¸æ­£å¼çè¯´ï¼ç¿å·¥éè¿æä¾å­å¨èè·å¾å¥å±ãå½ç¿å·¥æ¿è¯ºå­å¨ä¸äºæ°æ®çæ¶åï¼å®ä»¬éè¦çæè¯æãå¦æç¿å·¥å¿½ç¥äºè¯æå°±ä¼è¢«æ©ç½ï¼éè¿æå¤±é¨åæµæ¼åï¼ï¼å¹¶ä¸ä¸ä¼æ¶å°å­å¨çå¥å±ã
- å®ç°ä¿å¯æ§ å¦æå®¢æ·å¸æä»ä»¬çæ°æ®è¢«éç§å­å¨ï¼é£å®¢æ·å¿é¡»å¨æ°æ®æäº¤å°ç½ç»ä¹ååè¿è¡å å¯ã

![filecoin-å¾7.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bea72170c6.png)

![filecoin-å¾8.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bea7ef1f4c.png)



## **5 Filecoinçå­å¨åæ£ç´¢å¸åº**

Filecoinæä¸¤ä¸ªå¸åºï¼å­å¨å¸åºåæ£ç´¢å¸åºãè¿ä¸¤ä¸ªå¸åºæåæ ·çç»æä½ä¸åçè®¾è®¡ãå­å¨å¸åºåè®¸å®¢æ·ä¸ºç¿å·¥å­å¨æ°æ®èä»è´¹ãæ£ç´¢æ°æ®åè®¸å®¢æ·ä¸ºç¿å·¥æä¾æ£ç´¢æ°æ®ä¼ éèä»è´¹ãå¨è¿ä¸¤ç§æåµä¸ï¼å®¢æ·åç¿å·¥å¯ä»¥è®¾ç½®æ¥ä»·åéæ±ä»·æ ¼æèæ¥åå½åæ¥ä»·ãè¿ä¸ªäº¤ææ¯ç±ç½ç»æ¥è¿è¡ç-Filecoinä¸­å¨èç¹æ¯æäººåçãç½ç»ä¿è¯ç¿å·¥å¨æä¾æå¡æ¶å¯ä»¥å¾å°å®¢æ·çå¥å±ã

> è¯»å°è¿éï¼æè§filecoinæ´åä¸ä¸ªå»ä¸­å¿åçåå¸å¼äº¤ææï¼

### **5.1 éªè¯å¸åº**

äº¤æå¸åºæ¯ä¿è¿ç¹å®åååæå¡äº¤æ¢çåè®®ãå®ä»¬ä½¿å¾ä¹°å®¶åä¹°å®¶ä¿æäº¤æãå¯¹äºæä»¬èè¨ï¼æä»¬è¦æ±äº¤ææ¯å¯éªè¯çï¼å»ä¸­å¿åç½ç»çåä¸èå¿é¡»è½å¤å¨ä¹°å®¶ååå®¶é´éªè¯äº¤æãæä»¬æåºéªè¯å¸åºçæ¦å¿µãå®æ²¡æåä¸çå®ä½æ¥ç®¡çäº¤æï¼äº¤ææ¯éæçï¼ä»»ä½äººé½å¯ä»¥å¿ååä¸ãå¯éªè¯å¸åºåè®®ä½¿å¾æå¡çäº¤æå»ä¸­å¿åï¼è®¢åç°¿çä¸è´æ§ï¼è®¢åç»ç®åæå¡çæ­£ç¡®æ§è¡æ¯å¯ä»¥ç±åä¸èç¬ç«éªè¯ç-å¨Filecoinéé¢çç¿å·¥åå¨èç¹ãæä»¬ç®åå¯éªè¯å¸åºæ¥è¿è¡ä»¥ä¸æå»ºï¼

**å®ä¹5.1**

å¯éªè¯å¸åºæ¯ä¸ä¸ªæä¸¤ä¸ªé¶æ®µçåè®®ï¼è®¢åå¹éåç»ç®ãè®¢åæ¯è´­ä¹°æå¾æèåºå®ååææå¡å®å¨æ§çè¡¨è¿°ï¼è®¢åç°¿å°±æ¯ææå¯ç¨è®¢åçåè¡¨ã![WX20180523-165539@2x](../PIC/WX20180523-165539@2x.png)

### **5.2 å­å¨å¸åº**

å­å¨å¸åºæ¯å¯éªè¯çå¸åºï¼å®åè®¸å®¢æ·ï¼å³ä¹°å®¶ï¼è¯·æ±ä»ä»¬çå­å¨æ°æ®åå­å¨ç¿å·¥ï¼å³åå®¶ï¼æä¾ä»ä»¬çå­å¨ç©ºé´ã

#### **5.2.1 éæ±cheng'fa**

æä»¬æ ¹æ®ä»¥ä¸éæ±æ¥è®¾è®¡å­å¨å¸åºåè®®ï¼

- é¾å¼è®¢åç°¿ éè¦çæ¯ï¼1ï¼å­å¨ç©ºæ ¼çè®¢åæ¯å¬å¼çï¼æä»¥æä½ä»·æ ¼çè®¢åæ»æ¯ç½ç»ç¥åçï¼å®¢æ·å¯ä»¥å¯¹è®¢åååºææºçå³å®ï¼2ï¼å®¢æ·è®¢åå¿é¡»å§ç»æäº¤ç»è®¢åï¼å³ä½¿ä»ä»¬æ¥åæä½çä»·æ ¼ï¼è¿æ ·å¸åºå°±å¯ä»¥å¯¹æ°çæ¥ä»·ååºååºãå æ­¤æä»¬è¦æ±è®¢åæ·»å å°Filecoinåºåé¾ï¼ä¸ºçæ¶è½è¢«å å¥è®¢åç°¿ã
- åä¸èæå¥èµæºï¼æä»¬è¦æ±åä¸åæ¹æ¿è¯ºä»ä»¬çèµæºä½ä¸ºé¿åæå®³çä¸ç§æ¹å¼ãä¸ºäºé¿åå­å¨ç¿å·¥ä¸æä¾æå¡åé¿åå®¢æ·æ²¡æå¯ç¨çèµéãä¸ºäºåä¸å­å¨å¸åºï¼å­å¨ç¿å·¥å¿é¡»ä¿è¯å¨DSNä¸­å­å¥ä¸å¶å­å¨éææ¯ä¾çæµæ¼åï¼æ´å¤è¯¦ç»ä¿¡æ¯è¯·åçç¬¬4.3.3èï¼ãéè¿è¿ç§æ¹å¼ï¼ç½ç»å¯ä»¥æ©ç½é£äºæ¿è¯ºå­å¨æ°æ®ä½åä¸æä¾å­å¨è¯æçå­å¨ç¿å·¥ãåæ ·çï¼å®¢æ·å¿é¡»åè®¢ååå¥ç¹å®æ°éçèµéï¼ä»¥è¿ç§æ¹å¼ä¿è¯å¨ç»ç®æé´çèµéå¯ç¨æ§ã
- æéèªå¤ç åªæå¨å­å¨ç¿å·¥åå¤è¯æä»ä»¬å·²ç»å¨çº¦å®çæ¶é´åå­å¨äºæ°æ®çæåµä¸ï¼è®¢åæä¼ç»ç®ç»ç¿å·¥ãç½ç»å¿é¡»è½å¤éªè¯è¿äºè¯æçå­å¨æ§åæ­£ç¡®æ§å¹¶ä¸å®ä»¬æ¯æç§è§åæ¥å¤ççãå¨4.3.4èæä¿®å¤é¨åçæ¦è¿°ã

#### **5.2.2 æ°æ®ç»æ**

**Putè®¢å** æä¸ç§ç±»åçè®¢åï¼åºä»·è®¢åï¼è¯¢ä»·è®¢ååäº¤æè®¢åãå­å¨ç¿å·¥åå»ºè¯¢ä»·è®¢åæ·»å å­å¨ï¼å®¢æ·åå»ºåºä»·è®¢åè¯·æ±å­å¨ï¼å½åæ¹å¯¹ä»·æ ¼è¾¾æä¸è´æ¶ï¼ä»ä»¬å±ååå»ºå¤çè®¢åãè®¢åçæ°æ®ç»æåè®¢ååæ°çæç¡®å®ä¹å¦å¾10æç¤ºã

**Putè®¢åç°¿** å­å¨å¸åºçè®¢åç°¿æ¯ç®åææåå¼æ¾çè¯¢ä»·ï¼åºä»·å äº¤æè®¢åçéåãç¨æ·å¯ä»¥éè¿Putåè®®ä¸­å®ä¹çæ¹æ³ä¸è®¢åç°¿è¿è¡äº¤äºï¼AddOrders,MatchOrderså¦å¾7æç¤ºã

è®¢åç°¿æ¯å¬å¼çï¼å¹¶ä¸æ¯ä¸ªè¯å®çç¨æ·é½æåæ ·çè®¢åç°¿è§å¾ãå¨æ¯ä¸ªå¨æï¼å¦ææ°çè®¢åäº¤æåºç°å¨æ°çåºåä¸­é£å®å°è¢«æ·»å å°è®¢åç°¿ä¸­ãå¦æè®¢åè¢«åæ¶ï¼åæ¶æèç»ç®ï¼åä¼è¢«å é¤ãè®¢åå°è¢«æ·»å å°åºåé¾ä¸­ï¼å æ­¤å¨è®¢åç°¿ä¸­å¦ææ¯ææçï¼

**å®ä¹5.2** æä»¬å®ä¹åºä»·ï¼è¯¢ä»·ï¼äº¤æè®¢åçæææ§ï¼

*ï¼ææåºä»·åï¼* ä»å®¢æ·ç«¯ååºçææ åCi,Obid:= (hsize, funds[, price,time, coll, coding])>Ci,å¦ææ»¡è¶³ä¸é¢çæ¡ä»¶å°±æ¯ææçï¼

- Ci å¨ä»ä»¬çè´¦æ·éé¢è³å°æå¯ç¨çèµé
- æ¶é´æ²¡æè¶æ¶
- è®¢åå¿é¡»ä¿è¯æå°çå­å¨å¨æï¼è¿æ¯ä¸ªç³»ç»åæ°ï¼

*ï¼ææè¯¢ä»·åï¼* ä»å­å¨ç¿å·¥ååºçè¯¢ä»·åMiï¼Oask:= (hspace, pricei)Miï¼å¦ææ»¡è¶³ä¸é¢çæ¡ä»¶å°±æ¯ææçï¼

- Miæ¿è¯ºä¸ºç¿å·¥ï¼å¹¶ä¸è´¨æ¼æä¸ä¼å¨è®¢åå¨æä¹åå°æ
- ç©ºé´å¿é¡»å°äºMiçå¯ç¨å­å¨ãMiå¨è®¢åä¸­åå»æ¿è¯ºçå­å¨ï¼å¨è¯¢ä»·è®¢ååäº¤æè®¢åä¸­ï¼

*ï¼ææäº¤æè®¢åï¼* äº¤æè®¢åOdeal:= (hask, bid,ts)Ci,Mjï¼å¦ææ»¡è¶³ä¸é¢çæ¡ä»¶å°±æ¯ææçï¼

- è¯¢é®åèè®¢åOaskï¼ä½¿å¾ï¼å®ç±Ciç­¾ç½²ï¼ä¸å¨å­å¨å¸åºçè®¢åç°¿ä¸­æ²¡æå¶ä»è®¢åæ¶åå®ã
- åºä»·è®¢ååèè®¢åObidï¼ä½¿å¾ï¼å®ç±Mjç­¾ç½²ï¼ä¸å¨å­å¨å¸åºçè®¢åç°¿ä¸­æ²¡æå¶ä»è®¢åæ¶åå®ã
- ts ä¸è½è®¾ç½®ä¸ºå°æ¥æ¶é´æèå¤ªæ©çæ¶é´

å¦æä½æ¶å®¢æ·ç«¯ä»å­å¨ç¿å·¥åºæ¶å°äºç­¾åçäº¤æï¼ä½ä»æ¥æ²¡æå°å¶æ·»å å°è®¢åç°¿ï¼é£ä¹å­å¨ç¿å·¥å°±æ æ³éæ°ä½¿ç¨è®¢åä¸­æäº¤çå­å¨ãè¿ä¸ªå­æ®µtså°±å¯ä»¥é²æ­¢è¿ç§æ»å»ï¼å ä¸ºï¼å¨è¶è¿tsä¹åï¼è®¢ååå¾æ æï¼å°æ æ³å¨è®¢åç°¿ä¸­æäº¤ã

![filecoin-å¾10.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599becba28c09.png)

#### **5.2.3 å­å¨å¸åºåè®®**

ç®èè¨ä¹ï¼å­å¨å¸åºåè®®åä¸ºä¸¤ä¸ªé¶æ®µï¼è®¢åå¹éåç»ç®ï¼

- è®¢åå¹éï¼å®¢æ·ç«¯åå­å¨ç¿å·¥éè¿æäº¤äº¤æå°åºåé¾æ¥å°è®¢åæäº¤å°è®¢åç°¿ï¼æ­¥éª¤1ï¼ãå½è®¢åå¹éæ¶ï¼å®¢æ·ç«¯åéæ°æ®ç¢çç»å­å¨ç¿å·¥ï¼åæ¹ç­¾ç½²äº¤æå¹¶æäº¤å°è®¢åç°¿ï¼æ­¥éª¤2ï¼ã
- ç»ç®ï¼ å­å¨ç¿å·¥å¯å°æåºï¼æ­¥éª¤3aï¼ï¼çææåºæåå«çç¢ççå­å¨è¯æï¼å¹¶å°å¶å®ææäº¤å°åºåé¾ï¼æ­¥éª¤3b)ï¼åæ¶ï¼å¶ä½çç½ç»å¿é¡»éªè¯ç¿å·¥çæçè¯æå¹¶ä¿®å¤å¯è½çæéï¼æ­¥éª¤3cï¼ã

å­å¨å¸åºåè®®å¨å¾11ä¸­è¯¦ç»æè¿°ã

### **5.3 æ£ç´¢å¸åº**

æ£ç´¢å¸åºåè®¸å®¢æ·ç«¯è¯·æ±æ£ç´¢ç¹å®çæ°æ®ï¼ç±æ£ç´¢ç¿å·¥æä¾è¿ä¸ªæå¡ãä¸å­å¨ç¿å·¥ä¸åï¼æ£ç´¢ç¿å·¥ä¸è¦æ±å¨ç¹å®æ¶é´å¨æåå­å¨æ°æ®æèçæå­å¨è¯æãå¨ç½ç»ä¸­çä»»ä½ç¨æ·é½å¯ä»¥æä¸ºæ£ç´¢ç¿å·¥ï¼éè¿æä¾æä¾æ£ç´¢æå¡æ¥èµåFilecoinä»¤çãæ£ç´¢ç¿å·¥å¯ä»¥ç´æ¥ä»å®¢æ·ç«¯æèæ£ç´¢æ¥æ¶æ°æ®ç¢çï¼ä¹å¯ä»¥å­å¨å®ä»¬æä¸ºå­å¨ç¿å·¥ã

#### **5.3.1 éæ±**

æä»¬æ ¹æ®ä»¥ä¸çéæ±æ¥è®¾è®¡æ£ç´¢å¸åºåè®®ï¼

- **é¾ä¸è®¢åç°¿** å®¢æ·ç«¯å¿é¡»è½å¤æ¾å°æä¾æéè¦æ°æ®ç¢ççæ£ç´¢ç¿å·¥ï¼å¹¶ä¸å¨å®ä»·ä¹åç´æ¥äº¤æ¢ãè¿æå³çè®¢åç°¿ä¸è½éè¿åºåé¾æ¥è¿è¡-å ä¸ºè¿å°æä¸ºå¿«éæ£ç´¢è¯·æ±çç¶é¢ãç¸åçï¼åä¸èåªè½çå°è®¢åç°¿çé¨åè§å¾ãæä»¬è¦æ±åæ¹ä¼ æ­èªå·±çè®¢åã
- **æ ä¿¡ä»»æ¹æ£ç´¢** å¬å¹³äº¤æ¢çä¸å¯è½æ§[10]æéæä»¬åæ¹ä¸å¯è½æ²¡æä¿¡ä»»æ¹çè¿è¡äº¤æµãå¨å­å¨å¸åºä¸­ï¼åºåé¾ç½ç»ä½ä¸ºå»ä¸­å¿åä¿¡ä»»æ¹æ¥éªè¯å­å¨ç¿å·¥æä¾çå­å¨ãå¨æ£ç´¢å¸åºï¼æ£ç´¢ç¿å·¥åå®¢æ·ç«¯å¨æ²¡æç½ç»è§è¯æäº¤æ¢æä»¶çæåµä¸æ¥äº¤æ¢æ°æ®ãæä»¬éè¿è¦æ±æ£æ¥ç¿å·¥å°æ°æ®åå²æå¤ä¸ªé¨åå¹¶å°æ¯ä¸ªé¨ååéç»å®¢æ·ç«¯æ¥è¾¾å°è¿ä¸ªç®çï¼ç¿å·¥ä»¬å°æ¶å°ä»æ¬¾ãå¨è¿ç§æ¹å¼ä¸­ï¼å¦æå®¢æ·ç«¯åæ­¢ä»æ¬¾ï¼æèç¿å·¥åæ­¢åéæ°æ®ï¼ä»»ä½ä¸æ¹é½å¯ä»¥ç»æ­¢è¿ä¸ªäº¤æãæ³¨æçæ¯ï¼æä»¬å¿é¡»æ»æ¯åè®¾æ»æ¯æä¸ä¸ªè¯å®çæ£ç´¢ç¿å·¥ã
- **æ¯ä»éé** å®¢æ·ç«¯å½æäº¤ä»æ¬¾çæ¶åå¯ä»¥ç«å³è¿è¡æ£ç´¢æå´è¶£çç¢çãæ£ç´¢ç¿å·¥åªæå¨ç¡®è®¤æ¶å°ä»æ¬¾çæ¶åæä¼æä¾æ°æ®ç¢çãéè¿å¬å±è´¦æ¬æ¥ç¡®è®¤äº¤æå¯è½ä¼æä¸ºæ£ç´¢è¯·æ±çç¶é¢ï¼æä»¥ï¼æä»¬å¿é¡»ä¾é ææçé¾ä¸æ¯ä»ãFilecoinåºåé¾å¿é¡»æ¯æå¿«éçæ¯ä»ééï¼åªæä¹è§äº¤æåä»å¨åºç°çº çº·çæåµä¸æä½¿ç¨åºåé¾ãéè¿è¿ç§æ¹å¼ï¼æ£ç´¢ç¿å·¥åå®¢æ·ç«¯å¯ä»¥å¿«éåéFilecoinåè®®æè¦æ±çå°é¢æ¯ä»ãæªæ¥çå·¥ä½éåå«äºåå»ºä¸ä¸ªå¦[11,12]æè¿°çæ¯ä»ééç½ç»ã

#### **5.3.2 æ°æ®ç»æ**

**è·åè®¢å** æ£ç´¢å¸åºä¸­åå«æä¸ç§ç±»åçè®¢åï¼å®¢æ·ç«¯åå»ºçåºä»·å Obidï¼æ£ç´¢ç¿å·¥åå»ºçè¯¢ä»·åOaskï¼åå­å¨ç¿å·¥åå®¢æ·ç«¯è¾¾æçäº¤æè®¢åOdealãè®¢åçæ°æ®ç»æå¦å¾10æç¤ºã

**è·åè®¢åç°¿** æ£ç´¢å¸åºçè®¢åç°¿æ¯ææçåå¬å¼åºä»·è®¢åï¼è¯¢ä»·è®¢ååäº¤æè®¢åçéåãä¸å­å¨å¸åºä¸åï¼æ¯ä¸ªç¨æ·æä¸åçè®¢åç°¿è¯å¾ï¼å ä¸ºè®¢åæ¯å¨ç½ç»ä¸­ä¼ æ­çï¼æ¯ä¸ªç¿å·¥åå®¢æ·ç«¯åªä¼è·è¸ªä»ä»¬ææå´è¶£çè®¢åã

![filecoin-å¾11.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bed0718a75.png)

#### **5.3.3 æ£ç´¢å¸åºåè®®**

ç®èè¨ä¹ï¼æ£ç´¢å¸åºåè®®åä¸ºä¸¤ä¸ªé¶æ®µï¼è®¢åå¹éåç»ç®ï¼

**è®¢åå¹é** å®¢æ·ç«¯åæ£ç´¢ç¿å·¥éè¿å¹¿æ­å°è®¢åæäº¤ç»è®¢åç°¿ï¼æ­¥éª¤1ï¼ãå½è®¢åå¹éçæ¶åï¼å®¢æ·ç«¯åæ£ç´¢ç¿å·¥å»ºç«å°é¢æ¯ä»ééï¼æ­¥éª¤2ï¼ã

**ç»ç®** æ£ç´¢ç¿å·¥åéå°é¨åçç¢çç»å°å®¢æ·ç«¯ï¼ç¶åå¯¹æ¯ä¸ªç¢çå®¢æ·ç«¯ä¼åç¿å·¥åéæ¶å¦¥çæ¶æ®ï¼æ­¥éª¤3ï¼ãæ£ç´¢ç¿å·¥ååºåé¾åºç¤ºæ¶æ®ä»èè·å¾å¥å±ï¼æ­¥éª¤4ï¼ã

è¯¥åè®®å¨å¾12ä¸­è¯¦ç»è§£éã

![filecoin-å¾12.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bed2f74ca0.png)

## **6 æç¨å·¥ä½å±è¯**

Filecoin DSNåè®®å¯ä»¥å¨åè®¸éªè¯çä»»ä½å±è¯åè®®ä¹ä¸å®ç°Filecoinçè¯æãå¨æ¬èä¸­ï¼æä»¬å°ç»ç®å¦ä½åºäºæç¨æ¥å¼å¯¼å±è¯åè®®ãFilecoinç¿å·¥çæâæ¶ç©ºè¯æâæ¥åä¸å±è¯ï¼èä¸æ¯æµªè´¹çPOWã

**æç¨** å¦æè®¡ç®çè¾åºå¯¹ç½ç»æ¥è¯´æ¯æä»·å¼çï¼èä¸ä»ä»æ¯ä¸ºäºä¿è¯åºåé¾çå®å¨ãæä»¬è®¤ä¸ºç¿å·¥å¨å±è¯åè®®ä¸­æä½çå·¥ä½æ¯æç¨çã

### **6.1 å¨æº**

ç¡®ä¿åºåé¾çå®å¨æ¯è³å³éè¦çãPOWçè¯ææ¹æ¡å¾å¾è¦æ±ä¸è½éå¤ä½¿ç¨çæèéè¦å¤§éçæµªè´¹è®¡ç®æè½æ¾å°é¾é¢çè§£å³æ¹æ¡ã

**ä¸å¯éå¤å©ç¨çå·¥ä½ï¼** å¤§å¤æ°æ è®¸å¯åçåºåé¾è¦æ±ç¿å·¥è§£å³ç¡¬è®¡ç®é¾é¢ï¼è­¬å¦åè½¬åå¸å½æ°ãéå¸¸æåµä¸è¿äºè§£å³æ¹æ¡é½æ¯æ ç¨çï¼é¤äºä¿æ¤ç½ç»å®å¨ä¹å¤ï¼æ²¡æå¶ä»ä»»ä½ä»·å¼ãæä»¬å¯ä»¥éæ°è®¾è®¡è®©è¿ä»¶äºæç¨åï¼

**å°è¯éå¤ä½¿ç¨çå·¥ä½**ï¼å·²ç»æå ä¸ªå°è¯éå¤ä½¿ç¨æç¿çµè·¯è¿è¡æç¨çè®¡ç®ãæäºå°è¯æ¯è¦æ±ç¿å·¥ä¸æ åçPOWåæ¶è¿è¡ä¸äºç¹æ®è®¡ç®ï¼å¶ä»ä¸äºå°è¯ç¨æç¨é®é¢æ¿ä»£POWçä¾ç¶é¾ä»¥è§£å³ãä¾å¦ï¼Primecoinéæ°ä½¿ç¨ç¿å·¥çè®¡ç®è½åæ¥æ¾å°æ°çç´ æ°ï¼ä»¥å¤ªåè¦æ±ç¿å·¥ä¸å·¥ä½è¯æä¸èµ·æ§è¡å°ç¨åºï¼åæ¶è¯ææäºæ°æ®æ­£å¨å½æ¡£ãè½ç¶è¿äºå°è¯ä¸­çå¤§å¤æ°é½æ§è¡æç¨çå·¥ä½ï¼ä½å¨è¿äºè®¡ç®ä¸­æµªè´¹çå·¥ä½éä»ç¶å¾æ®éçã

**æµªè´¹çå·¥ä½**ï¼ è§£å³é¾é¢å¨æºå¨ææ¬åè½åæ¶èæ¹é¢æ¯éå¸¸æè´µçï¼ç¹å«æ¯å¦æè¿äºé¾é¢å®å¨ä¾èµè®¡ç®è½åãå½æç¿ç®æ³ä¸è½å¹¶åçæ¶åï¼é£è§£å³é¾é¢çæ®éå ç´ å°±æ¯è®¡ç®çåçãæä»¬å¯ä»¥åå°æµªè´¹çå·¥ä½åï¼

**è¯å¾åå°æµªè´¹**ï¼çæ³æåµä¸ï¼å¤§é¨åç½ç»èµæºåºè¯¥è±è´¹å¨æç¨çå·¥ä½ä¸ãä¸äºå°è¯æ¯è¦æ±ç¿å·¥ä½¿ç¨æ´èè½çè§£å³æ¹æ¡ãä¾å¦ï¼âç©ºé´æç¿âï¼ï¼Spacemintï¼è¦æ±ç¿å·¥è´åäºç£çç©ºé´èä¸æ¯è®¡ç®ï¼è½ç¶æ´å èè½ï¼ä½ç£çç©ºé´ä¾ç¶âæµªè´¹âï¼å ä¸ºå®ä»¬è¢«éæ¶çæ°æ®å¡«æ»¡äºãå¶ä»çå°è¯æ¯ç¨åºäºæçè¯æçä¼ ç»æå åº­åè®®æ¥ä»£æ¿é¾é¢çè§£å³ï¼å¶ä¸­å©çç¸å³æ¹å¨ä¸ä¸ä¸ªåçæç¥¨ä¸å¶å¨ç³»ç»ä¸­æå æçè´§å¸ä»½é¢ææ­£æ¯ã

æä»¬çæè®¾è®¡ä¸ä¸ªåºäºç¨æ·æ°æ®å­å¨çæç¨å·¥ä½çå±è¯åè®®ã

### **6.2 Filecoin å±è¯**

#### 6.2.1 æç¿åç

**åçå®¹é** å¨æä»¬çææ¯æ¥å[13]ä¸­ï¼æä»¬æåºäºåçå®¹éï¼è¿æ¯å¯¹å¨åä¸èå¯¹åè®®ç»æçå½±åæ¹é¢éæ°æå»ºæå åº­æéçæ½è±¡ãæ¯ä¸ªåä¸èæ§å¶äºç½ç»æ»åçnä¸­çä¸é¨ååçï¼å¶ä¸­fæ¯æéèç¹æä½æ¶èç¹ææ§å¶çåçå æ¯ã

**Filecoinåç** å¨Filecoinä¸­ï¼å¨æ¶å»tï¼ç¿å·¥MiçåçPt>iæ¯Miæ»åçå­å¨ä»»å¡ãMiç Itiæ¯ç½ç»ä¸­Miæ»åççå½±åå å­ã

å¨Filecoinä¸­ï¼åçæä»¥ä¸å±æ§ï¼

- å¬å¼ï¼ç½ç»ä¸­å½åæ­£å¨ä½¿ç¨çå­å¨æ»éæ¯å¬å¼çãéè¿è¯»ååºåé¾ï¼ä»»ä½äººé½å¯ä»¥è®¡ç®æ¯ä¸ªç¿å·¥çå­å¨ä»»å¡-å æ­¤ä»»ä½äººé½å¯ä»¥è®¡ç®åºå¨ä»»ææ¶é´ç¹çæ¯ä¸ªç¿å·¥çåçåæ»åçã
- å¯å¬å¼éªè¯çï¼å¯¹äºæ¯ä¸ªå­å¨ä»»å¡ï¼ç¿å·¥é½éè¦çæâæ¶ç©ºè¯æâï¼è¯ææç»­æä¾æå¡ãéè¿è¯»ååºåé¾ï¼ä»»ä½äººé½å¯ä»¥éªè¯ç¿å·¥çåçå£°ææ¯å¦æ¯æ­£ç¡®çã
- åéï¼ å¨ä»»ææ¶é´ç¹ï¼ç¿å·¥é½å¯ä»¥éè¿å¢å æ°å¢æåºåæåºè¡¥åçæµæ¼æ¥å¢å æ°çå­å¨ãè¿æ ·ç¿å·¥å°±è½åæ´ä»ä»¬è½æä¾çåçã

#### **6.2.2 åçä¼è®¡ä¸æ¶ç©ºè¯æ**

æ¯ä¸ªâproof åºåï¼âproof æ¯ç³»ç»åæ°ï¼ï¼ç¿å·¥ä»¬é½å¿é¡»åç½ç»æäº¤âæ¶ç©ºè¯æâï¼åªæç½ç»ä¸­å¤§å¤æ°åçè®¤ä¸ºå®ä»¬æ¯ææçï¼æä¼è¢«æåæ·»å å°åºåé¾ãå¨æ¯ä¸ªåºåä¸­ï¼æ¯ä¸ªå¨èç¹ä¼æ´æ°åéè¡¨ï¼AllocTableï¼ï¼æ·»å æ°çå­å¨åéãå é¤è¿æçåæ è®°ç¼ºå°è¯æçè®°å½ãå¯ä»¥éè¿å¯¹åéè¡¨çè®°å½æ¥å¯¹ç¿å·¥Miçåçè¿è¡è®¡ç®åéªè¯ãè¿äºå¯ä»¥éè¿ä¸¤ç§æ¹å¼æ¥å®æï¼

- å¨èç¹éªè¯ï¼å¦æèç¹æ¥æå®æ´çåºåé¾è®°å½ï¼åå¯ä»¥ä»åå§åå¼å§è¿è¡ç½ç»åè®®ç´å°å½ååºåï¼è¿ä¸ªè¿ç¨ä¸­éªè¯æ¯ä¸ä¸ªåéç»Miçâæ¶ç©ºè¯æâã
- ç®åå­å¨éªè¯ï¼åè®¾è½»å®¢æ·ç«¯å¯ä»¥è®¿é®å¹¿æ­ææ°åºåçä¿¡ä»»æºãè¯·å®¢æ·ç«¯å¯ä»¥ä»ç½ç»ä¸­çèç¹è¯·æ±ï¼1ï¼Miå¨å½ååéè¡¨ä¸­çè®°å½ ï¼2ï¼è¯¥è®°å½è¢«åå«å¨ææ°åºåçç¶ææ ä¸­çMerkleè·¯å¾ï¼3ï¼ä»åä¸åå°å½ååºåçåºåå¤´ãè¿æ ·è¯·å®¢æ·ç«¯å°±å¯ä»¥å°âæ¶ç©ºè¯æâçéªè¯å§æç»ç½ç»ã

åçè®¡ç®çå®å¨æ§æ¥èªäºâæ¶ç©ºè¯æâçå®å¨æ§ãå¨è¿ä¸ªè®¾ç½®éé¢ï¼Postä¿è¯äºç¿å·¥æ æ³å¯¹ä»ä»¬æåéçå­å¨æ°éè¯´è°ãäºå®ä¸ï¼ä»ä»¬ä¸è½å£°ç§°è½å¤å­å¨è¶è¿ä»ä»¬çå­å¨ç©ºé´çæ°æ®ï¼å ä¸ºè¿ä¼è±è´¹æ¶é´æ¥è¿è¡PoSt.Setupï¼å¦å¤PoSt.Proveæ¯ä¸²è¡çè®¡ç®ï¼å¹¶ä¸è½å¹¶è¡åçå¿«éçæè¯æã

#### **6.2.3 ä½¿ç¨åçè¾¾æå±è¯**

æä»¬é¢è®¡éè¿æ©å±ç°å¨ï¼åæªæ¥ï¼çæçè¯æå±è¯åè®®æ¥å®ç°Filecoinå±è¯çå¤ç§ç­ç¥ï¼å¶ä¸­æçè¢«æ¿æ¢ä¸ºåéçå­å¨ãæä»¬é¢è®¡äºæçè¯æåè®®çæ¹è¿ï¼æä»¬æåºäºä¸ä¸ªåºäºæä»¬åæå·¥ä½ï¼ç§°ä¸ºé¢æå±è¯çæå»º[14]ãæä»¬çç­ç¥æ¯å¨æ¯ä¸è½®éä¸¾ä¸ä¸ªï¼æå¤ä¸ªï¼ç¿å·¥ï¼ä½¿å¾èµ¢å¾éä¸¾çæ¦çä¸æ¯ä¸ªç¿å·¥åéçå­å¨ææ¯ä¾ã

**é¢æå±è¯** é¢æå±è¯çåºæ¬ç´è§æ¯ç¡®å®æ§çï¼ä¸å¯é¢æµçãå¹¶å¨æ¯ä¸ªå¨æåç§å¯éä¸¾ä¸ä¸ªå°çLeaderéåãé¢æçæææ¯æ¯ä¸ªå¨æåå½éçLeaderæ¯1ï¼ä½ä¸äºå¨æåå¯è½æ0ä¸ªæèè®¸å¤çLeaderãLeaderä»¬éè¿åå»ºæ°åºåå¹¶å¹¿æ­æ¥æ©å±åºåé¾ç½ç»ãå¨æ¯ä¸ªå¨æï¼æ¯ä¸ªåºåé¾è¢«å»¶ä¼¸ä¸ä¸ªæå¤ä¸ªåºåãå¨æä¸ªæ Leaderçå¨æåï¼ç©ºåºåè¢«æ·»å å°åºåé¾ä¸­ãè½ç¶é¾ä¸­çåºåå¯ä»¥çº¿æ§æåºï¼å¶æ°æ®ç»ææ¯æåæ ç¯å¾ãECæ¯ä¸ä¸ªæ¦çå±è¯ï¼æ¯ä¸ªå¨æé½ä½¿å¾æ¯åé¢çåºåæ´å ç¡®å®ï¼æç»è¾¾å°äºè¶³å¤çç¡®å®æ§ï¼ä¸åºç°ä¸åçåå²åé¾çå¯è½æ§æ¯è¶³å¤å°çãå¦æå¤§å¤æ°çåä¸èé½éè¿ç­¾ç½²åºåé¾æ¥æ©å±åºåé¾ï¼å å¤§è¿ä¸ªåºåæå±é¾çæéï¼é£ä¹è¿ä¸ªåºåå°±è¢«ç¡®è®¤äºã

**éä¸¾ç¿å·¥** å¨æ¯ä¸ªå¨æï¼æ¯ä¸ªç¿å·¥æ£æ¥ä»ä»¬æ¯å¦è¢«éä¸ºLeaderï¼è¿ç±»ä¼¼äºå®æåé¢çåè®®:CoA[15],ç½ç®ä¹¦[16]ï¼åç®æ³[17]ã

*è¯èæ³¨ï¼ä¸é¢çå¬å¼è¡¨è¾¾å¼è¯·åèè±æåçä¸ºä½³*

**å®ä¹6.1** å¦æä¸é¢çæ¡ä»¶æ¯æ»¡è¶³çï¼åå¨æ¶å»t ç¿å·¥Mi æ¯Leaderï¼

![define-6.1.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bedbb54d5c.png)

å¶ä¸­rand(t)æ¯å¨æ¶å»tï¼å¯ä»¥ä»åºåé¾ä¸­æååºæ¥çå¬å¼çéæºåéï¼Pt>iæ¯Miçåçãèèå¯¹äºä»»æçmï¼Læ¯H(m)çå¤§å°ï¼Hæ¯ä¸ç§å®å¨çå å¯æ£åå½æ°ï¼å¶ä¸­ï¼m)Miæ¯Miå¯¹æ¶æ¯mçç­¾åï¼ä½¿å¾ï¼

![define-6.1-2.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bedceda485.png)

å¨å¾13ä¸­ï¼æä»¬æè¿°äºç¿å·¥ï¼ProveElectï¼åç½ç»èç¹ï¼VerifyElectï¼ä¹é´çåè®®ãè¿ç§éä¸¾æ¹æ¡æä¾äºä¸ä¸ªå±æ§ï¼å¬å¹³ï¼ä¿å¯åå¬å¼çå¯éªè¯æ§ã

**å¬å¹³**ï¼ æ¯ä¸ªåä¸èæ¯æ¬¡éä¸¾åªæä¸æ¬¡è¯éªï¼å ä¸ºç­¾åæ¯ç¡®å®æ§çï¼èä¸tårand(t)æ¯åºå®çãåè®¾Hæ¯å®å¨çå å¯æ£åå½æ°ï¼åH(

Mi)/2Lå¿é¡»æ¯ä»ï¼0ï¼1ï¼ååéæ©çå®æ°ï¼å æ­¤ï¼å¯è½ä½¿å¾æ¹ç¨ç­å¼ä¸ºtrueå¿é¡»æ¯Pti/Î£jptjï¼è¿ç­äºç¿å·¥å¨å¨ç½ç»ä¸­çé¨ååçãå ä¸ºè¿ä¸ªæ¦çå¨åçä¸æ¯çº¿æ§çï¼è¿ç§å¯è½æ§å¨åè£æèæ±éåçæåµä¸è¢«ä¿çãæ³¨æéæºå¼rand(t)å¨æ¶å»tä¹åæ¯æªç¥çã

**ä¿å¯**ï¼ ç±äºæè½åçæ»å»èä¸æ¥æMiç¨æ¥è®¡ç®ç­¾åçç§é¥ï¼èèå°æ°å­ç­¾åçåè®¾ï¼è¿ä¸ªæ¯å¯ä»¥å¿½ç¥ä¸è®¡çã

**å¬å¼å¯éªè¯**ï¼ å½éLeader i â Lt å¯ä»¥éè¿ç»åºtï¼rand(t)ï¼H(

i)/2Lï¼æ¥è¯´æä¸ä¸ªææçéªè¯èãé´äºåé¢çè§ç¹ï¼æè½åçæ»å»èå¨ä¸æ¥æè·èç§å¯ç§é¥çæåµä¸ä¸è½çæè¯æã

![filecoin-å¾13.png](http://chainx.org/Uploads/Editor/Picture/2017-08-22/599bedeee732c.png)



## 7 æºè½åçº¦

### **7.1 Filecoinæºè½åçº¦**

æºè½åçº¦ä½¿å¾Filecoinçç¨æ·å¯ä»¥ç¼åæç¶æçç¨åºï¼æ¥è±è´¹ä»¤çåå¸åºè¯·æ±å­å¨J/æ£ç´¢æ°æ®åéªè¯å­å¨è¯æãç¨æ·å¯ä»¥éè¿å°äº¤æåéå°è´¦æ¬è§¦ååçº¦ä¸­çåè½å½æ°æ¥ä¸æºè½åçº¦äº¤äºãæä»¬æ©å±äºæºè½åçº¦ç³»ç»æ¥æ¯æFilecoinçç¹å®æä½ï¼å¦å¸åºæä½ï¼è¯æéªè¯ï¼ã

- æä»¶åçº¦ï¼ æä»¬åè®¸ç¨æ·å¯¹ä»ä»¬æä¾çå­å¨æå¡è¿è¡æ¡ä»¶ç¼ç¨ãæå ä¸ªä¾å­å¼å¾ä¸æï¼ï¼1ï¼æ¿åç¿å·¥ï¼å®¢æ·å¯ä»¥æåæå®ç¿å·¥æä¾æå¡èä¸åä¸å¸åº ï¼2ï¼ä»æ¬¾ç­ç¥ï¼å®¢æ·å¯ä»¥ä¸ºç¿å·¥è®¾è®¡ä¸åçå¥å±ç­ç¥ï¼ä¾å¦åçº¦å¯ä»¥ç»ç¿å·¥æ¯ä»éçæ¶é´çæ¨ç§»è¶æ¥é«çè´¹ç¨ ï¼å¦ä¸ä¸ªåçº¦å¯ä»¥ç±å¼å¾ä¿¡ä»»çOracleçéç¥æ¥è®¾ç½®å­å¨çä»·æ ¼ãï¼3ï¼ç¥¨å¡æå¡ï¼åçº¦å¯ä»¥åè®¸ç¿å·¥å­æ¾ä»¤çåç¨äºä»£è¡¨ç¨æ·çå­å¨/æ£ç´¢çæ¯ä» ï¼4ï¼æ´å¤æçæä½ï¼å®¢æ·å¯ä»¥åå»ºåçº¦æ¥è¿è¡æ°æ®æ´æ°ã
- æºè½åçº¦ï¼ç¨æ·å¯ä»¥å°ç¨åºå³èå°å¶ä»ç³»ç»ï¼å¦ä»¥å¤ªå[18]ï¼ä»ä»¬çäº¤æä¸,ä»ä»¬ä¸ç´æ¥ä¾èµå­å¨çä½¿ç¨ãæä»¬é¢è§äºä»¥ä¸çåºç¨ç¨åºï¼å»ä¸­å¿åå½åæå¡ï¼èµäº§è·è¸ªåé¢å®å¹³å°ã

### **7.2 ä¸å¶ä»ç³»ç»çéæ**

æ¡¥æ¯æ¨å¨è¿æ¥ä¸ååºåé¾çå·¥å·ï¼ç°å¨æ­£å¨å¤çä¸­çï¼æä»¬è®¡åæ¯æè·¨é¾äº¤äºï¼ä»¥ä¾¿è½å°Filecoinå­å¨å¸¦å¥å¶ä»åºäºåºåé¾çå¹³å°ï¼åæ¶ä¹å°å¶ä»å¹³å°çåè½å¸¦å¥Filecoinã

- Filecoinè¿å¥å¶ä»å¹³å°ï¼å¶ä»çåºåé¾ç³»ç»ï¼å¦æ¯ç¹å¸[19]ï¼Zcash [20]ï¼ç¹å«æ¯Ethereum [18]åTezosï¼åè®¸å¼åäººååæºè½åçº¦ï¼ç¶èï¼è¿äºå¹³å°åªæä¾å¾å°çå­å¨è½ååéå¸¸é«çææ¬ãæä»¬è®¡åæä¾æ¡¥å°å­å¨åæ£ç´¢æ¯æå¸¦å¥è¿äºå¹³å°ãæä»¬æ³¨æå°ï¼IPFSå·²ç»è¢«ä½ä¸ºå ä¸ªæºè½åçº¦ï¼ååè®®ä»¤çï¼å¼ç¨ååååå®¹çä¸ç§æ¹å¼æ¥ä½¿ç¨ãå¢å å°Filecoinçæ¯æå°åè®¸è¿äºç³»ç»ä»¥äº¤æ¢Filecoinä»¤ççæ¹å¼æ¥ä¿è¯IPFSå­å¨åå®¹ã
- å¶ä»å¹³å°è¿å¥Filecoinï¼æä»¬è®¡åæä¾Filecoinè¿æ¥å¶ä»åºåé¾æå¡çæ¡¥ãä¾å¦ï¼ä¸Zcashçéæå°æ¯æåééç§æ°æ®çå­å¨è¯·æ±ã

## **8 æªæ¥çå·¥ä½**

è¿é¡¹å·¥ä½ä¸ºFilecoinç½ç»çå»ºè®¾æä¾äºä¸ä¸ªæ¸æ°ååèçéè·¯;ä½æ¯ï¼æä»¬ä¹è®¤ä¸ºè¿é¡¹å·¥ä½å°æä¸ºä»åç ç©¶å»ä¸­å¿åå­å¨ç³»ç»çèµ·ç¹ãå¨è¿ä¸ªæä»¬è¯å«åå¡«åä¸ç±»æªæ¥ å·¥ä½ãè¿åæ¬å·²ç»å®æåªæ¯ç­å¾æè¿°ååå¸çå·¥ä½ï¼æåºæ¹è¿å½ååè®®çå¼æ¾å¼é®é¢ï¼ååè®®çå½¢å¼åã

### **8.1 æ­£å¨è¿è¡çå·¥ä½**

ä»¥ä¸ä¸»é¢ä»£è¡¨æ­£å¨è¿è¡çå·¥ä½ã

- â¢æ¯ä¸ªåä¸­çFilecoinç¶ææ çè§èã
- Filecoinåå¶ç»ä»¶çè¯¦ç»ç»©æä¼°è®¡ååºåã
- å®å¨å¯å®ç°çFilecoinåè®®è§èã
- èµå©æ£ç´¢ç¥¨å¡æ¨¡åï¼å¶ä¸­éè¿åéæ¯ä¸ªå¯æç¥¨è±è´¹çä»¤çï¼ä»»ä½å®¢æ·ç«¯C1å¯ä»¥èµå©å¦ä¸ä¸ªå®¢æ·ç«¯C2çä¸è½½ã
- åå±å±è¯åè®®ï¼å¶ä¸­Filecoinå­ç½å¯ä»¥å¨ä¸´æ¶ææ°¸ä¹ååºè¿è¡ååºå¹¶ç»§ç»­å¤çäºå¡ã
- ä½¿ç¨SNARK / STARKå¢éåºåé¾å¿«ç§ã
- FileCoin-Ethereumåçº¦æ¥å£ååè®®ã
- ä½¿ç¨ç¼ç»ï¼Braidï¼ï¼è¿è¡åºåé¾å½æ¡£ååºåé¾é´å²åã
- åªæå¨åºåé¾è§£å³å²çªçæ¶åæåå¸"æ¶ç©ºè¯æâã
- æ­£å¼è¯æå®ç°äºFilecoin DSNåæ°åå­å¨è¯æã

### **8.2 å¼æ¾å¼é®é¢**

ä½ä¸ºä¸ä¸ªæ´ä½ï¼æä¸äºå¬å¼çé®é¢ï¼å¶ç­æ¡æå¯è½å¯ä»¥å¤§å¤§æ¹åç½ç»ãå°½ç®¡äºå®ä¸ï¼å¨æ­£å¼å¯å¨ä¹åå¹¶ä¸æ¯å¿é¡»å¿é¡»è§£å³çé®é¢ã

- ä¸ä¸ªæ´å¥½çåå§ç"å¤å¶è¯æâå¯å°åè½ï¼çæ³æåµä¸æ¯Oï¼nï¼è§£ç ï¼ä¸æ¯Oï¼nmï¼ï¼ï¼å¯å¬å¼éªè¯ï¼æ éSNARK / STARKã
- âå¤å¶è¯æâåè½çä¸ä¸ªæ´å¥½çåè¯­ï¼å¯ä»¥å¬å¼éªè¯åéææ²¡æSNARK / STARKã
- ä¸ä¸ªéæï¼å¯å¬å¼éªè¯çå¯æ£ç´¢è¯ææå¶ä»å­å¨è¯æã
- å¨æ£ç´¢å¸åºä¸­è¿è¡æ£ç´¢çæ°ç­ç¥ï¼ä¾å¦ï¼åºäºæ¦çæ¯ä»ï¼é¶ç¥è¯æ¡ä»¶æ¯ä»ï¼ã
- âé¢æå±è¯âæ´å¥½çç§å¯Leaderéä¸¾ï¼å¨æ¯ä¸ªå¨æï¼åªæä¸ä½å½éLeaderã
- æ´å¥½çå¯ä¿¡èµçSNARKè®¾ç½®æ¹æ¡ï¼åè®¸å¢å æ©å±å¬å±åæ°ï¼å¯ä»¥è¿è¡MPCåºåçæ¹æ¡ï¼å¶ä¸­æ¯ä¸ªéå çMPCä¸¥æ ¼éä½æéæ¦çï¼å¹¶ä¸æ¯ä¸ªMPCçè¾åºå¯ç¨äºç³»ç»ï¼ã

### **8.3 è¯æåæ­£å¼çéªè¯**

ç±äºè¯æåæ­£å¼éªè¯çæç¡®ä»·å¼ï¼æä»¬è®¡åè¯æFilecoinç½ç»çè®¸å¤å±æ§ï¼å¹¶å¨æªæ¥å ä¸ªæåå å¹´åå¼åæ­£å¼éªè¯çåè®®è§èãå ä¸ªè¯ææ­£å¨è¿è¡ä¸­è¿æäºæ­£å¨æèä¸­ãä½æ³¨æï¼è¦è¯æFilecoinçè®¸å¤å±æ§ï¼å¦ä¼¸ç¼©ï¼ç¦»çº¿ï¼å°æ¯è°é¾çï¼é¿æçå·¥ä½ã

- é¢æå±è¯ååä½çæ­£ç¡®æ§è¯æã
- åçæéå®¹éæ­£ç¡®æ§çè¯æï¼å¼æ­¥1/2ä¸å¯è½å¯¼è´ååã
- å¨éç¨ç»åæ¡æ¶ä¸­å¶å®Filecoin DSNï¼æè¿°Getï¼PutåManageä½ä¸ºçæ³çåè½ï¼å¹¶è¯ææä»¬çå®ç°ã
- èªå¨èªæä¿è¯çæ­£å¼æ¨¡ååè¯æã
- æ­£å¼éªè¯åè®®æè¿°ï¼ä¾å¦TLA +æVerdiï¼ã
- æ­£å¼éªè¯å®ç°ï¼ä¾å¦Verdiï¼ã
- Filecoinæ¿å±çæ¸¸æçè®ºåæã

## **è´è°¢**

è¿é¡¹å·¥ä½æ¯Protocol Labså¢éä¸­å¤ä¸ªäººçç´¯ç§¯åªåï¼å¦ææ²¡æå®éªå®¤çåä½èåé¡¾é®çå¸®å©ãè¯è®ºåå®¡æ¥è¿æ¯ä¸å¯è½å®æçã Juan Benetå¨2014å¹´åäºåå§çFilecoinç½ç®ä¹¦ï¼ä¸ºè¿é¡¹å·¥ä½å¥ å®äºåºç¡ãä»åå°¼å¤æÂ·æ ¼é·ç§ï¼Nicola Grecoï¼å¼åäºæ°çåè®®ï¼å¹¶ä¸æä¾äºæç¨çè´¡ç®ï¼è¯è®ºï¼å®¡æ¥æè§çå¢éå¶ä»äººåä½ç¼åäºè¿ä»½ç½ç®ä¹¦ãç¹å«æ¯å¤§å«âå¤§å«âDalrympleæåºäºè®¢åèä¾åå¶ä»æ³æ³ï¼Matt Zumwaltæ¹è¿äºå¨è¿ç¯è®ºæä¸­çç»æï¼ä¼ä¸Â·ç±³äºä½è¯ºï¼Evan Miyazonoï¼åå»ºäºæå¾ï¼å¹¶å®æäºè¿ç¯è®ºæï¼å¨è®¾è®¡åè®®æ¶ï¼Jeromy Johnsonæåºäºæ·±å»çè§è§£ï¼Steven Allenæä¾äºæ·±å»çé®é¢åæ¸æ°çè¯´æãæä»¬ä¹æè°¢ææçåä½èåé¡¾é®è¿è¡æç¨çå¯¹è¯;å°¤å¶æ¯Andrew MilleråEli Ben-Sassonã

ä»¥åçæ¬ï¼QmVcyYg2qLBS2fNhdeaNN1HvdEpLwpitesbsQwneYXwrKV

è¯èï¼é­ä¸æ¸ï¼toxotguo@gmail.com)

**ä»¥å¤ªåæèµå°åï¼0xc65085cE0e9890383b4cbD4028d1C14d6ce56F9c**

**åèæç®**

[1] Juan Benet. IPFS - Content Addressed, Versioned, P2P File System. 2014.

[2] Giuseppe Ateniese, Randal Burns, Reza Curtmola, Joseph Herring, Lea Kissner, Zachary Peterson, and Dawn Song. Provable data possession at untrusted stores. In Proceedings of the 14th ACM conference on Computer and communications security, pages 598â609. Acm, 2007.

[3] Ari Juels and Burton S Kaliski Jr. Pors: Proofs of retrievability for large files. In Proceedings of the 14th ACM conference on Computer and communications security, pages 584â597. Acm, 2007.

[4] Hovav Shacham and Brent Waters. Compact proofs of retrievability. In International Conference on the Theory and Application of Cryptology and Information Security, pages 90â107. Springer, 2008.

[5] Protocol Labs. Technical Report: Proof-of-Replication. 2017.

[6] Rosario Gennaro, Craig Gentry, Bryan Parno, and Mariana Raykova. Quadratic span programs and succinct nizks without pcps. In Annual International Conference on the Theory and Applications of Cryptographic Techniques, pages 626â645. Springer, 2013.

[7] Nir Bitansky, Alessandro Chiesa, and Yuval Ishai. Succinct non-interactive arguments via linear interactive proofs. Springer, 2013.

 [8] Eli Ben-Sasson, Alessandro Chiesa, Daniel Genkin, Eran Tromer, and Madars Virza. Snarks for c: Verifying program executions succinctly and in zero knowledge. In Advances in CryptologyâCRYPTO 2013, pages 90â108. Springer, 2013.

[9] Eli Ben-Sasson, Iddo Bentov, Alessandro Chiesa, Ariel Gabizon, Daniel Genkin, Matan Hamilis, Evgenya Pergament, Michael Riabzev, Mark Silberstein, Eran Tromer, et al. Computational integrity with a public random string from quasi-linear pcps. In Annual International Conference on the Theory and Applications of Cryptographic Techniques, pages 551â579. Springer, 2017.

[10] Henning Pagnia and Felix C GÂ¨artner. On the impossibility of fair exchange without a trusted third party. Technical report, Technical Report TUD-BS-1999-02, Darmstadt University of Technology, Department of Computer Science, Darmstadt, Germany, 1999.

[11] Joseph Poon and Thaddeus Dryja. The bitcoin lightning network: Scalable off-chain instant payments. 2015.

[12] Andrew Miller, Iddo Bentov, Ranjit Kumaresan, and Patrick McCorry. Sprites: Payment channels that go faster than lightning. arXiv preprint arXiv:1702.05812, 2017.

[13] Protocol Labs. Technical Report: Power Fault Tolerance. 2017.

[14] Protocol Labs. Technical Report: Expected Consensus. 2017.

[15] Iddo Bentov, Charles Lee, Alex Mizrahi, and Meni Rosenfeld. Proof of activity: Extending bitcoinâs proof of work via proof of stake [extended abstract] y. ACM SIGMETRICS Performance Evaluation Review, 42(3):34â37, 2014.

[16] Iddo Bentov, Rafael Pass, and Elaine Shi. Snow white: Provably secure proofs of stake. 2016.

[17] Silvio Micali. Algorand: The efficient and democratic ledger. arXiv preprint arXiv:1607.01341, 2016.

[18] Vitalik Buterin. Ethereum , April 2014. URL https://ethereum.org/.

[19] Satoshi Nakamoto. Bitcoin: A peer-to-peer electronic cash system, 2008.

[20] Eli Ben Sasson, Alessandro Chiesa, Christina Garman, Matthew Green, Ian Miers, Eran Tromer, and Madars Virza. Zerocash: Decentralized anonymous payments from bitcoin. In Security and Privacy (SP), 2014 IEEE Symposium on, pages 459â474. IEEE, 2014.

[TOC]

##  0. æè¦

æéæä»¶ç³»ç»æ¯ä¸ç§ç¹å¯¹ç¹çåå¸å¼æä»¶ç³»ç»ï¼ æ¨å¨è¿æ¥æææç¸åçæä»¶ç³»ç»çè®¡ç®æºè®¾å¤ãå¨æäºæ¹é¢ï¼ IPFSç±»ä¼¼äºweb, ä½web æ¯ä¸­å¿åçï¼èIPFSæ¯ä¸ä¸ªåä¸çBittorrent ç¾¤éï¼ ç¨git ä»åºåå¸å¼å­å¨ãæ¢å¥è¯è¯´ï¼ IPFS æä¾äºé«ååéçåå®¹å¯»ååå­å¨æ¨¡åï¼ å·æåå®¹å¯»åçè¶é¾æ¥ãè¿å½¢æäºä¸ä¸ªå¹¿ä¹çMerkle DAG æ°æ®ç»æï¼å¯ä»¥ç¨è¿ä¸ªæ°æ®ç»ææå»ºçæ¬æä»¶ç³»ç»ï¼åºåé¾ï¼çè³æ¯æ°¸ä¹æ§ç½ç«ãIPFS ç»åäºåå¸å¼åå¸è¡¨ï¼ å¸¦ææ¿å±æºå¶çåäº¤æ¢åèªæè®¤è¯å½åç©ºé´ãIPFS æ²¡æåæéç¹ï¼ èç¹ä¸éè¦ç¸äºä¿¡ä»»ã

> æ»ç»åè¯´æï¼
>
> 1.  IPFSæ ¸å¿å°±æ¯ä¸ä¸ª `Bittorrent` å ä¸`Git` ;Bittorrentå³å®äºå¶å·æä¸­å¿åçç¹æ§ï¼èGitå³å®äºå¶å·ææä»¶çæ¬ç®¡çè½åï¼
> 2.  é«ååéæ¯ç±å¶åºå±ç½ç»æ¨¡åçCDNå³å®çï¼



## 1. ä»ç»

å¨å¨çåå¸å¼æä»¶ç³»ç»è¿é¢åï¼ å·²ç»æè®¸å¤äººçå°è¯ãä¸äºç³»ç»å·²ç»åå¾äºéå¤§çæåï¼ èå¾å¤å´å®å¨å¤±è´¥äºãå¨å­¦æ¯å°è¯ä¸­ï¼ AFSã6ãå°±æ¯æåçä¾å­ï¼å¦ä»å·²ç»å¾å°å¹¿æ³çåºç¨ï¼ ç¶èï¼å¶ä»çå´æ²¡æå¾å°ç¸åçç»æãå¨å­¦æ¯çä¹å¤ï¼åºç¨æå¹¿æ³çæ¯é¢åé³è§é¢åªä½çç¹å¯¹ç¹æä»¶å±äº«ç³»ç»ã æå¼å¾æ³¨æçæ¯ï¼ Napster, KaZaA åBitTorrent[2]é¨ç½²çæä»¶ååç³»ç»æ¯æ1äº¿ç¨æ·çåæ¶å¨çº¿ãå³ä½¿å¨ä»å¤©ï¼ BitTorrent ä¹ç»´æçæ¯å¤©åä¸èç¹çæ´»è·æ°ã åºäºè¿äºå­¦æ¯æä»¶ç³»ç»çè®ºèå®ç°çåºç¨ç¨åºæå¾å¤çç¨æ·éï¼ ç¶èï¼è¿äºç³»ç»çè®ºæ¯å¨åºç¨å±ï¼èæ²¡ææ¾å¨åºç¡å±ãä»¥è´æ²¡æåºç°éç¨çæä»¶ç³»ç»åºç¡æ¡æ¶ï¼ ç»å¨çæä¾ä½å»¶è¿çååã
ä¹è®¸æ¯å ä¸ºHTTPè¿æ ·âè¶³å¤å¥½âçç³»ç»å·²ç»å­å¨ãå°ç®åä¸ºæ­¢ï¼HTTPå·²ç»ä½ä¸ºâåå¸å¼æä»¶ç³»ç»âçåè®®ï¼å¹¶ä¸å·²ç»å¤§éé¨ç½²ï¼åä¸æµè§å¨ç¸ç»åï¼å·æå·¨å¤§çææ¯åç¤¾ä¼å½±ååãå¨ç°å¨ï¼ å®å·²ç»æä¸ºäºèç½ä¼ è¾æä»¶çäºå®æ åãç¶èï¼ä»æ²¡æéç¨æè¿15å¹´çåæçæ°åç§åè¿çæä»¶ååææ¯ã ä»ä¸æ¹é¢è®²ï¼ ç±äºååå¼å®¹çéå¶ å å½åæ°æ¨¡å¼çæå¥ï¼ ä¸æ­åå±http web çåºç¡è®¾æ½å ä¹æ¯ä¸å¯è½çãä½ä»ä¸ä¸ªè§åº¦çï¼ ä»http åºç°ä»¥æ¥ï¼ å·²ç»æè®¸å¤æ°åè®®åºç°å¹¶è¢«å¹¿æ³ä½¿ç¨ãåçº§httpåè®®è½ç¶è½å¼å¥æ°åè½åå å¼ºå½åhttpåè®®ï¼ä½ä¼éä½ç¨æ·çä½éªã
æäºè¡ä¸å·²ç»æè±ä½¿ç¨HTTP è¿ä¹ä¹ï¼ å ä¸ºç§»å¨å°æä»¶ç¸å¯¹ä¾¿å®ï¼å³ä½¿å¯¹æ¥æå¤§æµéçå°ç»ç»ä¹æ¯å¦æ­¤ãä½æ¯ï¼éçæ°çææï¼æä»¬æ­£å¨è¿å¥æ°æ®ååçæ°çºªåã

ï¼aï¼æç®¡åååPBçº§æ°æ®éï¼

ï¼bï¼è·¨ç»ç»çå¤§æ°æ®è®¡ç®ï¼

ï¼cï¼å¤§æ¹éçé«æ¸æ°åº¦æéæå®æ¶åªä½æµï¼

ï¼dï¼å¤§è§æ¨¡æ°æ®éççæ¬ååé¾æ¥ï¼

ï¼eï¼é²æ­¢æå¤ä¸¢å¤±éè¦æä»¶ç­ãå¶ä¸­è®¸å¤å¯ä»¥å½ç»ä¸ºâå¤§éæ°æ®ï¼æ å¤ä¸å¨âãç±äºå³é®åè½åå¸¦å®½é®é¢ï¼æä»¬å·²ç»ä¸ºä¸åçæ°æ®æ¾å¼äºHTTP åéåè®®ãä¸ä¸æ­¥æ¯ä½¿å®ä»¬æä¸ºwebèªå·±çä¸é¨åã

æ­£äº¤äºææçæ°æ®ååï¼çæ¬æ§å¶ç³»ç»ï¼å·²ç»è®¾æ³å¼åéè¦çæ°æ®åä½å·¥ä½æµç¨ãGitæ¯åå¸å¼æºä»£ç çæ¬æ§å¶ç³»ç»ï¼å¼åäºè®¸å¤æç¨çæ¹æ³æ¥å»ºæ¨¡åå®ç°åå¸å¼æ°æ®æä½ãGitå·¥å·é¾æä¾äºçµæ´»ççæ¬æ§å¶åè½ï¼è¿æ­£æ¯å¤§éçæä»¶ååç³»ç»æä¸¥éç¼ºä¹çãç±Gitå¯åçæ°è§£å³æ¹æ¡æ­£å¨åºç°ï¼å¦Camlistore [ï¼]ï¼ä¸ªäººæä»¶å­å¨ç³»ç»ï¼Dat [ï¼]æ°æ®åä½å·¥å·é¾åæ°æ®éåç®¡çå¨ãGitå·²ç»å½±åäºåå¸å¼æä»¶ç³»ç»è®¾è®¡[9]ï¼å ä¸ºå¶åå®¹æ¶åå°Merkle DAGæ°æ®æ¨¡åï¼è½å¤å®ç°å¼ºå¤§çæä»¶ååç­ç¥ãè¿æå¾æ¢è®¨çæ¯ï¼è¿ç§æ°æ®ç»æå¦ä½å½±åé¢åé«ååéçæä»¶ç³»ç»çè®¾è®¡ï¼ä»¥åå¦ä½åçº§Webæ¬èº«ã

æ¬æä»ç»äºIPFSï¼ä¸ç§æ°é¢çå¯¹ç­çæ¬æ§å¶çæä»¶ç³»ç»ï¼æ¨å¨è°åè¿äºé®é¢ã IPFSç»¼åäºè®¸å¤ä»¥åæåçç³»ç»çä¼ç¹ã IPFSäº§çäºçªåºçææï¼ çè³æ¯åèçè¿äºç³»ç»çæ»åè¿è¦å¥½ãIPFSçæ ¸å¿ååæ¯å°æææ°æ®å»ºæ¨¡ä¸ºåä¸Merkle DAGçä¸é¨åã



##2. èæ¯

æ¬èåé¡¾äºIPFSæéç¨æåçç¹å¯¹ç¹ç³»ç»ææ¯çéè¦å±æ§ã

### 2.1 åå¸å¼åå¸è¡¨(DHT)

åå¸å¼æ£åè¡¨ï¼DHTï¼è¢«å¹¿æ³ç¨äºåè°åç»´æ¤å³äºå¯¹ç­ç³»ç»çåæ°æ®ãæ¯å¦ï¼MainlineDHT æ¯ä¸ä¸ªå»ä¸­å¿ååå¸è¡¨ï¼ä»å¯è¿½è¸ªæ¥æ¾ææçå¯¹ç­èç¹ã

#### 2.1.1 KADEMLIA DHT

Kademlia[10] æ¯åæ¬¢è¿çDHT, å®æä¾ï¼

1. éè¿å¤§éç½ç»è¿è¡é«ææ¥è¯¢ï¼æ¥è¯¢å¹³åèç³»äººO(log2N)èç¹ã ï¼ä¾å¦ï¼20è·³10ä¸ä¸ªèç¹çç½ç»ï¼
2. ä½åè°å¼éï¼ä¼åæ°éçæ§å¶æ¶æ¯åéå°å¶ä»èç¹ã
3. æµæåç§æ»å»ï¼åæ¬¢é¿å¯¿èç¹ã
4. å¨å¯¹ç­åºç¨ä¸­å¹¿æ³ä½¿ç¨ï¼åæ¬GnutellaåBitTorrentï¼å½¢æäºè¶è¿2000ä¸ä¸ªèç¹çç½ç»[16]ã

#### 2.1.2 CORAL DSHT

è½ç¶ä¸äºå¯¹ç­æä»¶ç³»ç»ç´æ¥å¨DHTä¸­å­å¨æ°æ®åï¼è¿ç§âæ°æ®å­å¨å¨ä¸éè¦çèç¹ä¼æµªè´¹å­å¨åå¸¦å®½â[5]ãCoral DSHTæ©å±äºKademliaä¸ä¸ªç¹å«éè¦çæ¹å¼ï¼

1. Kademliaå¨idsä¸ºâæè¿âï¼ä½¿ç¨XOR-distanceï¼çå³é®èç¹ä¸­å­å¨å¼ãè¿ä¸è èåºç¨ç¨åºæ°æ®çå±é¨æ§ï¼å¿½ç¥âè¿âå¯è½å·²ç»æ¥ææ°æ®çèç¹ï¼å¹¶å¼ºå¶âæè¿âèç¹å­å¨å®ï¼æ è®ºå®ä»¬æ¯å¦éè¦ãè¿æµªè´¹äºå¤§éçå­å¨åå¸¦å®½ãç¸åï¼Coral å­å¨äºå°åï¼ è¯¥å°åçå¯¹ç­èç¹å¯ä»¥æä¾ç¸åºçæ°æ®åã
2. Coralå°DHT APIä»get_value(key)æ¢æäºget_any_values(key)ï¼DSHTä¸­çâsloppyâï¼ä¸­ãè¿ä»ç¶æ¯å ä¸ºCoralç¨æ·åªéè¦ä¸ä¸ªï¼å·¥ä½ï¼çå¯¹ç­ä½ï¼èä¸æ¯å®æ´çåè¡¨ãä½ä¸ºåæ¥ï¼Coralå¯ä»¥ä»å°å­éåéå°âæè¿âçèç¹ï¼é¿åç­ç¹ï¼å½å¯é¥åå¾æµè¡æ¶ï¼éè½½æææè¿çèç¹ï¼ã
3. å¦å¤ï¼Coralæ ¹æ®åºååå¤§å°ç»ç»äºä¸ä¸ªç§°ä¸ºç¾¤éçç¬ç«DSHTå±æ¬¡ç»æãè¿ä½¿å¾èç¹é¦åæ¥è¯¢å¶åºåä¸­çå¯¹ç­ä½ï¼âæ¥æ¾éè¿çæ°æ®èä¸æ¥è¯¢è¿ç¨èç¹â[5]å¹¶å¤§å¤§åå°æ¥æ¾çå»¶è¿ã

#### 2.1.3 S/KADEMLIA DHT

S/Kademlia[1] æ©å±äºKademlia, ç¨äºé²æ­¢æ¶æçæ»å»ãæå¦ä¸ä¸¤æ¹é¢çæ¹æ³ï¼

1. S/Kad æä¾äºæ¹æ¡æ¥ä¿è¯NodeIdççæå·²ç»é²æ­¢Sybillæ»å»ãå®éè¦èç¹äº§çPKIå¬ç§é¥å¯¹ãä»ä¸­å¯¼åºä»ä»¬çèº«ä»½ï¼å¹¶å½¼æ­¤é´ç­¾åãä¸ä¸ªæ¹æ¡ä½¿ç¨POWå·¥ä½éè¯æï¼ä½¿å¾çæSybillsææ¬é«æã
2. S/Kad èç¹å¨ä¸ç¸äº¤çè·¯å¾ä¸æ¥æ¾å¼ï¼ å³ä½¿ç½ç»ä¸­å­å¨å¤§éçä¸è¯å®èç¹ï¼ä¹è½ç¡®ä¿è¯å®èç¹å¯ä»¥äºç¸é¾æ¥ãå³ä½¿ç½ç»ä¸­å­å¨ä¸åçä¸è¯å®èç¹ï¼S/Kad ä¹è½è¾¾å°85%çæåçã

### 2.2 åäº¤æ¢ - BitTorrent

BitTorrent[3] æ¯ä¸ä¸ªå¹¿æ³æååºç¨çç¹å¯¹ç¹å±äº«æä»¶ç³»ç»ï¼å®å¯ä»¥å¨å­å¨ä¸ä¿¡ä»»çå¯¹ç­èç¹ï¼ç¾¤éï¼çåä½ç½ç»ä¸­åååèªçæä»¶æ°æ®çãä»BitTorrentåå®ççæç³»ç»çå³é®ç¹å¾ï¼ IPFSå¾å°å¯ç¤ºå¦ä¸ï¼

1. BitTorrentçæ°æ®äº¤æ¢åè®®ä½¿ç¨äºä¸ç§bit-for-tatçæ¿å±ç­ç¥ï¼ å¯ä»¥å¥å±å¯¹å¶ä»æ¹é¢åè´¡ç®çèç¹ï¼æ©ç½åªæ¦¨åå¯¹æ¹èµæºçèç¹ã
2. BitTorrentå¯¹ç­ä½è·è¸ªæä»¶çå¯ç¨æ§ï¼ä¼ååéç¨æçæ®µãè¿åè½»äºseedsèç¹çè´æï¼ è®©non-seedsèç¹æè½åäºç¸äº¤æã
3. å¯¹äºä¸äºå¥åå¸¦å®½å±äº«ç­ç¥ï¼ BitTorrentçæ åtit-for-tatç­ç¥æ¯éå¸¸èå¼±çã ç¶èï¼PropShare[8]æ¯ä¸ç§ä¸åçå¯¹ç­å¸¦å®½åéç­ç¥ï¼ å¯ä»¥æ´å¥½çæµå¶å¥åæç¥ï¼ æé«ç¾¤éçè¡¨ç°ã

### 2.3. çæ¬æ§å¶ç³»ç» - Git

çæ¬æ§å¶ç³»ç»æä¾äºå¯¹éæ¶é´ååçæä»¶è¿è¡å»ºæ¨¡çè®¾æ½ï¼å¹¶ææå°ååä¸åççæ¬ãæµè¡çæ¬æ§å¶ç³»ç»Gitæä¾äºå¼ºå¤§çMerkle DAGå¯¹è±¡æ¨¡åï¼ä»¥åå¸å¼åå¥½çæ¹å¼æè·å¯¹æä»¶ç³»ç»æ çæ´æ¹ã

1. ä¸å¯æ´æ¹çå¯¹è±¡è¡¨ç¤ºæä»¶ï¼blobï¼ï¼ç®å½ï¼æ ï¼åæ´æ¹ï¼æäº¤ï¼ã

2. éè¿å å¯hashå¯¹è±¡çåå®¹ï¼è®©å¯¹è±¡å¯å¯»åã

3. é¾æ¥å°å¶ä»å¯¹è±¡æ¯åµå¥çï¼å½¢æä¸ä¸ªMerkle DAGãè¿æä¾äºå¾å¤æç¨çå®æ´åwork-flowå±æ§ã

4. å¾å¤çæ¬åæ°æ®ï¼åæ¯ï¼æ ç¤ºç­ç­ï¼é½åªæ¯æéå¼ç¨ï¼å æ­¤åå»ºåæ´æ°çä»£ä»·é½å°ã

5. çæ¬æ¹ååªæ¯æ´æ°å¼ç¨æèæ·»å å¯¹è±¡ã

6. åå¸å¼çæ¬æ¹åå¯¹å¶ä»ç¨æ·èè¨åªæ¯è½¬ç§»å¯¹è±¡åæ´æ°è¿ç¨å¼ç¨ã



### 2.4 èªæè®¤è¯è®¤æä»¶ç³»ç»-SFS

SFS [ 12ï¼11 ]æåºäºä¸¤ä¸ªå¼äººæ³¨ç®çå®ç°ï¼aï¼åå¸å¼ä¿¡ä»»é¾ï¼åï¼bï¼å¹³ç­å±äº«çå¨å±å½åç©ºé´ãSFSå¼å¥äºä¸ç§èªæå»ºæææ¯âæ³¨åæä»¶ï¼å¯»åè¿ç¨æä»¶ç³»ç»ä½¿ç¨ä»¥ä¸æ ¼å¼ï¼

```powershell
/sfs/<Location>:<HostID>
Location:ä»£è¡¨çæ¯æå¡ç½ç»å°æ¹
HostID = hash(public_key || Location)
```

å æ­¤SFSæä»¶ç³»ç»çåå­è®¤è¯äºå®çæå¡ï¼ç¨æ·å¯ä»¥éè¿æå¡æä¾çå¬é¥æ¥éªè¯ï¼ååä¸ä¸ªå±äº«çç§é¥ï¼ä¿è¯ææçéä¿¡ãææçSFSå®ä¾é½å±äº«äºä¸ä¸ªå¨å±çå½åç©ºé´ï¼è¿ä¸ªå½åç©ºé´çåç§°åéæ¯å å¯çï¼ä¸è¢«ä»»ä½ä¸­å¿åçbodyæ§å¶ã

## 3. IPFSè®¾è®¡

IPFSæ¯ä¸ä¸ªåå¸å¼æä»¶ç³»ç»ï¼å®ç»¼åäºä»¥åçå¯¹ç­ç³»ç»çæåæ³æ³ï¼åæ¬DHTï¼BitTorrentï¼GitåSFSã IPFSçè´¡ç®æ¯ç®åãåå±åå°æççææ¯è¿æ¥æä¸ä¸ªåä¸çåèç³»ç»ï¼å¤§äºå¶é¨åçæ»åã IPFSæä¾äºç¼ååé¨ç½²åºç¨ç¨åºçæ°å¹³å°ï¼ä»¥åä¸ä¸ªæ°çååç³»ç»çæ¬åå¤§æ°æ®ã IPFSçè³å¯ä»¥æ¼è¿ç½ç»æ¬èº«ã
IPFSæ¯ç¹å¯¹ç¹ç;æ²¡æèç¹æ¯ç¹æçã IPFSèç¹å°IPFSå¯¹è±¡å­å¨å¨æ¬å°å­å¨ä¸­ãèç¹å½¼æ­¤è¿æ¥å¹¶ä¼ è¾å¯¹è±¡ãè¿äºå¯¹è±¡è¡¨ç¤ºæä»¶åå¶ä»æ°æ®ç»æã IPFSåè®®åä¸ºä¸ç»è´è´£ä¸ååè½çå­åè®®ï¼
**1. èº«ä»½** - ç®¡çèç¹èº«ä»½çæåéªè¯ãæè¿°å¨3.1èã
**2.ç½ç»** - ç®¡çä¸å¶ä»å¯¹ç­ä½çè¿æ¥ï¼ä½¿ç¨åç§åºå±ç½ç»åè®®ãå¯éç½®çãè¯¦è§3.2èã
**3.è·¯ç±** - ç»´æ¤ä¿¡æ¯ä»¥å®ä½ç¹å®çå¯¹ç­ä½åå¯¹è±¡ãååºæ¬å°åè¿ç¨æ¥è¯¢ãé»è®¤ä¸ºDHTï¼ä½å¯æ´æ¢ãå¨3.3èæè¿°ã
**4.äº¤æ¢** - ä¸ç§æ¯æææååéçæ°ååäº¤æ¢åè®®ï¼BitSwapï¼ãæ¨¡æå¸åºï¼å¼±åæ°æ®å¤å¶ãè´¸æç­ç¥å¯æ¿æ¢ãæè¿°å¨3.4èã
**5.å¯¹è±¡** - å·æé¾æ¥çåå®¹å¯»åä¸å¯æ´æ¹å¯¹è±¡çMerkle DAGãç¨äºè¡¨ç¤ºä»»ææ°æ®ç»æï¼ä¾å¦æä»¶å±æ¬¡åéä¿¡ç³»ç»ãè¯¦è§ç¬¬3.5èã
**6.æä»¶** - ç±Gitå¯åççæ¬åæä»¶ç³»ç»å±æ¬¡ç»æãè¯¦è§3.6èã
**7.å½å** - èªæè®¤è¯çå¯ååç§°ç³»ç»ãè¯¦è§3.7èã
è¿äºå­ç³»ç»ä¸æ¯ç¬ç«ç;å®ä»¬æ¯éæå¨ä¸èµ·ï¼äºç¸å©ç¨åèªçå±æ§ãä½æ¯ï¼åå¼æè¿°å®ä»¬æ¯æç¨çï¼ä»ä¸å°ä¸æå»ºåè®®æ ã

ç¬¦å·ï¼Goè¯­è¨ä¸­æå®äºä»¥ä¸æ°æ®ç»æååè½

### 3.1 èº«ä»½

èç¹ç±NodeIdæ è¯ï¼è¿æ¯ä½¿ç¨S / Kademliaçéæå å¯é¾é¢[1]åå»ºçå¬é¥çå¯ç æ£åãèç¹å­å¨å¶å¬ç§é¥ï¼ç¨å¯ç å å¯ï¼ãç¨æ·å¯ä»¥å¨æ¯æ¬¡å¯å¨æ¶èªç±å°è®¾ç½®ä¸ä¸ªâæ°âèç¹èº«ä»½ï¼å°½ç®¡è¿ä¼æå¤±ç§¯ç´¯çç½ç»å©çãæ¿å±èç¹ä¿æä¸åã

```go
         type NodeId Multihash
         type Multihash []byte  // èªæè¿°å å¯åå¸æè¦
         type PublicKey []byte
         type PrivateKey []byte // èªæè¿°çç§é¥
         type Node struct {
             NodeId NodeID
             PubKey PublicKey
             PriKey PrivateKey
         }
åºäºS / KademliaçIPFSèº«ä»½çæï¼
        difficulty = <integer parameter>
        n = Node{}
        do {
            n.PubKey, n.PrivKey = PKI.genKeyPair()
            n.NodeId = hash(n.PubKey)
            p = count_preceding_zero_bits(hash(n.NodeId))
        } while (p < difficulty)
```

é¦æ¬¡è¿æ¥æ¶ï¼å¯¹ç­ä½äº¤æ¢å¬é¥ï¼å¹¶æ£æ¥ï¼hashï¼other.PublicKeyï¼ç­äºother.NodeIdãå¦ææ²¡æï¼åè¿æ¥è¢«ç»æ­¢
å³äºå å¯å½æ°çæ³¨æäºé¡¹ï¼
IPFSä¸æ¯å°ç³»ç»éå®å°ä¸ç»ç¹å®çåè½éæ©ï¼èæ¯æ¯æèªææè¿°çå¼ãåå¸æè¦å¼ä»¥å¤éåå¸æ ¼å¼å­å¨ï¼å¶åæ¬æå®ä½¿ç¨çåå¸å½æ°çå¤´åä»¥å­èä¸ºåä½çæè¦é¿åº¦ãä¾å¦ï¼

```
<function code><digest length><digest bytes>
```

è¿åè®¸ç³»ç»

ï¼aï¼éæ©æä½³åè½ç¨ä¾ï¼ä¾å¦ï¼æ´å¼ºçå®å¨æ§ä¸æ´å¿«çæ§è½ï¼ï¼

ï¼bï¼éçåè½éæ©çååèæ¼åãèªæè¿°å¼åè®¸å¼å®¹ä½¿ç¨ä¸åçåæ°éæ©ã

### 3.2 ç½ç»

IPFSèç¹ä¸æ°ç¾ä¸ªå¶ä»èç¹è¿è¡å®æéä¿¡ç½ç»ä¸­çèç¹ï¼å¯è½è·¨è¶å¹¿åç½ç»ãIPFSç½ç»å æ åè½ï¼

ä¼ è¾å±ï¼ IPFSå¯ä»¥ä½¿ç¨ä»»ä½ä¼ è¾åè®®ï¼å¹¶ä¸æéåWebRTC DataChannels [ï¼]ï¼ç¨äºæµè§å¨è¿æ¥ï¼æuTPï¼LEDBAT [14]ï¼ã

å¯é æ§ï¼ å¦æåºå±ç½ç»ä¸æä¾å¯é æ§ï¼IPFSå¯ä½¿ç¨uTPï¼LEDBAT [14]ï¼æSCTP [15]æ¥æä¾å¯é æ§ã

å¯è¿æ¥æ§ï¼IPFSè¿å¯ä»¥ä½¿ç¨ICE NATç©¿å¢ææ´ææ¯[13]ã

å®æ´æ§ï¼å¯ä»¥ä½¿ç¨åå¸æ ¡éªåæ¥æ£æ¥é®ä»¶çå®æ´æ§ã

å¯éªè¯æ§ï¼å¯ä»¥ä½¿ç¨åéèçå¬é¥ä½¿ç¨HMACæ¥æ£æ¥æ¶æ¯ççå®æ§ã

#### 3.2.1å¯¹ç­èç¹å¯»åæ³¨æäºé¡¹ï¼

IPFSå¯ä»¥ä½¿ç¨ä»»ä½ç½ç»; ä½å®ä¸æ¿æå¯¹IPçè·åä»¥åä¸ç´æ¥ä¾èµäºipå±ãè¿åè®¸å¨è¦çç½ç»ä¸­ä½¿ç¨IPFSã

IPFSå°å°åå­å¨ä¸ºå¤å±å°å ~è¿ä¸ªå¾æææ~ï¼è¿ä¸ªå¤å±å°åæ¯ç±å­èå­ç¬¦ä¸²ç»æçï¼ ä»¥ä¾¿äºç»åºå±ç½ç»ä½¿ç¨ãå¤å±å°åæä¾äºä¸ç§æ¹å¼æ¥è¡¨ç¤ºå°ååå¶åè®®ï¼å¯ä»¥å°è£æå¥½è§£æçæ ¼å¼ãä¾å¦ï¼

```powershell
# an SCTP/IPv4 connection
/ip4/10.20.30.40/sctp/1234/
# an SCTP/IPv4 connection proxied over TCP/IPv4
/ip4/5.6.7.8/tcp/5678/ip4/1.2.3.4/sctp/1234/
```


### 3.3 è·¯ç±

IPFSèç¹éè¦ä¸ä¸ªè·¯ç±ç³»ç»ï¼ è¿ä¸ªè·¯ç±ç³»ç»å¯ç¨äºæ¥æ¾ï¼

ï¼aï¼å¶ä»åä¼´çç½ç»å°åï¼

ï¼bï¼ä¸é¨ç¨äºæå¡ç¹å®å¯¹è±¡çå¯¹ç­èç¹ã

IPFSä½¿ç¨åºäºS / KademliaåCoralçDSHTï¼å¨2.1èä¸­å·ä½ä»ç»è¿ãå¨å¯¹è±¡å¤§å°åä½¿ç¨æ¨¡å¼æ¹é¢ï¼ IPFS ç±»ä¼¼äºCoral[5] åMainline[16], å æ­¤ï¼IPFS DHTæ ¹æ®å¶å¤§å°å¯¹å­å¨çå¼è¿è¡åºåãå°çå¼ï¼ç­äºæå°äº1KBï¼ç´æ¥å­å¨å¨DHTä¸ãå¯¹äºæ´å¤§çå¼ï¼DHTåªå­å¨å¼ç´¢å¼ï¼è¿ä¸ªç´¢å¼å°±æ¯ä¸ä¸ªå¯¹ç­èç¹çNodeId, è¯¥å¯¹ç­èç¹å¯ä»¥æä¾å°è¯¥ç±»åçå¼çå·ä½æå¡ã

DSHTçæ¥å£å¦ä¸ï¼

```go
type IPFSRouting interface {
   FindPeer(node NodeId) // è·åç¹å®NodeIdçç½ç»å°åã
   SetValue(key []bytes, value []bytes) // å¾DHTå­å¨ä¸ä¸ªå°çåæ°æ®ã
   GetValue(key []bytes) // ä»DHTè·ååæ°æ®ã
   ProvideValue(key Multihash) // å£°æè¿ä¸ªèç¹å¯ä¸ä¸ªæä¾ä¸ä¸ªå¤§çæ°æ®ã
   FindValuePeers(key Multihash, min int) // è·åæå¡äºè¯¥å¤§æ°æ®çèç¹ã
}
```
æ³¨æï¼ä¸åçç¨ä¾å°è¦æ±åºæ¬ä¸åçè·¯ç±ç³»ç»ï¼ä¾å¦å¹¿åç½ä¸­ä½¿ç¨DHTï¼å±åç½ä¸­ä½¿ç¨éæHTï¼ãå æ­¤ï¼IPFSè·¯ç±ç³»ç»å¯ä»¥æ ¹æ®ç¨æ·çéæ±æ¿æ¢çãåªè¦ä½¿ç¨ä¸é¢çæ¥å£å°±å¯ä»¥äºï¼ç³»ç»é½è½ç»§ç»­æ­£å¸¸è¿è¡ã

### 3.4åäº¤æ¢ - BitSwapåè®®

IPFS ä¸­çBitSwapåè®®åå°BitTorrent çå¯åï¼éè¿å¯¹ç­èç¹é´äº¤æ¢æ°æ®åæ¥ååæ°æ®çãåBTä¸æ ·ï¼ æ¯ä¸ªå¯¹ç­èç¹å¨ä¸è½½çåæ¶ä¸æ­åå¶ä»å¯¹ç­èç¹ä¸ä¼ å·²ä¸è½½çæ°æ®ãåBTåè®®ä¸åçæ¯ï¼ BitSwap ä¸å±éäºä¸ä¸ªtorrentæä»¶ä¸­çæ°æ®åãBitSwap åè®®ä¸­å­å¨ä¸ä¸ªæ°¸ä¹çå¸åºã è¿ä¸ªå¸åºåæ¬åä¸ªèç¹æ³è¦è·åçææåæ°æ®~è¿ä¸ªå¸åºæä¹çè§£ï¼~ãèä¸ç®¡è¿äºåæ¯åªäºå¦.torrentæä»¶ä¸­çä¸é¨åãè¿äºåæ°æ®å¯è½æ¥èªæä»¶ç³»ç»ä¸­å®å¨ä¸ç¸å³çæä»¶ã è¿ä¸ªå¸åºæ¯ç±ææçèç¹ç»æçã
è½ç¶æè´§ç³»ç»çæ¦å¿µæå³çå¯ä»¥åå»ºèæè´§å¸ï¼ä½è¿å°éè¦ä¸ä¸ªå¨å±åç±»è´¦æ¬æ¥è·è¸ªè´§å¸çæææåè½¬ç§»ãè¿å¯ä»¥å®æ½ä¸ºBitSwapç­ç¥ï¼å¹¶å°å¨æªæ¥çè®ºæä¸­æ¢è®¨ã
å¨åºæ¬æåµä¸ï¼BitSwapèç¹å¿é¡»ä»¥åçå½¢å¼å½¼æ­¤æä¾ç´æ¥çå¼ãåªæå½è·¨èç¹çåçåå¸æ¯äºè¡¥çæ¶åï¼ååæéçæ¶åï¼è¿æä¼å·¥ä½çå¾å¥½ã éå¸¸æåµå¹¶éå¦æ­¤ï¼å¨æäºæåµä¸ï¼èç¹å¿é¡»ä¸ºèªå·±çåèå·¥ä½ã å¨èç¹æ²¡æå¶å¯¹ç­èç¹æéçï¼ææ ¹æ¬æ²¡æçï¼æåµä¸ï¼å®ä¼æ´ä½çä¼åçº§å»å¯»æ¾å¯¹ç­èç¹æ³è¦çåãè¿ä¼æ¿å±èç¹å»ç¼å­åä¼ æ­ç¨æçæ®µï¼ å³ä½¿èç¹å¯¹è¿äºçæ®µä¸æå´è¶£ã

> BitSwapä¸­çæ°¸ä¹å¸åºæä¹çè§£ï¼



#### 3.4.1 - BITSWAP ä¿¡ç¨

è¿ä¸ªåè®®å¿é¡»å¸¦ææ¿å±æºå¶ï¼ å»æ¿å±èç¹seed ä¸ºå¶ä»èç¹æä¾æéè¦çåï¼èå®ä»¬æ¬èº«æ¯ä¸éè¦è¿äºåçã å æ­¤ï¼ BitSwapçèç¹å¾ç§¯æå»ç»å¯¹ç«¯èç¹åéåï¼æå¾è·å¾æ¥é¬ãä½å¿é¡»é²æ­¢æ°´è­æ»å»ï¼ç©ºè´è½½èç¹ä»ä¸å±äº«åï¼ï¼ä¸ä¸ªç®åçç±»ä¼¼ä¿¡ç¨çç³»ç»è§£å³äºè¿äºé®é¢ï¼

1. å¯¹ç­èç¹é´ä¼è¿½è¸ªä»ä»¬çå¹³è¡¡ï¼éè¿å­èè®¤è¯çæ¹å¼ï¼ã

2. éçåºå¡å¢å èæ¦çéä½ï¼å¯¹ç­èæ¦ççååºå¡äººåéåã

â

æ³¨æçæ¯ï¼å¦æèç¹å³å®ä¸åéå°å¯¹ç­ä½ï¼èç¹éåå¿½ç¥å¯¹ç­ä½çignore_cooldownè¶æ¶ã è¿æ ·å¯ä»¥é²æ­¢åéèå°è¯å¤æ¬¡åéï¼æ´ªæ°´æ»å»ï¼ ï¼BitSwapé»è®¤æ¯10ç§ï¼ã

#### 3.4.2 BITSWAPçç­ç¥

BitSwap å¯¹ç­èç¹éç¨å¾å¤ä¸åçç­ç¥ï¼è¿äºç­ç¥å¯¹æ´ä¸ªæ°æ®åçäº¤æ¢æ§è¡åäº§çäºä¸åçå·¨å¤§å½±åãå¨BT ä¸­ï¼ æ åç­ç¥æ¯æç¡®è§å®çï¼tit-for-tatï¼ï¼å¶ä»ä¸åçç­ç¥ä¹å·²ç»è¢«å®æ½ï¼ä»BitTyrant [8]ï¼å°½å¯è½åäº«ï¼å°BitThief [8]ï¼å©ç¨ä¸ä¸ªæ¼æ´ï¼ä»ä¸å±äº«ï¼ï¼å°PropShare [8]ï¼ææ¯ä¾åäº«ï¼ãBitSwap å¯¹ç­ä½å¯ä»¥ç±»ä¼¼å°å®ç°ä¸ç³»åçç­ç¥ï¼è¯å¥½åæ¶æï¼ãå¯¹äºåè½çéæ©ï¼åºè¯¥çåï¼

1. ä¸ºæ´ä¸ªäº¤æåèç¹æå¤§åäº¤æè½åã
2. ä¸ºäºé²æ­¢ç©ºè´è½½èç¹å©ç¨åæå®³äº¤æã
3. é«ææµå¶æªç¥ç­ç¥ã
4. å¯¹å¯ä¿¡ä»»çå¯¹ç­èç¹æ´å®½å®¹ã

æ¢ç´¢è¿äºç­ç¥çç©ºç½æ¯æªæ¥çäºæãå¨å®è·µä¸­ä½¿ç¨çä¸ä¸ªéæ©æ§åè½æ¯sigmoidï¼æ ¹æ®è´åºæ¯ä¾è¿è¡ç¼©æ¾ï¼

è®©è´åºæ¯ä¾å¨ä¸ä¸ªèç¹åå®å¯¹ç­èç¹ä¹é´ï¼

```
r =  bytes_sent  / bytes_recv + 1
```
æ ¹æ®rï¼åéå°è´åºèç¹çæ¦çä¸ºï¼

```
P(send | r ) = 1 â ( 1/  ( 1 + exp(6 â 3r) ) )
```

æ­£å¦ä½ çå°çå¾ç1ï¼å½èç¹è´åºæ¯ä¾è¶è¿èç¹å·²å»ºç«ä¿¡è´·çä¸¤åï¼åéå°è´åºèç¹çæ¦çå°±ä¼æ¥éä¸éã

![WX20180522-135812](../PIC/WX20180522-135812.png)

```
å¾ç1  å½rå¢å æ¶åéçæ¦ç
```

è´åºæ¯æ¯ä¿¡ä»»çè¡¡éæ åï¼å¯¹äºä¹åæåçäºæ¢è¿å¾å¤æ°æ®çèç¹ä¼å®½å®¹åºå¡ï¼èå¯¹ä¸ä¿¡ä»»ä¸äºè§£çèç¹ä¼ä¸¥æ ¼å¾å¤ãè¿ä¸ª(a)ç»ä¸é£äºåé å¾å¤èç¹çæ»å»èï¼sybill æ»å»ï¼ä¸ä¸ªéç¢ã(b)ä¿æ¤äºä¹åæåäº¤æèç¹ä¹é´çå³ç³»ï¼å³ä½¿è¿ä¸ªèç¹ææ¶æ æ³æä¾æ°æ®ã(c)æç»é»å¡é£äºå³ç³»å·²ç»æ¶åçèç¹ä¹é´çéä¿¡ï¼ç´å°ä»ä»¬è¢«åæ¬¡è¯æã

#### 3.4.3 BITSWAP è´¦æ¬

BitSwapèç¹ä¿å­äºä¸ä¸ªè®°å½ä¸ææå¶ä»èç¹ä¹é´äº¤æçè´¦æ¬ãè¿ä¸ªå¯ä»¥è®©èç¹è¿½è¸ªåå²è®°å½ä»¥åé¿åè¢«ç¯¡æ¹ãå½æ¿æ´»äºä¸ä¸ªé¾æ¥ï¼BitSwapèç¹å°±ä¼äºæ¢å®ä»¬è´¦æ¬ä¿¡æ¯ãå¦æè¿äºè´¦æ¬ä¿¡æ¯å¹¶ä¸å®å¨ç¸åï¼åç±»è´¦æ¬å°ä¼éæ°åå§åï¼ é£äºåºè®¡ä¿¡è´·ååºå¡ä¼ä¸¢å¤±ã æ¶æèç¹ä¼ææå»å¤±å»âè¿äºâè´¦æ¬ï¼ ä»èæææ¸é¤èªå·±çåºå¡ãèç¹æ¯ä¸å¤ªå¯è½å¨å¤±å»äºåºè®¡ä¿¡æçæåµä¸è¿è½ç´¯ç§¯è¶³å¤çåºå¡å»ææè®¤è¯ãä¼ä¼´èç¹å¯ä»¥èªç±çå°å¶è§ä¸ºä¸å½è¡ä¸ºï¼ æç»äº¤æã

```go
 type Ledger struct {
    owner NodeId
    partner NodeId
    bytes_sent int
    bytes_recv int
    timestamp Timestamp
}
```

èç¹å¯ä»¥èªç±çä¿çåå¸å¼è´¦æ¬åå²ï¼è¿ä¸éè¦æ­£ç¡®çæä½ï¼å ä¸ºåªæå½åçåç±»è´¦æ¬æ¡ç®æ¯æç¨çãèç¹ä¹å¯ä»¥æ ¹æ®éè¦èªç±æ¶éåå¸å¼å¸æ¬ï¼ä»ä¸å¤ªæç¨çåå¸å¼å¸å¼å§ï¼èï¼å¶ä»å¯¹ç­èç¹å¯è½ä¸å­å¨ï¼åå°ã

#### 3.4.4 BITSWAP è¯¦è§£

BitSwap èç¹æä»¥ä¸ç®åçåè®®ã

```go
// Additional state kept
  type BitSwap struct {
     ledgers map[NodeId]Ledger // Ledgers known to this node, inc inactive
     active map[NodeId]Peer // currently open connections to other nodes
     need_list []Multihash // checksums of blocks this node needs
     have_list []Multihash // checksums of blocks this node has
  }
  type Peer struct {
     nodeid NodeId
     ledger Ledger // Ledger between the node and this peer
     last_seen Timestamp // timestamp of last received message
     want_list []Multihash // checksums of all blocks wanted by peer
     // includes blocks wanted by peer's peers
}
 // Protocol interface:
 interface Peer {
    open (nodeid : NodeId, ledger : Ledger);
    send_want_list (want_list : WantList);
    send_block(block: Block) -> (complete:Bool);
    close(final: Bool);
}
```

å¯¹ç­è¿æ¥ççå½å¨æèå¾ï¼

1. Open: å¯¹ç­èç¹é´åéledgers ç´å°ä»ä»¬åæã
2. Sending: å¯¹ç­èç¹é´äº¤æ¢want_lists åblocksã
3. Close: å¯¹ç­èç¹æ­å¼é¾æ¥ã
4. Ignored: ï¼ç¹æ®ï¼å¯¹ç­ä½è¢«å¿½ç¥ï¼ç­å¾æ¶é´çè¶æ¶ï¼å¦æèç¹éç¨é²æ­¢åéç­ç¥ã

**Peer.open(NodeId, Ledger).**
å½åçé¾æ¥çæ¶åï¼èç¹ä¼åå§åé¾æ¥çè´¦æ¬ï¼è¦ä¹ä¿å­ä¸ä¸ªä»½é¾æ¥è¿å»çè´¦æ¬ï¼è¦ä¹åå»ºä¸ä¸ªæ°çè¢«æ¸é¶çè´¦æ¬ãç¶åï¼åéä¸ä¸ªæºå¸¦è´¦æ¬çopenä¿¡æ¯ç»å¯¹ç­èç¹ã
æ¥æ¶å°ä¸ä¸ªopenä¿¡æ¯ä¹åï¼å¯¹ç­èç¹å¯ä»¥éæ©æ¯å¦æ¥åæ­¤é¾æ¥ãå¦æï¼æ ¹æ®æ¥æ¶èçè´¦æ¬ï¼åéèæ¯ä¸ä¸ªä¸å¯ä¿¡çä»£çï¼ä¼ è¾ä½äºé¶æèæå¾å¤§çæªå¿è¿çåºå¡ï¼ï¼æ¥æ¶èå¯è½ä¼éæ©å¿½ç¥è¿ä¸ªè¯·æ±ãå¿½ç¥è¯·æ±æ¯ignore_cooldownè¶æ¶æ¥æ¦çæ§å®ç°çï¼ä¸ºäºè®©éè¯¯è½å¤ææ¶é´æ¹æ­£åæ»å»èè¢«æ«è´¥ã
å¦æé¾æ¥æåï¼æ¥æ¶èç¨æ¬å°è´¦æ¬æ¥åå§åä¸ä¸ªPeerå¯¹è±¡ä»¥åè®¾ç½®last_seenæ¶é´æ³ãç¶åï¼å®ä¼å°æ¥åå°çè´¦æ¬ä¸èªå·±çè´¦æ¬è¿è¡æ¯è¾ãå¦æä¸¤ä¸ªè´¦æ¬å®å¨ä¸æ ·ï¼é£ä¹è¿ä¸ªé¾æ¥å°±è¢«Openï¼å¦æè´¦æ¬å¹¶ä¸å®å¨ä¸è´ï¼é£ä¹æ­¤èç¹ä¼åå»ºä¸ä¸ªæ°çè¢«æ¸é¶çè´¦æ¬å¹¶ä¸ä¼åéæ­¤è´¦æ¬ã
**Peer.send_want_list(WantList)**
å½é¾æ¥å·²ç»Opençæ¶åï¼èç¹ä¼å¹¿åå®ä»¬çwant_listç»ææå·²ç»é¾æ¥çå¯¹ç­èç¹ãè¿ä¸ªæ¯å¨(a)opené¾æ¥å(b)éæºé´æ­è¶æ¶å(c)want_listæ¹åå(d)æ¥æ¶å°ä¸ä¸ªæ°çåä¹åå®æçã
å½æ¥æ¶å°ä¸ä¸ªwant_listä¹åï¼èç¹ä¼å­å¨å®ãç¶åï¼ä¼æ£æ¥èªå·±æ¯å¦æ¥æä»»ä½å®æ³è¦çåãå¦ææï¼ä¼æ ¹æ®ä¸é¢æå°çBitSwapç­ç¥æ¥å°want_listæéè¦çååéåºå»ã
**Peer.send_block(Block)**
åéä¸ä¸ªåæ¯ç´æ¥äºå½çãèç¹åªæ¯ä¼ è¾æ°æ®åãå½æ¥æ¶å°äºæææ°æ®çæ¶åï¼æ¥æ¶èä¼è®¡ç®å¤éhashæ ¡éªåæ¥éªè¯å®æ¯å¦æ¯èªå·±æéæ°æ®ï¼ç¶ååéç¡®è®¤ä¿¡æ¯ã
å¨å®æä¸ä¸ªæ­£ç¡®çåä¼ è¾ä¹åï¼æ¥åèä¼å°æ­¤åä»need_listç§»å°have_list,æåæ¥æ¶èååéèé½ä¼æ´æ°å®ä»¬çè´¦æ¬æ¥åæ åºä¼ è¾çé¢å¤æ°æ®å­èæ°ã
å¦æä¸ä¸ªä¼ è¾éªè¯å¤±è´¥äºï¼åéèè¦ä¹ä¼åºæéè¦ä¹ä¼æ»å»æ¥æ¶èï¼æ¥æ¶èå¯ä»¥éæ©æç»åé¢çäº¤æãæ³¨æï¼BitSwapæ¯ææè½å¤å¨ä¸ä¸ªå¯é çä¼ è¾ééä¸è¿è¡æä½çï¼æä»¥ä¼ è¾éè¯¯ï¼å¯è½ä¼å¼èµ·ä¸ä¸ªå¯¹è¯å®åéèéè¯¯çæ©ç½ï¼æ¯ææå¨æ°æ®åéç»BitSwapä¹åè½å¤è¢«ææå°ã
**Peer.close(Bool)**
ä¼ ç»closeæåçä¸ä¸ªåæ°ï¼ä»£è¡¨closeé¾æ¥æ¯å¦æ¯åéèçææ¿ãå¦æåæ°å¼ä¸ºfalse,æ¥æ¶èå¯è½ä¼ç«å³éæ°opené¾æ¥ï¼è¿é¿åé¾è¿æ©çcloseé¾æ¥ã
ä¸ä¸ªå¯¹ç­èç¹closeé¾æ¥åçå¨ä¸é¢ä¸¤ç§æåµä¸ï¼

silence_waitè¶æ¶å·²ç»è¿æï¼å¹¶ä¸æ²¡ææ¥æ¶å°æ¥èªäºå¯¹ç­èç¹çä»»ä½ä¿¡æ¯ï¼BitSwapé»è®¤ä½¿ç¨30ç§ï¼ï¼èç¹ä¼åéPeer.close(false)ã

å¨èç¹éåºåBitSwapå³é­çæ¶åï¼èç¹ä¼åéPeer.close(true).

æ¥æ¶å°closeæ¶æ¯ä¹åï¼æ¥æ¶èååéèä¼æ­å¼é¾æ¥ï¼æ¸é¤ææè¢«å­å¨çç¶æãè´¦æ¬å¯è½ä¼è¢«ä¿å­ä¸æ¥ä¸ºäºä»¥åçä¾¿å©ï¼å½ç¶ï¼åªæå¨è¢«è®¤ä¸ºè´¦æ¬ä»¥åä¼æç¨æ¶æä¼è¢«ä¿å­ä¸æ¥ã

æ³¨æç¹ï¼

éopenä¿¡æ¯å¨ä¸ä¸ªä¸æ´»è·çè¿æ¥ä¸åºè¯¥æ¯è¢«å¿½ç¥çãå¨åésend_blockä¿¡æ¯æ¶ï¼æ¥æ¶èåºè¯¥æ£æ¥è¿ä¸ªåï¼çå®æ¯å¦æ¯èªå·±æéçï¼å¹¶ä¸æ¯å¦æ¯æ­£ç¡®çï¼å¦ææ¯ï¼å°±ä½¿ç¨æ­¤åãæ»ä¹ï¼ææä¸è§åçä¿¡æ¯é½ä¼è®©æ¥æ¶èè§¦åä¸ä¸ªclose(false)ä¿¡æ¯å¹¶ä¸å¼ºå¶æ§çéåå§åæ­¤é¾æ¥ã

### 3.5 Merkle DAGå¯¹è±¡

DHTåBitSwapåè®¸IPFSæé ä¸ä¸ªåºå¤§çç¹å¯¹ç¹ç³»ç»ç¨æ¥å¿«éç¨³å®çåååå­å¨ãæä¸»è¦çæ¯ï¼IPFSå»ºé äºä¸ä¸ªMerkle DAG,ä¸ä¸ªæ åè·¯æåå¾ï¼å¯¹è±¡ä¹é´çlinksé½æ¯hashå å¯åµå¥å¨æºç®æ ä¸­ãè¿æ¯Gitæ°æ®ç»æçä¸ç§æ¨å¹¿ãMerkle DAGSç»IPFSæä¾äºå¾å¤æç¨çå±æ§ï¼åæ¬ï¼

1. åå®¹å¯å¯»åï¼ææåå®¹é½æ¯è¢«å¤éhashæ ¡éªåæ¥å¯ä¸è¯å«çï¼åæ¬linksã
2. é²æ­¢ç¯¡æ¹ï¼ææçåå®¹é½ç¨å®çæ ¡éªåæ¥éªè¯ãå¦ææ°æ®è¢«ç¯¡æ¹ææåï¼IPFSä¼æ£æµå°ã
3. éå¤æ°æ®å é¤ï¼ææçå¯¹è±¡é½æ¥æç¸åçåå®¹å¹¶åªå­å¨ä¸æ¬¡ãè¿å¯¹äºç´¢å¼å¯¹è±¡éå¸¸æç¨ï¼æ¯å¦gitçtreeåcommitsï¼æèæ°æ®çå¬å±é¨åã

IPFSå¯¹è±¡çæ ¼å¼æ¯ï¼

```go
  type IPFSLink struct {
        Name string      // æ­¤linkçå«å
        Hash Multihash // ç®æ çå å¯hash
        Size int             // ç®æ æ»å¤§å°
  }

type IPFSObject struct {
      links []IPFSLink   //linksæ°ç»
      data []byte         //ä¸éæåå®¹æ°æ®
}
```

IPFS Merkle DAGæ¯å­å¨æ°æ®éå¸¸çµæ´»çä¸ç§æ¹å¼ãåªè¦æ±å¯¹è±¡å¼ç¨æ¯(aï¼åå®¹å¯å¯»åçï¼(b)ç¨ä¸é¢çæ ¼å¼ç¼ç ãIPFSåè®¸åºç¨å®å¨çææ§æ°æ®åï¼åºç¨å¯ä»¥ä½¿ç¨ä»»ä½èªå®ä¹æ ¼å¼çæ°æ®ï¼å³ä½¿æ°æ®IPFSé½æ æ³çè§£ãåç¬çåé¨å¯¹è±¡linkè¡¨åè®¸IPFSåï¼

- ç¨å¯¹è±¡çå½¢å¼ååºææå¯¹è±¡å¼ç¨ï¼ä¾å¦ï¼

  ```powershell
    > ipfs ls /XLZ1625Jjn7SubMDgEyeaynFuR84ginqvzb
  XLYkgq61DYaQ8NhkcqyU7rLcnSa7dSHQ16x 189458 less
  XLHBNmRQ5sJJrdMPuu48pzeyTtRo39tNDR5 19441 script
  XLF4hwVHsVuZ78FZK6fozf8Jj9WEURMbCX4 5286 template

     <object multihash> <object size> <link name>
  ```


- è§£å³å­ç¬¦ä¸²è·¯ç»æ¥æ¾ï¼ä¾å¦foo/bar/bazãç»åºä¸ä¸ªå¯¹è±¡ï¼IPFSä¼è§£æç¬¬ä¸ä¸ªè·¯ç»æåè¿è¡hashæ¾å¥å°å¯¹è±¡çlinkè¡¨ä¸­ï¼åè·åè·¯å¾çç¬¬äºä¸ªç»æé¨åï¼ä¸ç´å¦æ­¤éå¤ä¸å»ãå æ­¤ï¼ä»»ä½æ°æ®æ ¼å¼çå­ç¬¦ä¸²è·¯ç»é½å¯ä»¥å¨Merkle DAGä¸­ä½¿ç¨ã



  *éå½æ§çè§£å³ææå¯¹è±¡å¼ç¨ï¼

  ```powershell
    > ipfs refs --recursive \
  /XLZ1625Jjn7SubMDgEyeaynFuR84ginqvzb
  XLLxhdgJcXzLbtsLRL1twCHA2NrURp4H38s
  XLYkgq61DYaQ8NhkcqyU7rLcnSa7dSHQ16x
  XLHBNmRQ5sJJrdMPuu48pzeyTtRo39tNDR5
  XLWVQDqxo9Km9zLyquoC9gAP8CL1gWnHZ7z
  ```

åå§æ°æ®ç»æå¬å±linkç»ææ¯IPFSæå»ºä»»ææ°æ®ç»æçå¿è¦ç»æé¨åãå¯ä»¥å¾å®¹æçåºGitçå¯¹è±¡æ¨¡åæ¯å¦ä½å¥ç¨DAGçãä¸äºå¶ä»æ½å¨çæ°æ®ç»æï¼

- (a)é®å¼å­å¨
- (b)ä¼ ç»å³ç³»åæ°æ®
- (c)æ°æ®ä¸åå­å¨
- (d) ææ¡£åå¸ç³»ç»
- (e)éä¿¡å¹³å°
- (f)å å¯è´§å¸åºåã
  è¿äºç³»ç»é½å¯ä»¥å¥ç¨IPFS Merkle DAGï¼è¿ä½¿è¿äºç³»ç»æ´å¤æçåºç¨å¯ä»¥ä½¿ç¨IPFSä½ä¸ºä¼ è¾åè®®ã

#### 3.5.1 è·¯ç»

IPFSå¯¹è±¡å¯ä»¥éåä¸ä¸ªå­ç¬¦ä¸²è·¯ç»ãè·¯ç»æ ¼å¼ä¸ä¼ ç»UNIXæä»¶ç³»ç»ä»¥åWebä¸è´ãMerkle DAGçlinksä½¿éååå¾å¾å®¹æãå¨ç§°è·¯ç»å¨IPFSä¸­çæ ¼å¼æ¯ï¼

```powershell
*# æ ¼å¼
/ipfs/<hash-of-object>/<name-path-to-object>
*# ä¾å­
/ipfs/XLYkgq61DYaQ8NhkcqyU7rLcnSa7dSHQ16x/foo.txt
```

/ipfsåç¼åè®¸åªè¦å¨æè½½ç¹ä¸å²çª(æè½½ç¹åç§°å½ç¶æ¯å¯éç½®ç)çæåµä¸æè½½å°ä¸ä¸ªå·²å­å¨çç³»ç»ä¸ãç¬¬äºä¸ªè·¯ç»ç»æé¨å(ç¬¬ä¸ä¸ªæ¯IPFS)æ¯ä¸ä¸ªå¯¹è±¡çhashãéå¸¸é½æ¯è¿ç§æåµï¼å ä¸ºæ²¡æå¨å±çæ ¹ãä¸ä¸ªæ ¹å¯¹è±¡å¯è½ä¼æä¸ä¸ªä¸å¯è½å®æçä»»å¡ï¼å°±æ¯å¨åå¸å¼ç¯å¢(å¯è½è¿æ­å¼é¾æ¥)ä¸­å¤çç¾ä¸å¯¹è±¡çä¸è´æ§ãå æ­¤ï¼æä»¬ç¨å°åå¯å¯»åæ¥æ¨¡ææ ¹ãéè¿çhashææçå¯¹è±¡é½æ¯å¯è®¿é®çãè¿æææ¯è¯´ï¼ç»ä¸ä¸ªè·¯ç»å¯¹è±¡/bar/bazï¼æåä¸ä¸ªå¯¹è±¡å¯ä»¥å¯ä»¥è¢«ææçè®¿é®çï¼

```powershell
/ipfs/<hash-of-foo>/bar/baz
/ipfs/<hash-of-bar>/baz
/ipfs/<hash-of-baz>
```

#### 3.5.2 æ¬å°å¯¹è±¡

IPFSå®¢æ·ç«¯éè¦ä¸ä¸ªæ¬å°å­å¨å¨ï¼ä¸ä¸ªå¤é¨ç³»ç»å¯ä»¥ä¸ºIPFSç®¡ççå¯¹è±¡å­å¨ä»¥åæ£ç´¢æ¬å°åå§æ°æ®ãå­å¨å¨çç±»åæ ¹æ®èç¹ä½¿ç¨æ¡ä¾ä¸åèä¸åãå¨å¤§å¤æ°æåµä¸ï¼è¿ä¸ªå­å¨å¨åªæ¯ç¡¬çç©ºé´çä¸é¨åï¼ä¸æ¯è¢«æ¬å°çæä»¶ç³»ç»ä½¿ç¨é®å¼å­å¨å¦leveldbæ¥ç®¡çï¼å°±æ¯ç´æ¥è¢«IPFSå®¢æ·ç«¯ç®¡çï¼ï¼å¨å¶ä»çæåµä¸ï¼ä¾å¦éæä¹æ§ç¼å­ï¼å­å¨å¨å°±æ¯RAMçä¸é¨åã
æç»ï¼ææçåå¨IPFSä¸­é½æ¯è½å¤è·åçå°çï¼åé½å­å¨å¨äºä¸äºèç¹çæ¬å°å­å¨å¨ä¸­ãå½ç¨æ·è¯·æ±ä¸ä¸ªå¯¹è±¡æ¶ï¼è¿ä¸ªå¯¹è±¡ä¼è¢«æ¥æ¾å°å¹¶ä¸è½½ä¸æ¥å­å¨å°æ¬å°ï¼è³å°ä¹æ¯ææ¶çå­å¨å¨æ¬å°ãè¿ä¸ºä¸äºå¯éç½®æ¶é´éæä¾äºå¿«éçæ¥æ¾ã

#### 3.5.3 å¯¹è±¡éå®

å¸æç¡®ä¿ç¹å®å¯¹è±¡çå­çèç¹å¯ä»¥éå®æ­¤å¯¹è±¡ãè¿ä¿è¯æ­¤ç¹å®å¯¹è±¡è¢«ä¿å­å¨äºèç¹çæ¬å°å­å¨å¨ä¸ãä¹å¯ä»¥éå½çè¿è¡éå®ææç¸å³çæ´¾çå¯¹è±¡ãè¿ä½¿ææè¢«æå®çå¯¹è±¡é½ä¿å­å¨æ¬å°å­å¨å¨ä¸ãè¿å¯¹é¿ä¹ä¿å­æä»¶ç¹å«æç¨ï¼åæ¬å¼ç¨ãè¿ä¹åæ ·è®©IPFSæä¸ºä¸ä¸ªlinksæ¯æ°¸ä¹çWebï¼ä¸å¯¹è±¡å¯ä»¥ç¡®ä¿å¶ä»è¢«æå®å¯¹è±¡ççå­ã

#### 3.5.4 åå¸å¯¹è±¡

IPFSæ¯å¨çåå¸çãå®è®¾è®¡ä¸ºåè®¸æåä¸ä¸çç¨æ·æä»¶å¯ä»¥å±åçå­å¨çãDHTä½¿ç¨åå®¹åå¸å¯»åææ¯ï¼ä½¿åå¸å¯¹è±¡æ¯å¬å¹³çï¼å®å¨çï¼å®å¨åå¸å¼çãä»»ä½äººé½å¯ä»¥åå¸å¯¹è±¡ï¼åªéè¦å°å¯¹è±¡çkeyå å¥å°DHTä¸­ï¼å¹¶ä¸ä»¥å¯¹è±¡æ¯å¯¹ç­èç¹çæ¹å¼å å¥è¿å»ï¼ç¶åæè·¯å¾ç»å¶ä»çç¨æ·ãè¦æ³¨æçæ¯ï¼å¯¹è±¡æ¬è´¨ä¸æ¯ä¸å¯æ¹åçï¼å°±åå¨Gitä¸­ä¸æ ·ãæ°çæ¬çåå¸å¼ä¸åï¼å æ­¤æ¯æ°å¯¹è±¡ãè·è¸ªçæ¬åæ¯é¢å¤çæ¬å¯¹è±¡çå·¥ä½ã

#### 3.5.5 å¯¹è±¡çº§å«çå å¯

`IPFS`æ¯å·å¤å¯ä»¥å¤çå¯¹è±¡çº§å«å å¯æä½çãä¸ä¸ªå·²å å¯çæèå·²ç­¾åçå¯¹è±¡åè£å¨ä¸ä¸ªç¹æ®çæ¡æ¶éï¼æ­¤æ¡æ¶åè®¸å å¯åéªè¯åå§å­èã

```go
type EncryptedObject struct {
	Object []bytes // å·²å å¯çåå§å¯¹è±¡æ°æ®
	Tag []bytes    // å¯éæ©çå å¯æ è¯
	type SignedObject struct {
	Object []bytes  // å·²ç­¾åçåå§å¯¹è±¡æ°æ®
	Signature []bytes // HMACç­¾å
	PublicKey []multihash // å¤éåå¸èº«ä»½é®å¼
}
```

å å¯æä½æ¹åäºå¯¹è±¡çåå¸å¼ï¼å®ä¹ä¸ä¸ªä¸åçæ°çå¯¹è±¡ãIPFSèªå¨çéªè¯ç­¾åä»¥åä½¿ç¨ç¨æ·æå®çé¥åé¾è§£å¯æ°æ®ãå å¯æ°æ®çlinksä¹åæ ·çè¢«ä¿æ¤çï¼æ²¡æè§£å¯ç§é¥å°±æ æ³éåå¯¹è±¡ãä¹å­å¨çä¸ç§ç°è±¡ï¼å¯è½ç¶å¯¹è±¡ä½¿ç¨äºä¸ä¸ªç§é¥è¿è¡äºå å¯ï¼èå­å¯¹è±¡ä½¿ç¨äºå¦ä¸ä¸ªç§é¥è¿è¡å å¯æèæ ¹æ¬æ²¡æå å¯ãè¿å¯ä»¥ä¿è¯linkså±äº«å¯¹è±¡å®å¨ã

### 3.6 æä»¶

IPFSå¨Merkle DAGä¸è¿ä¸ºæ¨¡ååçæ¬æä»¶ç³»ç»å®ä¹äºä¸ç»å¯¹è±¡ãè¿ä¸ªå¯¹è±¡æ¨¡åä¸Gitæ¯è¾ç¸ä¼¼ï¼
Blockï¼ä¸ä¸ªå¯åå¤§å°çæ°æ®å
Listï¼åæèå¶ä»é¾è¡¨çéå
Treeï¼åï¼é¾è¡¨ï¼æèå¶ä»æ çéå
Commitï¼æ å¨çæ¬åå²è®°å½ä¸­çä¸ä¸ªå¿«ç§
æåæ¬å¸æä½¿ç¨ä¸Gitå¯¹è±¡æ ¼å¼ä¸è´çæ¨¡åï¼ä½é£å°±å¿é¡»è¦åå¼æ¥å¼è¿å¨åå¸å¼æä»¶ç³»ç»ä¸­æç¨çæäºç¹å¾ï¼å¦

(a)å¿«éå¤§å°æ¥æ¾(æ»å­èå¤§å°å·²ç»å å¥å°å¯¹è±¡ä¸­)

(b)å¤§æä»¶çéå¤å é¤(æ·»å å°listå¯¹è±¡)

(c)commitsåµå¥å°treesä¸­ãä¸è¿ï¼IPFSæä»¶å¯¹è±¡ä¸Gitè¿æ¯éå¸¸ç¸è¿çï¼ä¸¤èä¹é´è¿è¡äº¤æµé½æ¯æå¯è½çãèä¸ï¼Gitçä¸ä¸ªç³»åçå¯¹è±¡å¯ä»¥è¢«å¼è¿è¿æ¥è½¬æ¢é½ä¸ä¼ä¸¢å¤±ä»»ä½çä¿¡æ¯ãï¼UNIXæä»¶æéç­ç­ï¼ã

â

æ è®°ï¼ä¸é¢çæä»¶å¯¹è±¡æ ¼å¼ä½¿ç¨JSONãæ³¨æï¼è½ç¶IPFSåå«äºJSONçäºç¸è½¬æ¢ï¼ä½æ¯æä»¶å¯¹è±¡çç»æä½è¿æ¯ä½¿ç¨protobufsçäºè¿å¶ç¼ç ã

#### 3.6.1 æä»¶å¯¹è±¡ï¼BLOB

blobå¯¹è±¡ä»£è¡¨ä¸ä¸ªæä»¶ä¸åå«ä¸ä¸ªå¯å¯»åçæ°æ®ååï¼IPFSçblobså°±åGitçblobsæèæä»¶ç³»ç»æ°æ®åãå®ä»¬å­å¨ç¨æ·çæ°æ®ãéè¦çæçæ¯IPFSæä»¶å¯ä»¥ä½¿ç¨listsæèblobsæ¥è¡¨ç¤ºãBlobsæ²¡ælinksã

```json
{
"data": "some data here",  // blobsæ links
}
```
#### 3.6.2 æä»¶å¯¹è±¡: LIST

Listå¯¹è±¡ä»£è¡¨çç±å ä¸ªIPFSçblobsè¿æ¥æçå¤§æä»¶æèéå¤æ°æ®å é¤æä»¶ãListsåå«çæåºçblobåºåælistå¯¹è±¡ãä»æç§ç¨åº¦ä¸èè¨ï¼IPFSçlistå½æ°å°±åä¸ä¸ªé´æ¥åçæä»¶ç³»ç»ãç±äºlistså¯ä»¥åå«å¶ä»çlistsï¼é£ä¹åå«linkedçé¾è¡¨åå¹³è¡¡æ çææç»ææ¯æå¯è½çãæåå¾ä¸­ç¸åçèç¹åºç°å¨å¤ä¸ªä¸åå°æ¹åè®¸å¨æä»¶ä¸­éå¤æ°æ®å é¤ãå½ç¶ï¼å¾ªç¯æ¯ä¸å¯ä»¥è½çï¼å ä¸ºæ¯è¢«åå¸å¯»åå¼ºå¶å®è¡çã

```json
{
"data": ["blob", "list", "blob"], //listsæä¸ä¸ªå¯¹è±¡ç±»åçæ°ç»ä½ä¸ºæ°æ®
"links": [
{ "hash": "XLYkgq61DYaQ8NhkcqyU7rLcnSa7dSHQ16x",
"size": 189458 },
{ "hash": "XLHBNmRQ5sJJrdMPuu48pzeyTtRo39tNDR5",
"size": 19441 },
{ "hash": "XLWVQDqxo9Km9zLyquoC9gAP8CL1gWnHZ7z",
"size": 5286 } //å¨linksä¸­listsæ¯æ²¡æåå­ç
]
}
```

#### 3.6.3 æä»¶å¯¹è±¡ï¼TREE

IPFSä¸­çtreeå¯¹è±¡ä¸Gitä¸­ç¸ä¼¼ï¼å®ä»£è¡¨çä¸ä¸ªç®å½ï¼ä¸ä¸ªåå­å°åå¸å¼çæ å°ãåå¸å¼åè¡¨ç¤ºçblobsï¼listsï¼å¶ä»çtreesï¼æècommitsãæ³¨æï¼ä¼ ç»è·¯å¾çå½åæ©å·²ç»è¢«Merkle DAGå®ç°äºã

```json
{
"data": ["blob", "list", "blob"],//treesæä¸ä¸ªå¯¹è±¡ç±»åçæ°ç»ä½ä¸ºæ°æ®
"links": [
{ "hash": "XLYkgq61DYaQ8NhkcqyU7rLcnSa7dSHQ16x",
"name": "less", "size": 189458 },
{ "hash": "XLHBNmRQ5sJJrdMPuu48pzeyTtRo39tNDR5",
"name": "script", "size": 19441 },
{ "hash": "XLWVQDqxo9Km9zLyquoC9gAP8CL1gWnHZ7z",
"name": "template", "size": 5286 }//treesæ¯æåå­ç
]
}
```

#### 3.6.4 æä»¶å¯¹è±¡ï¼COMMIT

IPFSä¸­çcommitå¯¹è±¡ä»£è¡¨ä»»ä½å¯¹è±¡å¨çæ¬åå²è®°å½ä¸­çä¸ä¸ªå¿«ç§ãä¸Gitä¸­ç±»ä¼¼ï¼ä½æ¯å®è½å¤è¡¨ç¤ºä»»ä½ç±»åçå¯¹è±¡ãå®åæ ·linkçåèµ·å¯¹è±¡ã
![img](https://gguoss.github.io/img/ipfs_figure2.png)
![img](https://gguoss.github.io/img/ipfs_figure3.png)

#### 3.6.5 çæ¬æ§å¶

Commitå¯¹è±¡ä»£è¡¨çä¸ä¸ªå¯¹è±¡å¨åå²çæ¬ä¸­çä¸ä¸ªç¹å®å¿«ç§ãå¨ä¸¤ä¸ªä¸åçcommitä¸­æ¯è¾å¯¹è±¡ï¼åå­å¯¹è±¡ï¼å¯ä»¥æ­é²åºä¸¤ä¸ªä¸åçæ¬æä»¶ç³»ç»çåºå«ãåªè¦commitåå®ææå­å¯¹è±¡çå¼ç¨æ¯è½å¤è¢«è®¿é®çï¼ææåçæ¬æ¯å¯è·åçï¼æææä»¶ç³»ç»æ¹åçå¨é¨åå²æ¯å¯è®¿é®çï¼è¿å°±ä¸Merkle DAGå¯¹è±¡æ¨¡åè±ç¦»å¼æ¥äºã

Gitçæ¬æ§å¶å·¥å·çææåè½å¯¹äºIPFSçç¨æ·æ¯å¯ç¨çãå¯¹è±¡æ¨¡åä¸å®å¨ä¸è´ï¼ä½ä¹æ¯å¯å¼å®¹çãè¿å¯è½

(a)æå»ºä¸ä¸ªGitå·¥å·çæ¬æ¹é æä½¿ç¨IPFSå¯¹è±¡å¾ï¼

(b)æå»ºä¸ä¸ªæè½½FUSEæä»¶ç³»ç»ï¼æè½½ä¸ä¸ªIPFSçtreeä½ä¸ºGitçä»åºï¼æGitæä»¶ç³»ç»çè¯»/åè½¬æ¢ä¸ºIPFSçæ ¼å¼ã

#### 3.6.6 æä»¶ç³»ç»è·¯å¾

å¦æä»¬å¨Merkle DAGä¸­çå°çä¸æ ·ï¼IPFSå¯¹è±¡å¯ä»¥ä½¿ç¨å­ç¬¦ä¸²è·¯å¾APIæ¥éåãIPFSæä»¶å¯¹è±¡æ¯ç¹æè®¾è®¡çï¼ä¸ºäºè®©æè½½IPFSå°UNIXæä»¶ç³»ç»æ´å ç®åãæä»¶å¯¹è±¡éå¶treesæ²¡ææ°æ®ï¼ä¸ºäºä½¿å®ä»¬å¯ä»¥è¡¨ç¤ºç®å½ãCommitså¯ä»¥ä»¥ä»£è¡¨ç®å½çå½¢å¼åºç°ï¼ä¹å¯ä»¥å®å¨çéèå¨æä»¶ç³»ç»ä¸­ã

#### 3.6.7 å°æä»¶åéæLISTSåBLOBS

çæ¬æ§å¶åååå¤§æä»¶å¶ä¸­ä¸ä¸ªæä¸»è¦çæææ¯ï¼æ¾å°ä¸ä¸ªæ­£ç¡®çæ¹æ³æ¥å°å®ä»¬åéæç¬ç«çåãä¸å¶è®¤ä¸ºIPFSå¯ä»¥ä¸ºæ¯ä¸ªä¸åç±»åçæä»¶æä¾æ­£ç¡®çåéæ¹æ³ï¼ä¸å¦è¯´IPFSæä¾äºä»¥ä¸çå ä¸ªå¯ééæ©ï¼
å°±åå¨LIBFS[?]ä¸­ä¸æ ·ä½¿ç¨Rabin Fingerprints [?]æ¥éæ©ä¸ä¸ªæ¯è¾åéçåè¾¹çã
ä½¿ç¨rsync[?] rolling-checksumç®æ³ï¼æ¥æ£æµåå¨çæ¬ä¹é´çæ¹åã
åè®¸ç¨æ·æå®ä¸ä¸ºç¹å®æä»¶èè°æ´çâå¿«åéâå½æ°ã

#### 3.6.8 è·¯å¾æ¥æ¾æ§è½

åºäºè·¯å¾çè®¿é®éè¦éåå¯¹è±¡å¾ãè·åæ¯ä¸ªå¯¹è±¡è¦æ±å¨DHTä¸­æ¥æ¾å®ä»¬çkeyï¼è¿æ¥å°å¯¹ç­èç¹ï¼ç¶åè·åå®çåãè¿é æç¸å½å¤§çå¼éï¼ç¹å«æ¯æ¥æ¾çè·¯å¾ç±å¾å¤å­è·¯å¾ç»ææ¶ãä¸é¢çæ¹æ³å¯ä»¥åç¼å¼éï¼

- treeç¼å­ï¼ç±äºææçå¯¹è±¡é½æ¯åå¸å¯»åçï¼å®ä»¬å¯ä»¥è¢«æ éçç¼å­ãå¦å¤ï¼treesä¸è¬æ¯è¾å°ï¼æä»¥æ¯èµ·blobsï¼IPFSä¼ä¼åç¼å­treesã

- flattened treesï¼å¯¹äºä»»ä½treeï¼ä¸ä¸ªç¹æ®ç flattened treeå¯ä»¥æå»ºä¸ä¸ªé¾è¡¨ï¼ææå¯¹è±¡é½å¯ä»¥ä»è¿ä¸ªtreeä¸­è®¿é®å¾å°ãå¨flattened treeä¸­åå­å°±æ¯ä¸ä¸ªä»åå§treeåç¦»çè·¯å¾ï¼ç¨æçº¿åéã

  â

  ä¾å¦ï¼å¯¹äºä¸é¢çttt111çflattened treeå¦ä¸ï¼

  ```json
  {
  "data":
  ["tree", "blob", "tree", "list", "blob" "blob"],
  "links": [
  { "hash": "<ttt222-hash>", "size": 1234
  "name": "ttt222-name" },
  { "hash": "<bbb111-hash>", "size": 123,
  "name": "ttt222-name/bbb111-name" },
  { "hash": "<ttt333-hash>", "size": 3456,
  "name": "ttt333-name" },
  { "hash": "<lll111-hash>", "size": 587,
  "name": "ttt333-name/lll111-name"},
  { "hash": "<bbb222-hash>", "size": 22,
  "name": "ttt333-name/lll111-name/bbb222-name" },
  { "hash": "<bbb222-hash>", "size": 22
  "name": "bbb222-name" }
  ] }
  ```

### 3.7 IPNSï¼å½åä»¥åæåç¶æ

 ç®åä¸ºæ­¢ï¼IPFSæ¡å½¢æäºä¸ä¸ªå¯¹ç­åäº¤æ¢ç»æä¸ä¸ªåå®¹å¯å¯»åçDAGå¯¹è±¡ãè¿æä¾äºåå¸åè·åä¸å¯æ¹åçå¯¹è±¡ãè¿çè³å¯ä»¥è·è¸ªè¿äºå¯¹è±¡ççæ¬åå²è®°å½ãä½æ¯ï¼è¿éæä¸ä¸ªå³é®æåéæ¼äºï¼æåçå½åãæ²¡æè¿ä¸ªï¼åéIPFSçlinksï¼æææ°åå®¹çéä¿¡è¯å®é½ä¼ææåå·®ãç°å¨æéå°±æ¯è½ææäºæ¹æ³å¯ä»¥è·åç¸åè·¯å¾ççæåç¶æã
è¿å¼å¾è¯¦è¿°åå âå¦ææç»æåæ°æ®æ¯å¿é¡»çâæä»¬è´¹äºå¾å¤§çåæ°æå»ºäºä¸ä¸ªä¸å¯æ¹åçMerkle DAGãå°±å½åIPFSè±ç¦»äºMerkle DAGçç¹å¾ï¼å¯¹è±¡å¯ä»¥

- (a)éè¿åå¸å¼å¯ä»¥è·å
- (b)å®æ´æ§çæ£æ¥
- (c)linkå¶ä»çå¯¹è±¡
- (d)æ éç¼å­ãä»æç§æä¹ä¸è¯´ï¼
  å¯¹è±¡å°±æ¯æ°¸æç
  è¿äºå°±æ¯ä¸ä¸ªé«æ§è½åå¸å¼ç³»ç»çå³é®ç¹å¾ï¼å¨æ­¤ç³»ç»ä¸è·¨ç½ç»linksä¹é´ç§»å¨æä»¶æ¯éå¸¸æè´µçãå¯¹è±¡åå®¹å¯å¯»åæå»ºäºä¸ä¸ªå·æä»¥ä¸ç¹ç¹çWebï¼(a)ä¼ç§çå®½å¸¦ä¼å(b)ä¸åä¿¡ä»»çåå®¹æå¡(c)æ°¸æçlinks(d)è½å¤æ°¸ä¹å¤ä»»ä½å¯¹è±¡ä»¥åå®çå¼ç¨ã

ä¸å¯åçåå®¹å¯å¯»åå¯¹è±¡åå½åçMerkle DAGï¼ å¯åæéæåMerkle DAGï¼å®ä¾åäºä¸ä¸ªåºç°å¨å¾å¤æååå¸å¼ç³»ç»ä¸­çäºåæ³ãè¿äºç³»ç»åæ¬Gitççæ¬æ§å¶ç³»ç»ï¼ä½¿ç¨ä¸å¯åçå¯¹è±¡åå¯åçå¼ç¨ï¼è¿æUNIXåå¸å¼çç»§æ¿èPlan9[?]æä»¶ç³»ç»ï¼ä½¿ç¨å¯åçFossilåä¸å¯åçVenti[?]ãLBFS[?]åæ ·ä½¿ç¨å¯åçç´¢å¼ä»¥åä¸å¯åçåã

#### 3.7.1 èªæè®¤è¯åç§°

ä½¿ç¨SFS[12,11]ä¸­çå½åæ¹æ¡ï¼ç»æä»¬æä¾äºä¸ä¸ªç§å¯ä»¥æå»ºèªæè®¤è¯åç§°çæ¹æ³ï¼
å¨ä¸ä¸ªå å¯æå®çå¨å±å½åç©ºé´ä¸­ï¼è¿æ¯å¯åçãIPFSçæ¹æ¡å¦ä¸ï¼

- 1.åæ³ä¸ä¸å¨IPFSä¸­ï¼NodeId = hash(node.PubKey)
- 2.æä»¬ç»æ¯ä¸ªç¨æ·åéä¸ä¸ªå¯åçå½åç©ºé´ï¼å¨æ­¤è·¯å¾ä¸ï¼/ipns/
- 3.ä¸ä¸ªç¨æ·å¯ä»¥å¨æ­¤è·¯å¾ä¸åå¸ä¸ä¸ªç¨èªå·±ç§é¥ç­¾åçå¯¹è±¡ï¼æ¯å¦è¯´ï¼/ipns/XLF2ipQ4jD3UdeX5xp1KBgeHRhemUtaA8Vm/
- 4.å½å¶ä»ç¨æ·è·åå¯¹è±¡æ¶ï¼ä»ä»¬å¯ä»¥æ£æµç­¾åæ¯å¦ä¸å¬é¥åNodeIdå¹éãè¿ä¸ªéªè¯äºç¨æ·åå¸å¯¹è±¡ççå®æ§ï¼è¾¾å°äºå¯åç¶æçè·åã

æ³¨æä¸é¢çç»èï¼

- IPNS(InterPlanetaryçå½åç©ºé´)åå¼åç¼æ¯å¨å¯ååä¸å¯åçè·¯å¾ä¹é´å»ºç«ä¸ä¸ªå¾å®¹æè¾¨è®¤çåºå«ï¼ä¸ºäºç¨åºä¹ä¸ºäºäººç±»éè¯»çä¾¿å©ã

- å ä¸ºè¿ä¸æ¯ä¸ä¸ªåå®¹å¯å¯»åçå¯¹è±¡ï¼æä»¥åå¸å®å°±è¦ä¾é IPFSä¸­çå¯ä¸çå¯åç¶æåéå¶åº¦ï¼è·¯ç±ç³»ç»ãè¿ç¨æ¯(a)é¦åææ­¤å¯¹è±¡åä¸ä¸ªå¸¸è§çä¸å¯åIPFSçå¯¹è±¡æ¥åå¸(b)å°æ­¤å¯¹è±¡çåå¸å¼ä½ä¸ºåæ°æ®çå¼åå¸å°è·¯ç±ç³»ç»ä¸ï¼

  ```
  routing.setValue(NodeId, <ns-object-hash>)
  ```

- åå¸çå¯¹è±¡ä¸­ä»»ä½linkså¨å½ä»¤ç©ºé´ä¸­åå½å­åç§°ï¼

  ```
  /ipns/XLF2ipQ4jD3UdeX5xp1KBgeHRhemUtaA8Vm/
  /ipns/XLF2ipQ4jD3UdeX5xp1KBgeHRhemUtaA8Vm/docs
  /ipns/XLF2ipQ4jD3UdeX5xp1KBgeHRhemUtaA8Vm/docs/ipfs
  ```

- ä¸è¬å»ºè®®åå¸ä¸ä¸ªcommitå¯¹è±¡æèå¶ä»å¯¹è±¡çæ¶åï¼è¦ä½¿ç¨åå²çæ¬è®°å½ï¼å ä¸ºè¿æ ·å°±ç¨æ·å°±å¯ä»¥æ¾å°ä¹åä½¿ç¨è¿çåå­ãä¸è¿ç±äºè¿å¹¶ä¸æ»æ¯éè¦çï¼æä»¥çä¸ªç¨æ·èªå·±éæ©ã
  æ³¨æå½ç¨æ·åå¸ä¸ä¸ªå¯¹è±¡çæ¶åï¼ä»ä¸è½ä½¿ç¨ç¸åçæ¹å¼æ¥åå¸å¯¹è±¡ã

#### 3.7.2äººç±»åå¥½åç§°

IPNSçç¡®æ¯ä¸ä¸ªåéåå¨åéåç§°çå¥½æ¹æ³ï¼ä½æ¯å¯¹ç¨æ·å´ä¸æ¯åååå¥½çï¼å ä¸ºå®ä½¿ç¨å¾é¿çåå¸å¼ä½ä¸ºåç§°ï¼ä¼æå¨ç¥è¿æ ·çåç§°å¾é¾è¢«è®°ä½ãIPNSè¶³å¤åºä»URLsï¼ä½å¯¹äºå¾å¤çº¿ä¸çä¼ è¾å·¥ä½å°±æ²¡æè¿ä¹å¥½ç¨äºãå æ­¤ï¼IPFSä½¿ç¨ä¸é¢çææ¯æ¥å¢å IPNSçç¨æ·åå¥½åº¦ã
å¯¹ç­èç¹Links
è¢«SFSæé¼èï¼ç¨æ·å¯ä»¥ç´æ¥å°å¶ä»ç¨æ·çå¯¹è±¡linkå°èªå·±çå¯¹è±¡ä¸ï¼å½ä»¤ç©ºé´ï¼å®¶ç®å½ç­ç­ï¼ãè¿æä¸ä¸ªå¥½å¤å°±æ¯åå»ºäºä¸ä¸ªå¯ä¿¡ä»»çWebï¼ä¹æ¯æèççå®æ§è®¤è¯æ¨¡åï¼ï¼

```
# Alice links å°Bobä¸
ipfs link /<alice-pk-hash>/friends/bob /<bob-pk-hash>
# Eve links å°Aliceä¸
ipfs link /<eve-pk-hash/friends/alice /<alice-pk-hash>
# Eve ä¹å¯ä»¥è®¿é®Bob
/<eve-pk-hash/friends/alice/friends/bob
# è®¿é®Verisign è®¤è¯å
/<verisign-pk-hash>/foo.com
```

DNS TXT IPNS è®°å½
å¦æ/ipns/æ¯ä¸ä¸ªææçååç§°ï¼IPFSä¼å¨DNS TXTè®°å½ä¸­æ¥æ¾å³é®çipnsãIPFSä¼å°æ¥æ¾å°çå¼ç¿»è¯ä¸ºä¸ä¸ªå¯¹è±¡çåå¸å¼æèå¦ä¸ä¸ªipnsçè·¯å¾ï¼

```
# DNS TXT è®°å½
ipfs.benet.ai. TXT "ipfs=XLF2ipQ4jD3U ..."
# è¡¨ç°ä¸ºç¬¦å·é¾æ¥
ln -s /ipns/XLF2ipQ4jD3U /ipns/fs.benet.ai
```

Proquint å¯è¯»çæ è¯ç¬¦
æ»æ¯ä¼æå°äºè¿å¶ç¼ç ç¿»è¯æå¯è¯»æä»¶çæ¹æ³ãIPNSåæ¯æProquint[?].ãå¦ä¸ï¼

```
# proquintè¯­å¥
/ipns/dahih-dolij-sozuk-vosah-luvar-fuluh
# åè§£ä¸ºç¸åºçä¸é¢å½¢å¼
/ipns/KhAwNprxYVxKqpDZ
```

ç¼©ç­åç§°æå¡
ä¼æ¶ç°åºå¾å¤æå¡å¨æä¾ç¼©ç­åç§°çæå¡ï¼åç¨æ·æä¾ä»ä»¬çå½åç©ºé´ãå°±åæä»¬ç°å¨çå°çDNSåWebçURLsï¼

```
# ç¨æ·å¯ä»¥ä»ä¸é¢è·åä¸ä¸ªlink
/ipns/shorten.er/foobar
# ç¶åæ¾å°èªå·±çå½åç©ºé´
/ipns/XLF2ipQ4jD3UdeX5xp1KBgeHRhemUtaA8Vm
```

### 3.8ä½¿ç¨IPFS

IPFSè®¾è®¡ä¸ºå¯ä»¥ä½¿ç¨å¤ç§ä¸åçæ¹æ³æ¥ä½¿ç¨çï¼ä¸é¢å°±æ¯ä¸äºæå°ä¼ç»§ç»­è¿½æ±çä½¿ç¨æ¹å¼ï¼

1. ä½ä¸ºä¸ä¸ªæè½½çå¨å±æä»¶ç³»ç»ï¼æè½½å¨/ipfså/ipnsä¸
2. ä½ä¸ºä¸ä¸ªæè½½çä¸ªäººåæ­¥æä»¶å¤¹ï¼èªå¨çè¿è¡çæ¬ç®¡çï¼åå¸ï¼ä»¥åå¤ä»½ä»»ä½çåå¥
3. ä½ä¸ºä¸ä¸ªå å¯çæä»¶æèæ°æ®å±äº«ç³»ç»
4. ä½ä¸ºææè½¯ä»¶ççæ¬åç®¡çè
5. ä½ä¸ºèææºå¨çæ ¹æä»¶ç³»ç»
6. ä½ä¸ºVMçå¯å¨æä»¶ç³»ç» (å¨ç®¡çç¨åºä¸)
7. ä½ä¸ºä¸ä¸ªæ°æ®åºï¼åºç¨å¯ä»¥ç´æ¥å°æ°æ®åå¥Merkle DAGæ°æ®æ¨¡åä¸­ï¼è·åææççæ¬ï¼ç¼å²ï¼ä»¥åIPFSæä¾çåé
8. ä½ä¸ºä¸ä¸ªlinkedï¼åå å¯çï¼éä¿¡å¹³å°
9. ä½ä¸ºä¸ä¸ªä¸ºå¤§æä»¶çå®æ´æ§æ£æ¥CDNï¼ä¸ä½¿ç¨SSLçæåµä¸ï¼
10. ä½ä¸ºä¸ä¸ªå å¯çCDN
11. å¨ç½é¡µä¸ï¼ä½ä¸ºä¸ä¸ªweb CDN
12. ä½ä¸ºä¸ä¸ªlinksæ°¸è¿å­å¨æ°çæ°¸æçWeb

IPFSå®ç°çç®æ ï¼

(a)ä¸ä¸ªIPFSåºå¯ä»¥å¯¼åºå°ä½ èªå·±åºç¨ä¸­ä½¿ç¨

(b)å½ä»¤è¡å·¥å·å¯ä»¥ç´æ¥æä½å¯¹è±¡

(c)ä½¿ç¨FUSE[?]æèåæ ¸çæ¨¡åæè½½æä»¶ç³»ç»

## 4. æªæ¥

IPFSçææ³æ¯å åå¹´æåçåå¸å¼ç³»ç»çæ¢ç´¢åå¼æºçäº§ç©ãIPFSç»¼åäºå¾å¤è¿ä»ä¸ºæ­¢å¾æåçç³»ç»ä¸­ä¼ç§çææ³ãé¤äºBitSwapæ°åè®®ä¹å¤ï¼IPFSæå¤§çç¹è²å°±æ¯ç³»ç»çè¦åä»¥åè®¾è®¡çç»¼åæ§ã

IPFSæ¯å»ä¸­å¿åç½ç»åºç¡è®¾æ½çä¸ä¸ªéå¿è®¾æ³ï¼å¾å¤ä¸åç±»åçåºç¨é½å¯ä»¥å»ºç«å¨IPFSä¸ãæä½éåº¦ï¼å®å¯ä»¥ç¨æ¥ä½ä¸ºä¸ä¸ªå¨å±çï¼æè½½æ§ï¼çæ¬æ§å¶æä»¶ç³»ç»åå½åç©ºé´ï¼æèä½ä¸ºä¸ä¸ä»£çæä»¶å±äº«ç³»ç»ãèæå¥½çæåµæ¯ï¼IPFSå¯ä»¥è®©Webåçº§ä¸ä¸ªå±æ¬¡ï¼å½åå¸ä¸ä¸ªæä»·å¼çä¿¡æ¯æ¶ï¼ä»»ä½æå´è¶£çäººé½å¯ä»¥è¿è¡åå¸èä¸ä¼å¼ºè¿«æ§çå¿é¡»åªåè®¸åå¸æºæè¿è¡åå¸ï¼ç¨æ·å¯ä»¥ä¿¡ä»»ä¿¡æ¯çåå®¹ï¼ä¿¡ä¸ä¿¡ä»»ä¿¡æ¯çåéèé½æ¯æ å³ç´§è¦çï¼è¿æä¸ä¸ªç¹ç¹å°±æ¯ï¼ä¸äºéè¦ä½å¾èçæä»¶ä¹ä¸ä¼ä¸¢å¤±ãIPFSæå¾çå¸¦æä»¬è¿å¥å°ä¸ä¸ªæ°¸æWdbçä¸çã

## 5. æè°¢

IPFSæ¯ä¸ä¸ªå¾å¤å¾æ£çä¸»æä»¥åç³»ç»çç»¼åä½ãæ²¡æç«å¨å·¨äººçè©èä¸ï¼IPFSä¹ä¸å¯è½æ¢äºæä¸ä¸ªè¿ä¹æéå¿çç®æ ãä¸ªäººæè°¢åä¸è¿äºä¸»æé¿æè®¨è®ºçäººï¼David Dalrymple, Joe Zimmerman, and Ali Yahyaï¼ç¹å«æ¯ï¼æ­å¼Merkle DAGçæ»ä½æ¶æ(David, Joe),æ»å¨åå¸é»å¡(David), s/kademlia sybill ä¿æ¤(David, Ali)ï¼ç¹å«æè°¢David Mazieres,ä¸ºä»ä¹åéå¸¸èªæçä¸»æã



## 6. å¼ç¨å¤å¿å½



[1].I. Baumgart and S. Mies. S/kademlia:ä¸ä¸ªå®å¨çåºäºç§é¥è·¯ç±çå¯è¡æ¹æ³ã2007å¹´å½éä¼è®®ï¼ç¬¬2å·ï¼1-8é¡µï¼å¨ãå¹¶åååå¸å¼ç³»ç»ãä¸­ãIEEEï¼2007å¹´ã

â

[2].I. BitTorrent.BittorrentåAttorrentè½¯ä»¶è¶è¿1äº¿5000ä¸ç¨æ·éç¨ç¢ï¼Janã2012



[3].B. Cohen.æ¿å±æºå¶å¨bittorrentä¸­å»ºç«äºå¥å£®æ§ãå¨ãå¯¹ç­ç³»ç»ç»æµç è®¨ä¼ãä¸­ï¼ç¬¬6å·ï¼68-72é¡µï¼2003å¹´ã

â

[4].J. Dean and S. Ghemawat. Leveldb - ä¸ä¸ªå¿«éåè½»éçº§é®å¼å­å¨æ°æ®åºï¼è°·æ­æä¾ï¼2011å¹´ã

â

[5].M. J. Freedman, E. Freudenthal, and D. Mazieres. Coralæ°ä¸»åå®¹åå¸ãå¨NSDIä¸­ï¼ç¬¬4å·ï¼18-18é¡µï¼2004å¹´ã

â

[6].J. H. Howard, M. L. Kazar, S. G. Menees, D. A,Nichols, M. Satyanarayanan, R. N. Sidebotham, ä»¥åM. J. West.åå¸å¼æä»¶ç³»ç»çè§æ¨¡åæ§è½ãâACM çµèç³»ç»ä¸çäº¤æ ï¼TOCSï¼â 6(1):51-81, 1988å¹´